basePath: /api/v1
definitions:
  types.Amount:
    properties:
      amount_due:
        description: 应收（分）
        type: integer
      amount_paid:
        description: 实收（分）
        type: integer
      amount_refunded:
        description: 已退款（分）
        type: integer
      change_amount:
        description: 找零（分）
        type: integer
      delivery_fee:
        description: 配送费（分）
        type: integer
      discount_total:
        description: 折扣合计（分）
        type: integer
      fee_total:
        description: 其他费用合计（分，小费/附加费等）
        type: integer
      items_subtotal:
        description: 商品小计（分）
        type: integer
      promotion_discount_total:
        description: 促销优惠合计（分）
        type: integer
      rounding_amount:
        description: 舍入/抹零（分）
        type: integer
      service_fee_total:
        description: 服务费合计（分）
        type: integer
      tax_total:
        description: 税费合计（分）
        type: integer
      voucher_discount_total:
        description: 卡券优惠合计（分）
        type: integer
    type: object
  types.Cashier:
    properties:
      cashier_id:
        description: 收银员ID
        type: string
      cashier_name:
        description: 收银员名称
        type: string
    type: object
  types.Channel:
    properties:
      code:
        description: 渠道编码（POS/MINI_PROGRAM）
        type: string
      name:
        description: 渠道名称
        type: string
    type: object
  types.Coupon:
    properties:
      coupon_code:
        description: 卡券码
        type: string
      coupon_id:
        description: 卡券ID
        type: string
      coupon_name:
        description: 卡券名称
        type: string
      coupon_type:
        description: 卡券类型
        type: string
      discount_amount:
        description: 卡券优惠金额（分）
        type: integer
      meta:
        description: 卡券扩展信息
    type: object
  types.CreateOrderReq:
    properties:
      amount:
        $ref: '#/definitions/types.Amount'
      business_date:
        description: 营业日
        type: string
      cart:
        items:
          $ref: '#/definitions/types.Product'
        type: array
      cashier:
        $ref: '#/definitions/types.Cashier'
      channel:
        $ref: '#/definitions/types.Channel'
      completed_at:
        type: string
      coupons:
        items:
          $ref: '#/definitions/types.Coupon'
        type: array
      dining_mode:
        description: 堂食/外卖（DINE_IN/TAKEAWAY）
        enum:
        - DINE_IN
        - TAKEAWAY
        type: string
      fees:
        items:
          $ref: '#/definitions/types.Fee'
        type: array
      fulfillment_status:
        enum:
        - NONE
        - IN_RESTAURANT
        - SERVED
        - PICKUP_PENDING
        - PICKED_UP
        - DELIVERING
        - DELIVERED
        type: string
      guest_count:
        type: integer
      member:
        $ref: '#/definitions/types.Member'
      merchant_id:
        description: 品牌商ID
        type: string
      opened_at:
        type: string
      opened_by:
        type: string
      order_no:
        description: 订单号（可选，未传则后端生成）
        type: string
      order_status:
        enum:
        - DRAFT
        - PLACED
        - IN_PROGRESS
        - READY
        - COMPLETED
        - CANCELLED
        - VOIDED
        - MERGED
        type: string
      order_type:
        description: 订单类型（SALE/REFUND/PARTIAL_REFUND）
        enum:
        - SALE
        - REFUND
        - PARTIAL_REFUND
        type: string
      origin_order_id:
        description: 原正单订单ID（退款/部分退款单使用）
        type: string
      paid_at:
        type: string
      paid_by:
        type: string
      payment_status:
        enum:
        - UNPAID
        - PAYING
        - PARTIALLY_PAID
        - PAID
        - PARTIALLY_REFUNDED
        - REFUNDED
        type: string
      payments:
        items:
          $ref: '#/definitions/types.Payment'
        type: array
      placed_at:
        type: string
      placed_by:
        type: string
      pos:
        $ref: '#/definitions/types.POS'
      products:
        items:
          $ref: '#/definitions/types.Product'
        type: array
      promotions:
        items:
          $ref: '#/definitions/types.Promotion'
        type: array
      refund:
        allOf:
        - $ref: '#/definitions/types.Refund'
        description: 退款单信息
      refunds_products:
        items:
          $ref: '#/definitions/types.Product'
        type: array
      shift_no:
        description: 班次号
        type: string
      store:
        $ref: '#/definitions/types.Store'
      store_id:
        description: 门店ID
        type: string
      table_capacity:
        type: integer
      table_id:
        type: string
      table_name:
        type: string
      table_status:
        enum:
        - OPENED
        - TRANSFERRED
        - RELEASED
        type: string
      takeaway:
        $ref: '#/definitions/types.Takeaway'
      tax_rates:
        items:
          $ref: '#/definitions/types.TaxRate'
        type: array
    required:
    - business_date
    - dining_mode
    - merchant_id
    - store_id
    type: object
  types.Fee:
    properties:
      amount:
        description: 费用金额（分）
        type: integer
      fee_id:
        description: 费用ID
        type: string
      fee_name:
        description: 费用名称
        type: string
      fee_type:
        description: 费用类型（TIP/PACKAGING/SURCHARGE/OTHER 等）
        type: string
      meta:
        description: 扩展信息
    type: object
  types.ListOrderResp:
    properties:
      items:
        description: 列表数据
        items:
          $ref: '#/definitions/types.OrderResp'
        type: array
      pagination:
        allOf:
        - $ref: '#/definitions/upagination.Pagination'
        description: 分页信息
    type: object
  types.Member:
    properties:
      member_id:
        description: 会员ID
        type: string
      member_level_name:
        description: 会员等级名称
        type: string
      member_name:
        description: 会员姓名/昵称
        type: string
      member_no:
        description: 会员号
        type: string
      member_phone:
        description: 会员手机号
        type: string
    type: object
  types.OrderResp:
    properties:
      amount:
        allOf:
        - $ref: '#/definitions/types.Amount'
        description: 金额汇总（分）
      business_date:
        description: 营业日
        type: string
      cart:
        description: 购物车（未下单商品）
        items:
          $ref: '#/definitions/types.Product'
        type: array
      cashier:
        allOf:
        - $ref: '#/definitions/types.Cashier'
        description: 收银员信息
      channel:
        allOf:
        - $ref: '#/definitions/types.Channel'
        description: 下单渠道
      completed_at:
        description: 完成时间
        type: string
      coupons:
        description: 卡券
        items:
          $ref: '#/definitions/types.Coupon'
        type: array
      dining_mode:
        description: 堂食/外卖
        type: string
      fees:
        description: 费用明细
        items:
          $ref: '#/definitions/types.Fee'
        type: array
      fulfillment_status:
        description: 交付状态
        type: string
      guest_count:
        description: 用餐人数（堂食）
        type: integer
      member:
        allOf:
        - $ref: '#/definitions/types.Member'
        description: 会员信息
      merchant_id:
        description: 品牌商ID
        type: string
      opened_at:
        description: 开台时间
        type: string
      opened_by:
        description: 开台人
        type: string
      order_id:
        description: 订单ID
        type: string
      order_no:
        description: 订单号
        type: string
      order_status:
        description: 订单状态
        type: string
      order_type:
        description: 订单类型（SALE/REFUND/PARTIAL_REFUND）
        type: string
      paid_at:
        description: 支付完成时间
        type: string
      paid_by:
        description: 收款人
        type: string
      payment_status:
        description: 支付状态
        type: string
      payments:
        description: 支付记录
        items:
          $ref: '#/definitions/types.Payment'
        type: array
      placed_at:
        description: 下单时间
        type: string
      placed_by:
        description: 下单人
        type: string
      pos:
        allOf:
        - $ref: '#/definitions/types.POS'
        description: POS 终端信息
      products:
        description: 下单商品
        items:
          $ref: '#/definitions/types.Product'
        type: array
      promotions:
        description: 促销
        items:
          $ref: '#/definitions/types.Promotion'
        type: array
      refund:
        allOf:
        - $ref: '#/definitions/types.Refund'
        description: 退款单信息
      refunds_products:
        description: 退菜记录
        items:
          $ref: '#/definitions/types.Product'
        type: array
      shift_no:
        description: 班次号
        type: string
      store:
        allOf:
        - $ref: '#/definitions/types.Store'
        description: 门店信息
      table_capacity:
        description: 桌位容量（几人桌，如 2/4/6，仅堂食）
        type: integer
      table_id:
        description: 桌位ID（堂食）
        type: string
      table_name:
        description: 桌位名称（堂食，如 A01/1号桌）
        type: string
      table_status:
        description: 桌位状态
        type: string
      takeaway:
        allOf:
        - $ref: '#/definitions/types.Takeaway'
        description: 外卖信息（dining_mode=TAKEAWAY）
      tax_rates:
        description: 税率
        items:
          $ref: '#/definitions/types.TaxRate'
        type: array
    type: object
  types.POS:
    properties:
      device_id:
        description: 设备ID
        type: string
      pos_code:
        description: POS 编码
        type: string
      pos_id:
        description: POS ID
        type: string
    type: object
  types.Payment:
    properties:
      cashier:
        allOf:
        - $ref: '#/definitions/types.Cashier'
        description: 收银员信息
      paid_at:
        description: 支付时间
        type: string
      payment_amount:
        description: 支付金额（分）
        type: integer
      payment_method:
        description: 支付方式
        type: string
      payment_no:
        description: 支付号（第三方/外部交易号）
        type: string
      pos:
        allOf:
        - $ref: '#/definitions/types.POS'
        description: POS 终端信息
    type: object
  types.Product:
    properties:
      amount_after_tax:
        description: 税后金额（分）
        type: integer
      amount_before_tax:
        description: 税前金额（分）
        type: integer
      discount_amount:
        description: 优惠金额（分）
        type: integer
      index:
        description: 下单序号（同订单内第几次下单）
        type: integer
      note:
        description: 备注
        type: string
      options:
        description: 做法/加料（结构化）
      order_item_id:
        description: 订单内明细ID
        type: string
      price:
        description: 单价（分）
        type: integer
      product_id:
        description: 商品ID
        type: string
      product_name:
        description: 商品名（快照）
        type: string
      promotion_discount:
        description: 促销优惠金额（分）
        type: integer
      promotions:
        description: 促销明细（可叠加）
        items:
          $ref: '#/definitions/types.Promotion'
        type: array
      qty:
        description: 数量
        type: integer
      refund_reason:
        description: 退菜原因
        type: string
      refunded_at:
        description: 退菜时间
        type: string
      refunded_by:
        description: 退菜操作人
        type: string
      sku_id:
        description: SKU ID
        type: string
      sku_name:
        description: SKU 名称（快照）
        type: string
      subtotal:
        description: 小计（分）
        type: integer
      tax:
        description: 税额（分）
        type: integer
      tax_rate:
        description: 税率（万分比，如 600 表示 6%）
        type: integer
      total:
        description: 合计（分）
        type: integer
      void_amount:
        description: 已退菜金额汇总（分）
        type: integer
      void_qty:
        description: 已退菜数量汇总
        type: integer
    type: object
  types.Promotion:
    properties:
      discount_amount:
        description: 促销优惠金额（分）
        type: integer
      meta:
        description: 促销扩展信息
      promotion_id:
        description: 促销ID
        type: string
      promotion_name:
        description: 促销名称
        type: string
      promotion_type:
        description: 促销类型
        type: string
    type: object
  types.Refund:
    properties:
      origin_order_id:
        description: 原正单订单ID
        type: string
      origin_order_no:
        description: 原正单订单号
        type: string
      reason:
        description: 退款说明
        type: string
    type: object
  types.Store:
    properties:
      store_address:
        description: 门店地址
        type: string
      store_id:
        description: 门店ID
        type: string
      store_name:
        description: 门店名称
        type: string
      store_no:
        description: 门店编号
        type: string
      store_phone:
        description: 门店电话
        type: string
    type: object
  types.Takeaway:
    properties:
      contact_name:
        description: 联系人/收货人
        type: string
      contact_phone:
        description: 联系电话
        type: string
      delivery_address:
        description: 配送地址（配送）
        type: string
      delivery_fee:
        description: 配送费（分）
        type: integer
      delivery_order_no:
        description: 平台配送单号
        type: string
      delivery_platform:
        description: 配送平台（如 MEITUAN/ELEME/SELF）
        type: string
      delivery_remark:
        description: 配送备注
        type: string
      delivery_rider_name:
        description: 骑手姓名
        type: string
      delivery_rider_phone:
        description: 骑手电话
        type: string
      delivery_status:
        description: 配送状态（平台侧）
        type: string
      delivery_tracking_no:
        description: 运单号/骑手单号
        type: string
      pickup_eta_at:
        description: 预计取餐时间（RFC3339 字符串）
        type: string
      pickup_no:
        description: 取餐号（自取）
        type: string
      takeaway_type:
        description: 外卖类型（PICKUP/DELIVERY）
        type: string
    type: object
  types.TaxRate:
    properties:
      meta:
        description: 扩展信息
      rate:
        description: 税率（万分比，如 600 表示 6%）
        type: integer
      tax_amount:
        description: 税额（分）
        type: integer
      tax_rate_id:
        description: 税率ID
        type: string
      tax_rate_name:
        description: 税率名称
        type: string
      taxable_amount:
        description: 计税金额（分）
        type: integer
    type: object
  types.UpdateOrderReq:
    properties:
      amount:
        $ref: '#/definitions/types.Amount'
      business_date:
        type: string
      cart:
        items:
          $ref: '#/definitions/types.Product'
        type: array
      cashier:
        $ref: '#/definitions/types.Cashier'
      channel:
        $ref: '#/definitions/types.Channel'
      completed_at:
        type: string
      coupons:
        items:
          $ref: '#/definitions/types.Coupon'
        type: array
      dining_mode:
        description: 堂食/外卖（DINE_IN/TAKEAWAY）
        enum:
        - DINE_IN
        - TAKEAWAY
        type: string
      fees:
        items:
          $ref: '#/definitions/types.Fee'
        type: array
      fulfillment_status:
        enum:
        - NONE
        - IN_RESTAURANT
        - SERVED
        - PICKUP_PENDING
        - PICKED_UP
        - DELIVERING
        - DELIVERED
        type: string
      guest_count:
        type: integer
      member:
        $ref: '#/definitions/types.Member'
      opened_at:
        type: string
      opened_by:
        type: string
      order_no:
        type: string
      order_status:
        enum:
        - DRAFT
        - PLACED
        - IN_PROGRESS
        - READY
        - COMPLETED
        - CANCELLED
        - VOIDED
        - MERGED
        type: string
      order_type:
        description: 订单类型（SALE/REFUND/PARTIAL_REFUND）
        enum:
        - SALE
        - REFUND
        - PARTIAL_REFUND
        type: string
      origin_order_id:
        type: string
      paid_at:
        type: string
      paid_by:
        type: string
      payment_status:
        enum:
        - UNPAID
        - PAYING
        - PARTIALLY_PAID
        - PAID
        - PARTIALLY_REFUNDED
        - REFUNDED
        type: string
      payments:
        items:
          $ref: '#/definitions/types.Payment'
        type: array
      placed_at:
        type: string
      placed_by:
        type: string
      pos:
        $ref: '#/definitions/types.POS'
      products:
        items:
          $ref: '#/definitions/types.Product'
        type: array
      promotions:
        items:
          $ref: '#/definitions/types.Promotion'
        type: array
      refund:
        $ref: '#/definitions/types.Refund'
      refunds_products:
        items:
          $ref: '#/definitions/types.Product'
        type: array
      shift_no:
        type: string
      store:
        $ref: '#/definitions/types.Store'
      table_capacity:
        type: integer
      table_id:
        type: string
      table_name:
        type: string
      table_status:
        enum:
        - OPENED
        - TRANSFERRED
        - RELEASED
        type: string
      takeaway:
        $ref: '#/definitions/types.Takeaway'
      tax_rates:
        items:
          $ref: '#/definitions/types.TaxRate'
        type: array
    type: object
  upagination.Pagination:
    properties:
      page:
        description: 页码
        type: integer
      size:
        description: 每页数量
        type: integer
      total:
        description: 总页数
        type: integer
    type: object
info:
  contact: {}
  description: 供收银机等客户端调用.
  title: 前台 API
  version: "1.0"
paths:
  /orders:
    get:
      consumes:
      - application/json
      parameters:
      - description: 品牌商ID
        in: query
        name: merchant_id
        required: true
        type: string
      - description: 门店ID
        in: query
        name: store_id
        required: true
        type: string
      - description: 营业日
        in: query
        name: business_date
        type: string
      - description: 订单号
        in: query
        name: order_no
        type: string
      - description: 订单类型
        enum:
        - SALE
        - REFUND
        - PARTIAL_REFUND
        in: query
        name: order_type
        type: string
      - description: 订单状态
        enum:
        - DRAFT
        - PLACED
        - IN_PROGRESS
        - READY
        - COMPLETED
        - CANCELLED
        - VOIDED
        - MERGED
        in: query
        name: order_status
        type: string
      - description: 支付状态
        enum:
        - UNPAID
        - PAYING
        - PARTIALLY_PAID
        - PAID
        - PARTIALLY_REFUNDED
        - REFUNDED
        in: query
        name: payment_status
        type: string
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 成功
          schema:
            $ref: '#/definitions/types.ListOrderResp'
      security:
      - BearerAuth: []
      summary: 获取订单列表
      tags:
      - 订单
    post:
      consumes:
      - application/json
      parameters:
      - description: 请求信息
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/types.CreateOrderReq'
      produces:
      - application/json
      responses:
        "200":
          description: 成功
          schema:
            $ref: '#/definitions/types.OrderResp'
      security:
      - BearerAuth: []
      summary: 创建订单
      tags:
      - 订单
  /orders/{id}:
    delete:
      consumes:
      - application/json
      parameters:
      - description: 订单ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: No Content
      security:
      - BearerAuth: []
      summary: 删除订单
      tags:
      - 订单
    get:
      consumes:
      - application/json
      parameters:
      - description: 订单ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功
          schema:
            $ref: '#/definitions/types.OrderResp'
      security:
      - BearerAuth: []
      summary: 获取订单详情
      tags:
      - 订单
    put:
      consumes:
      - application/json
      parameters:
      - description: 订单ID
        in: path
        name: id
        required: true
        type: string
      - description: 请求信息
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/types.UpdateOrderReq'
      produces:
      - application/json
      responses:
        "200":
          description: 成功
          schema:
            $ref: '#/definitions/types.OrderResp'
      security:
      - BearerAuth: []
      summary: 更新订单
      tags:
      - 订单
securityDefinitions:
  BearerAuth:
    description: Type "Bearer" followed by a space and the JWT token.
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
