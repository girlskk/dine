basePath: /api/v1
definitions:
  domain.Channel:
    enum:
    - POS
    type: string
    x-enum-comments:
      ChannelPOS: POS终端
    x-enum-descriptions:
    - POS终端
    x-enum-varnames:
    - ChannelPOS
  domain.DiningMode:
    enum:
    - DINE_IN
    type: string
    x-enum-comments:
      DiningModeDineIn: 堂食
    x-enum-descriptions:
    - 堂食
    x-enum-varnames:
    - DiningModeDineIn
  domain.Order:
    properties:
      amount:
        allOf:
        - $ref: '#/definitions/domain.OrderAmount'
        description: 金额汇总
      business_date:
        description: 营业日
        type: string
      cashier:
        allOf:
        - $ref: '#/definitions/domain.OrderCashier'
        description: 收银员信息
      channel:
        allOf:
        - $ref: '#/definitions/domain.Channel'
        description: 下单渠道
      completed_at:
        description: 完成时间
        type: string
      created_at:
        type: string
      dining_mode:
        allOf:
        - $ref: '#/definitions/domain.DiningMode'
        description: 堂食/外卖
      fees:
        description: 费用
        items:
          $ref: '#/definitions/domain.OrderFee'
        type: array
      guest_count:
        description: 用餐人数
        type: integer
      id:
        type: string
      merchant_id:
        description: 品牌商ID
        type: string
      order_no:
        description: 订单号
        type: string
      order_products:
        description: 订单商品明细
        items:
          $ref: '#/definitions/domain.OrderProduct'
        type: array
      order_status:
        allOf:
        - $ref: '#/definitions/domain.OrderStatus'
        description: 订单状态
      order_type:
        allOf:
        - $ref: '#/definitions/domain.OrderType'
        description: 订单类型
      paid_at:
        description: 支付完成时间
        type: string
      payment_status:
        allOf:
        - $ref: '#/definitions/domain.PaymentStatus'
        description: 支付状态
      payments:
        description: 支付记录
        items:
          $ref: '#/definitions/domain.OrderPayment'
        type: array
      placed_at:
        description: 下单时间
        type: string
      placed_by:
        description: 下单人
        type: string
      pos:
        allOf:
        - $ref: '#/definitions/domain.OrderPOS'
        description: POS 终端信息
      refund:
        allOf:
        - $ref: '#/definitions/domain.OrderRefund'
        description: 退款单信息
      shift_no:
        description: 班次号
        type: string
      store:
        allOf:
        - $ref: '#/definitions/domain.OrderStore'
        description: 门店信息
      store_id:
        description: 门店ID
        type: string
      table_id:
        description: 桌位ID
        type: string
      table_name:
        description: 桌位名称
        type: string
      tax_rates:
        description: 税率
        items:
          $ref: '#/definitions/domain.OrderTaxRate'
        type: array
      updated_at:
        type: string
    type: object
  domain.OrderAmount:
    properties:
      amount_due:
        description: 应收
        type: number
      amount_paid:
        description: 实收
        type: number
      amount_refunded:
        description: 已退款
        type: number
      change_amount:
        description: 找零
        type: number
      delivery_fee:
        description: 配送费
        type: number
      discount_total:
        description: 折扣合计
        type: number
      fee_total:
        description: 其他费用合计
        type: number
      items_subtotal:
        description: 商品小计
        type: number
      rounding_amount:
        description: 舍入/抹零
        type: number
      service_fee_total:
        description: 服务费合计
        type: number
      tax_total:
        description: 税费合计
        type: number
    type: object
  domain.OrderCashier:
    properties:
      cashier_id:
        description: 收银员ID
        type: string
      cashier_name:
        description: 收银员名称
        type: string
    type: object
  domain.OrderFee:
    properties:
      amount:
        description: 费用金额
        type: number
      fee_id:
        description: 费用ID
        type: string
      fee_name:
        description: 费用名称
        type: string
      fee_type:
        description: 费用类型（TIP/PACKAGING/SURCHARGE/OTHER 等）
        type: string
      meta:
        description: 扩展信息
    type: object
  domain.OrderPOS:
    properties:
      device_id:
        description: 设备ID
        type: string
      pos_code:
        description: POS 编码
        type: string
      pos_id:
        description: POS ID
        type: string
    type: object
  domain.OrderPayment:
    properties:
      cashier:
        allOf:
        - $ref: '#/definitions/domain.OrderCashier'
        description: 收银员信息
      paid_at:
        description: 支付时间
        type: string
      payment_amount:
        description: 支付金额
        type: number
      payment_method:
        description: 支付方式
        type: string
      payment_no:
        description: 支付号（第三方/外部交易号）
        type: string
      pos:
        allOf:
        - $ref: '#/definitions/domain.OrderPOS'
        description: POS 终端信息
    type: object
  domain.OrderProduct:
    properties:
      amount_after_tax:
        description: 税后金额
        type: number
      amount_before_tax:
        description: 税前金额
        type: number
      attr_relations:
        description: 口味做法信息
        items:
          type: integer
        type: array
      category_id:
        description: 分类ID
        type: string
      created_at:
        type: string
      delivery_cost_price:
        description: 外卖成本价
        type: number
      description:
        description: 菜品描述
        type: string
      discount_amount:
        description: 优惠金额
        type: number
      estimated_cost_price:
        description: 套餐信息（仅套餐商品使用）
        type: number
      id:
        type: string
      index:
        description: 下单序号（同订单内第几次下单）
        type: integer
      main_image:
        description: 商品主图
        type: string
      menu_id:
        description: 菜单ID
        type: string
      note:
        description: 其他信息
        type: string
      order_id:
        description: 订单关联
        type: string
      order_item_id:
        description: 订单内明细ID
        type: string
      product_id:
        description: 商品基础信息
        type: string
      product_name:
        description: 商品名称
        type: string
      product_type:
        allOf:
        - $ref: '#/definitions/domain.ProductType'
        description: 商品类型
      promotion_discount:
        description: 促销信息
        type: number
      qty:
        description: 数量与金额
        type: integer
      refund_reason:
        description: 退菜原因
        type: string
      refunded_at:
        description: 退菜时间
        type: string
      refunded_by:
        description: 退菜操作人
        type: string
      sale_channels:
        description: 售卖渠道
        items:
          $ref: '#/definitions/domain.SaleChannel'
        type: array
      sale_status:
        allOf:
        - $ref: '#/definitions/domain.ProductSaleStatus'
        description: 售卖状态
      set_meal_groups:
        description: 套餐组信息
        items:
          type: integer
        type: array
      spec_relations:
        description: 规格信息
        items:
          type: integer
        type: array
      subtotal:
        description: 小计
        type: number
      support_types:
        description: 支持类型（堂食、外带、外卖）
        items:
          $ref: '#/definitions/domain.ProductSupportType'
        type: array
      tax:
        description: 税额
        type: number
      tax_rate:
        description: 税率（百分比，如 6.00 表示 6%）
        type: number
      total:
        description: 合计
        type: number
      unit_id:
        description: 单位ID
        type: string
      updated_at:
        type: string
      void_amount:
        description: 已退菜金额汇总
        type: number
      void_qty:
        description: 退菜信息
        type: integer
    type: object
  domain.OrderRefund:
    properties:
      origin_order_id:
        description: 原正单订单ID
        type: string
      origin_order_no:
        description: 原正单订单号
        type: string
      reason:
        description: 退款说明
        type: string
    type: object
  domain.OrderStatus:
    enum:
    - PLACED
    - COMPLETED
    - CANCELLED
    type: string
    x-enum-comments:
      OrderStatusCancelled: 已取消
      OrderStatusCompleted: 已完成
      OrderStatusPlaced: 已下单
    x-enum-descriptions:
    - 已下单
    - 已完成
    - 已取消
    x-enum-varnames:
    - OrderStatusPlaced
    - OrderStatusCompleted
    - OrderStatusCancelled
  domain.OrderStore:
    properties:
      contact_phone:
        description: 联系电话
        type: string
      id:
        type: string
      merchant_id:
        description: 商户 ID
        type: string
      merchant_name:
        description: 商户名称
        type: string
      store_code:
        description: 门店编码(保留字段)
        type: string
      store_name:
        description: 门店名称
        type: string
    type: object
  domain.OrderTaxRate:
    properties:
      meta:
        description: 扩展信息
      rate:
        description: 税率（百分比）
        type: number
      tax_amount:
        description: 税额
        type: number
      tax_rate_id:
        description: 税率ID
        type: string
      tax_rate_name:
        description: 税率名称
        type: string
      taxable_amount:
        description: 计税金额
        type: number
    type: object
  domain.OrderType:
    enum:
    - SALE
    - REFUND
    - PARTIAL_REFUND
    type: string
    x-enum-comments:
      OrderTypePartialRefund: 部分退款单
      OrderTypeRefund: 退单
      OrderTypeSale: 销售单
    x-enum-descriptions:
    - 销售单
    - 退单
    - 部分退款单
    x-enum-varnames:
    - OrderTypeSale
    - OrderTypeRefund
    - OrderTypePartialRefund
  domain.PaymentStatus:
    enum:
    - UNPAID
    - PAYING
    - PAID
    - REFUNDED
    type: string
    x-enum-comments:
      PaymentStatusPaid: 已支付
      PaymentStatusPaying: 支付中
      PaymentStatusRefunded: 全额退款
      PaymentStatusUnpaid: 未支付
    x-enum-descriptions:
    - 未支付
    - 支付中
    - 已支付
    - 全额退款
    x-enum-varnames:
    - PaymentStatusUnpaid
    - PaymentStatusPaying
    - PaymentStatusPaid
    - PaymentStatusRefunded
  domain.ProductSaleStatus:
    enum:
    - on_sale
    - off_sale
    type: string
    x-enum-comments:
      ProductSaleStatusOffSale: 停售
      ProductSaleStatusOnSale: 在售
    x-enum-descriptions:
    - 在售
    - 停售
    x-enum-varnames:
    - ProductSaleStatusOnSale
    - ProductSaleStatusOffSale
  domain.ProductSupportType:
    enum:
    - dine
    - takeaway
    - delivery
    type: string
    x-enum-comments:
      ProductSupportTypeDelivery: 外卖
      ProductSupportTypeDine: 堂食
      ProductSupportTypeTakeaway: 外带
    x-enum-descriptions:
    - 堂食
    - 外带
    - 外卖
    x-enum-varnames:
    - ProductSupportTypeDine
    - ProductSupportTypeTakeaway
    - ProductSupportTypeDelivery
  domain.ProductType:
    enum:
    - normal
    - set_meal
    type: string
    x-enum-comments:
      ProductTypeNormal: 普通商品
      ProductTypeSetMeal: 套餐商品
    x-enum-descriptions:
    - 普通商品
    - 套餐商品
    x-enum-varnames:
    - ProductTypeNormal
    - ProductTypeSetMeal
  domain.SaleChannel:
    enum:
    - POS
    - Mobile
    - Scan
    - SelfService
    - ThirdParty
    - POS
    - Mobile
    - Scan
    - SelfService
    - ThirdParty
    type: string
    x-enum-comments:
      PaymentMethodDisplayChannelMobileOrdering: 移动点餐
      PaymentMethodDisplayChannelPOS: POS
      PaymentMethodDisplayChannelScanOrdering: 扫码点餐
      PaymentMethodDisplayChannelSelfService: 自助点餐
      PaymentMethodDisplayChannelThirdPartyDelivery: 三方外卖
      SaleChannelMobileOrdering: 移动点餐
      SaleChannelPOS: POS
      SaleChannelScanOrdering: 扫码点餐
      SaleChannelSelfService: 自助点餐
      SaleChannelThirdPartyDelivery: 三方外卖
    x-enum-descriptions:
    - POS
    - 移动点餐
    - 扫码点餐
    - 自助点餐
    - 三方外卖
    - POS
    - 移动点餐
    - 扫码点餐
    - 自助点餐
    - 三方外卖
    x-enum-varnames:
    - SaleChannelPOS
    - SaleChannelMobileOrdering
    - SaleChannelScanOrdering
    - SaleChannelSelfService
    - SaleChannelThirdPartyDelivery
    - PaymentMethodDisplayChannelPOS
    - PaymentMethodDisplayChannelMobileOrdering
    - PaymentMethodDisplayChannelScanOrdering
    - PaymentMethodDisplayChannelSelfService
    - PaymentMethodDisplayChannelThirdPartyDelivery
  types.CreateOrderReq:
    properties:
      amount:
        allOf:
        - $ref: '#/definitions/domain.OrderAmount'
        description: 金额汇总
      business_date:
        description: 营业日
        type: string
      cashier:
        allOf:
        - $ref: '#/definitions/domain.OrderCashier'
        description: 收银员信息
      channel:
        description: 下单渠道
        enum:
        - POS
        type: string
      dining_mode:
        description: 就餐模式
        enum:
        - DINE_IN
        type: string
      fees:
        description: 费用明细
        items:
          $ref: '#/definitions/domain.OrderFee'
        type: array
      guest_count:
        description: 用餐人数
        type: integer
      merchant_id:
        description: 品牌商ID
        type: string
      order_no:
        description: 订单号
        type: string
      order_products:
        description: 订单商品明细
        items:
          $ref: '#/definitions/domain.OrderProduct'
        type: array
      order_status:
        description: 订单状态
        enum:
        - PLACED
        - COMPLETED
        - CANCELLED
        type: string
      order_type:
        description: 订单类型
        enum:
        - SALE
        - REFUND
        - PARTIAL_REFUND
        type: string
      payment_status:
        description: 支付状态
        enum:
        - UNPAID
        - PAYING
        - PAID
        - REFUNDED
        type: string
      payments:
        description: 支付记录
        items:
          $ref: '#/definitions/domain.OrderPayment'
        type: array
      placed_at:
        description: 下单时间
        type: string
      placed_by:
        description: 下单人
        type: string
      pos:
        allOf:
        - $ref: '#/definitions/domain.OrderPOS'
        description: POS终端信息
      refund:
        allOf:
        - $ref: '#/definitions/domain.OrderRefund'
        description: 退款单信息
      shift_no:
        description: 班次号
        type: string
      store:
        allOf:
        - $ref: '#/definitions/domain.OrderStore'
        description: 门店信息
      store_id:
        description: 门店ID
        type: string
      table_id:
        description: 桌位ID
        type: string
      table_name:
        description: 桌位名称
        type: string
      tax_rates:
        description: 税率明细
        items:
          $ref: '#/definitions/domain.OrderTaxRate'
        type: array
    required:
    - business_date
    - dining_mode
    - merchant_id
    - store_id
    type: object
  types.ListOrderResp:
    properties:
      items:
        description: 订单列表
        items:
          $ref: '#/definitions/domain.Order'
        type: array
      pagination:
        allOf:
        - $ref: '#/definitions/upagination.Pagination'
        description: 分页信息
    type: object
  types.UpdateOrderReq:
    properties:
      amount:
        allOf:
        - $ref: '#/definitions/domain.OrderAmount'
        description: 金额汇总
      business_date:
        description: 营业日
        type: string
      cashier:
        allOf:
        - $ref: '#/definitions/domain.OrderCashier'
        description: 收银员信息
      channel:
        description: 下单渠道
        enum:
        - POS
        type: string
      dining_mode:
        description: 就餐模式
        enum:
        - DINE_IN
        type: string
      fees:
        description: 费用明细
        items:
          $ref: '#/definitions/domain.OrderFee'
        type: array
      guest_count:
        description: 用餐人数
        type: integer
      order_no:
        description: 订单号
        type: string
      order_products:
        description: 订单商品明细
        items:
          $ref: '#/definitions/domain.OrderProduct'
        type: array
      order_status:
        description: 订单状态
        enum:
        - PLACED
        - COMPLETED
        - CANCELLED
        type: string
      order_type:
        description: 订单类型
        enum:
        - SALE
        - REFUND
        - PARTIAL_REFUND
        type: string
      paid_at:
        description: 支付完成时间
        type: string
      payment_status:
        description: 支付状态
        enum:
        - UNPAID
        - PAYING
        - PAID
        - REFUNDED
        type: string
      payments:
        description: 支付记录
        items:
          $ref: '#/definitions/domain.OrderPayment'
        type: array
      placed_at:
        description: 下单时间
        type: string
      placed_by:
        description: 下单人
        type: string
      pos:
        allOf:
        - $ref: '#/definitions/domain.OrderPOS'
        description: POS终端信息
      refund:
        allOf:
        - $ref: '#/definitions/domain.OrderRefund'
        description: 退款单信息
      shift_no:
        description: 班次号
        type: string
      store:
        allOf:
        - $ref: '#/definitions/domain.OrderStore'
        description: 门店信息
      table_id:
        description: 桌位ID
        type: string
      table_name:
        description: 桌位名称
        type: string
      tax_rates:
        description: 税率明细
        items:
          $ref: '#/definitions/domain.OrderTaxRate'
        type: array
    type: object
  upagination.Pagination:
    properties:
      page:
        description: 页码
        type: integer
      size:
        description: 每页数量
        type: integer
      total:
        description: 总页数
        type: integer
    type: object
info:
  contact: {}
  description: 供收银机等客户端调用.
  title: 前台 API
  version: "1.0"
paths:
  /order:
    get:
      consumes:
      - application/json
      parameters:
      - description: 品牌商ID
        in: query
        name: merchant_id
        required: true
        type: string
      - description: 门店ID
        in: query
        name: store_id
        required: true
        type: string
      - description: 营业日
        in: query
        name: business_date
        type: string
      - description: 订单号
        in: query
        name: order_no
        type: string
      - description: 订单类型
        enum:
        - SALE
        - REFUND
        - PARTIAL_REFUND
        in: query
        name: order_type
        type: string
      - description: 订单状态
        enum:
        - PLACED
        - COMPLETED
        - CANCELLED
        in: query
        name: order_status
        type: string
      - description: 支付状态
        enum:
        - UNPAID
        - PAYING
        - PAID
        - REFUNDED
        in: query
        name: payment_status
        type: string
      - description: 页码
        in: query
        name: page
        type: integer
      - description: 每页数量
        in: query
        name: size
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: 成功
          schema:
            $ref: '#/definitions/types.ListOrderResp'
      security:
      - BearerAuth: []
      summary: 获取订单列表
      tags:
      - 订单
    post:
      consumes:
      - application/json
      parameters:
      - description: 请求信息
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/types.CreateOrderReq'
      produces:
      - application/json
      responses:
        "200":
          description: 成功
          schema:
            $ref: '#/definitions/domain.Order'
      security:
      - BearerAuth: []
      summary: 创建订单
      tags:
      - 订单
  /order/{id}:
    delete:
      consumes:
      - application/json
      parameters:
      - description: 订单ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: No Content
      security:
      - BearerAuth: []
      summary: 删除订单
      tags:
      - 订单
    get:
      consumes:
      - application/json
      parameters:
      - description: 订单ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: 成功
          schema:
            $ref: '#/definitions/domain.Order'
      security:
      - BearerAuth: []
      summary: 获取订单详情
      tags:
      - 订单
    put:
      consumes:
      - application/json
      parameters:
      - description: 订单ID
        in: path
        name: id
        required: true
        type: string
      - description: 请求信息
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/types.UpdateOrderReq'
      produces:
      - application/json
      responses:
        "200":
          description: 成功
          schema:
            $ref: '#/definitions/domain.Order'
      security:
      - BearerAuth: []
      summary: 更新订单
      tags:
      - 订单
securityDefinitions:
  BearerAuth:
    description: Type "Bearer" followed by a space and the JWT token.
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
