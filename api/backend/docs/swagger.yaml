basePath: /api/v1
definitions:
  domain.BackendUser:
    properties:
      id:
        type: string
      merchant:
        allOf:
        - $ref: '#/definitions/domain.Merchant'
        description: 关联数据
      merchant_id:
        description: 品牌商ID
        type: string
      nickname:
        type: string
      username:
        type: string
    type: object
  domain.Category:
    properties:
      children:
        description: '@TODO 关联信息'
        items:
          $ref: '#/definitions/domain.Category'
        type: array
      created_at:
        description: 创建时间
        type: string
      id:
        description: 分类ID
        type: string
      inherit_stall:
        description: 是否继承父分类的出品部门ID
        type: boolean
      inherit_tax_rate:
        description: 是否继承父分类的税率ID
        type: boolean
      merchant_id:
        description: 品牌商ID
        type: string
      name:
        description: 分类名称
        type: string
      parent_id:
        description: 父分类ID
        type: string
      product_count:
        description: 关联的商品数量
        type: integer
      sort_order:
        description: 排序，值越小越靠前
        type: integer
      stall_id:
        description: 出品部门ID
        type: string
      store_id:
        description: 门店ID
        type: string
      tax_rate_id:
        description: 税率ID
        type: string
      updated_at:
        description: 更新时间
        type: string
    type: object
  domain.Merchant:
    properties:
      id:
        type: integer
      name:
        type: string
    type: object
  domain.ObjectStorageScene:
    enum:
    - store
    - product
    - order/list_export
    - reconciliation/list_export
    - reconciliation/detail_export
    - point_settlement/list_export
    - point_settlement/detail_export
    type: string
    x-enum-comments:
      ObjectStorageSceneOrderListExport: 订单列表导出
      ObjectStorageScenePointSettlementDetailExport: 积分结算单明细导出
      ObjectStorageScenePointSettlementListExport: 积分结算单导出
      ObjectStorageSceneProduct: 商品
      ObjectStorageSceneReconciliationDetailExport: 财务对账单明细导出
      ObjectStorageSceneReconciliationListExport: 财务对账单导出
      ObjectStorageSceneStore: 门店
    x-enum-descriptions:
    - 门店
    - 商品
    - 订单列表导出
    - 财务对账单导出
    - 财务对账单明细导出
    - 积分结算单导出
    - 积分结算单明细导出
    x-enum-varnames:
    - ObjectStorageSceneStore
    - ObjectStorageSceneProduct
    - ObjectStorageSceneOrderListExport
    - ObjectStorageSceneReconciliationListExport
    - ObjectStorageSceneReconciliationDetailExport
    - ObjectStorageScenePointSettlementListExport
    - ObjectStorageScenePointSettlementDetailExport
  types.CategoryCreateChildReq:
    properties:
      inherit_stall:
        description: 是否继承父分类的出品部门ID
        type: boolean
      inherit_tax_rate:
        description: 是否继承父分类的税率ID
        type: boolean
      name:
        description: 分类名称
        maxLength: 255
        type: string
      stall_id:
        description: 出品部门ID
        type: string
      tax_rate_id:
        description: 税率ID
        type: string
    required:
    - name
    type: object
  types.CategoryCreateRootReq:
    properties:
      children_names:
        description: 子分类名称列表
        items:
          type: string
        type: array
      name:
        description: 分类名称
        maxLength: 255
        type: string
      stall_id:
        description: 出品部门ID
        type: string
      tax_rate_id:
        description: 税率ID
        type: string
    required:
    - name
    type: object
  types.LoginReq:
    properties:
      password:
        type: string
      username:
        type: string
    required:
    - password
    - username
    type: object
  types.LoginResp:
    properties:
      expire:
        type: integer
      token:
        type: string
    type: object
  types.OssTokenReq:
    properties:
      filename:
        description: 文件名
        type: string
      for_download:
        description: 是否用于下载
        type: boolean
      scene:
        allOf:
        - $ref: '#/definitions/domain.ObjectStorageScene'
        description: '业务场景，store：门店相关 product: 商品相关'
        enum:
        - store
        - product
    required:
    - filename
    - scene
    type: object
  types.OssTokenResp:
    properties:
      content_disposition:
        type: string
      dir:
        type: string
      host:
        type: string
      key:
        type: string
      policy:
        type: string
      security_token:
        type: string
      signature:
        type: string
      x_oss_credential:
        type: string
      x_oss_date:
        type: string
      x_oss_signature_version:
        type: string
    type: object
info:
  contact: {}
  description: 供门店后台调用.
  title: 门店后台 API
  version: "1.0"
paths:
  /oss/token:
    post:
      consumes:
      - application/json
      parameters:
      - description: 请求参数
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/types.OssTokenReq'
      produces:
      - application/json
      responses:
        "200":
          description: 成功
          schema:
            $ref: '#/definitions/types.OssTokenResp'
      security:
      - BearerAuth: []
      summary: 获取OSS Token
      tags:
      - 阿里OSS
  /product/category:
    get:
      responses:
        "200":
          description: 成功
          schema:
            items:
              items:
                $ref: '#/definitions/domain.Category'
              type: array
            type: array
      security:
      - BearerAuth: []
      summary: 获取商品分类列表
      tags:
      - 商品分类
    post:
      parameters:
      - description: 请求信息
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/types.CategoryCreateRootReq'
      responses:
        "200":
          description: OK
      security:
      - BearerAuth: []
      summary: 创建一级商品分类
      tags:
      - 商品分类
  /product/category/{id}:
    delete:
      consumes:
      - application/json
      parameters:
      - description: 分类ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: No Content
      security:
      - BearerAuth: []
      summary: 删除商品分类
      tags:
      - 商品分类
    post:
      parameters:
      - description: 父分类ID
        in: path
        name: id
        required: true
        type: string
      - description: 请求信息
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/types.CategoryCreateChildReq'
      responses:
        "200":
          description: OK
      security:
      - BearerAuth: []
      summary: 创建二级商品分类
      tags:
      - 商品分类
  /user/info:
    post:
      consumes:
      - application/json
      produces:
      - application/json
      responses:
        "200":
          description: 成功
          schema:
            $ref: '#/definitions/domain.BackendUser'
      security:
      - BearerAuth: []
      summary: 获取当前用户信息
      tags:
      - 用户管理
  /user/login:
    post:
      consumes:
      - application/json
      parameters:
      - description: 请求信息
        in: body
        name: data
        required: true
        schema:
          $ref: '#/definitions/types.LoginReq'
      produces:
      - application/json
      responses:
        "200":
          description: 成功
          schema:
            $ref: '#/definitions/types.LoginResp'
      security:
      - BearerAuth: []
      summary: 用户登录
      tags:
      - 用户管理
  /user/logout:
    post:
      consumes:
      - application/json
      produces:
      - application/json
      responses:
        "200":
          description: No Content
      security:
      - BearerAuth: []
      summary: 用户登出
      tags:
      - 用户管理
securityDefinitions:
  BearerAuth:
    description: Type "Bearer" followed by a space and the JWT token.
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
