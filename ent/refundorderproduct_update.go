// Code generated by ent, DO NOT EDIT.

package ent

import (
	"context"
	"errors"
	"fmt"
	"time"

	"entgo.io/ent/dialect/sql"
	"entgo.io/ent/dialect/sql/sqlgraph"
	"entgo.io/ent/dialect/sql/sqljson"
	"entgo.io/ent/schema/field"
	"github.com/google/uuid"
	"github.com/shopspring/decimal"
	"gitlab.jiguang.dev/pos-dine/dine/domain"
	"gitlab.jiguang.dev/pos-dine/dine/ent/predicate"
	"gitlab.jiguang.dev/pos-dine/dine/ent/refundorder"
	"gitlab.jiguang.dev/pos-dine/dine/ent/refundorderproduct"
)

// RefundOrderProductUpdate is the builder for updating RefundOrderProduct entities.
type RefundOrderProductUpdate struct {
	config
	hooks     []Hook
	mutation  *RefundOrderProductMutation
	modifiers []func(*sql.UpdateBuilder)
}

// Where appends a list predicates to the RefundOrderProductUpdate builder.
func (ropu *RefundOrderProductUpdate) Where(ps ...predicate.RefundOrderProduct) *RefundOrderProductUpdate {
	ropu.mutation.Where(ps...)
	return ropu
}

// SetUpdatedAt sets the "updated_at" field.
func (ropu *RefundOrderProductUpdate) SetUpdatedAt(t time.Time) *RefundOrderProductUpdate {
	ropu.mutation.SetUpdatedAt(t)
	return ropu
}

// SetDeletedAt sets the "deleted_at" field.
func (ropu *RefundOrderProductUpdate) SetDeletedAt(i int64) *RefundOrderProductUpdate {
	ropu.mutation.ResetDeletedAt()
	ropu.mutation.SetDeletedAt(i)
	return ropu
}

// SetNillableDeletedAt sets the "deleted_at" field if the given value is not nil.
func (ropu *RefundOrderProductUpdate) SetNillableDeletedAt(i *int64) *RefundOrderProductUpdate {
	if i != nil {
		ropu.SetDeletedAt(*i)
	}
	return ropu
}

// AddDeletedAt adds i to the "deleted_at" field.
func (ropu *RefundOrderProductUpdate) AddDeletedAt(i int64) *RefundOrderProductUpdate {
	ropu.mutation.AddDeletedAt(i)
	return ropu
}

// SetRefundOrderID sets the "refund_order_id" field.
func (ropu *RefundOrderProductUpdate) SetRefundOrderID(u uuid.UUID) *RefundOrderProductUpdate {
	ropu.mutation.SetRefundOrderID(u)
	return ropu
}

// SetNillableRefundOrderID sets the "refund_order_id" field if the given value is not nil.
func (ropu *RefundOrderProductUpdate) SetNillableRefundOrderID(u *uuid.UUID) *RefundOrderProductUpdate {
	if u != nil {
		ropu.SetRefundOrderID(*u)
	}
	return ropu
}

// SetOriginOrderProductID sets the "origin_order_product_id" field.
func (ropu *RefundOrderProductUpdate) SetOriginOrderProductID(u uuid.UUID) *RefundOrderProductUpdate {
	ropu.mutation.SetOriginOrderProductID(u)
	return ropu
}

// SetNillableOriginOrderProductID sets the "origin_order_product_id" field if the given value is not nil.
func (ropu *RefundOrderProductUpdate) SetNillableOriginOrderProductID(u *uuid.UUID) *RefundOrderProductUpdate {
	if u != nil {
		ropu.SetOriginOrderProductID(*u)
	}
	return ropu
}

// SetOriginOrderItemID sets the "origin_order_item_id" field.
func (ropu *RefundOrderProductUpdate) SetOriginOrderItemID(s string) *RefundOrderProductUpdate {
	ropu.mutation.SetOriginOrderItemID(s)
	return ropu
}

// SetNillableOriginOrderItemID sets the "origin_order_item_id" field if the given value is not nil.
func (ropu *RefundOrderProductUpdate) SetNillableOriginOrderItemID(s *string) *RefundOrderProductUpdate {
	if s != nil {
		ropu.SetOriginOrderItemID(*s)
	}
	return ropu
}

// ClearOriginOrderItemID clears the value of the "origin_order_item_id" field.
func (ropu *RefundOrderProductUpdate) ClearOriginOrderItemID() *RefundOrderProductUpdate {
	ropu.mutation.ClearOriginOrderItemID()
	return ropu
}

// SetProductID sets the "product_id" field.
func (ropu *RefundOrderProductUpdate) SetProductID(u uuid.UUID) *RefundOrderProductUpdate {
	ropu.mutation.SetProductID(u)
	return ropu
}

// SetNillableProductID sets the "product_id" field if the given value is not nil.
func (ropu *RefundOrderProductUpdate) SetNillableProductID(u *uuid.UUID) *RefundOrderProductUpdate {
	if u != nil {
		ropu.SetProductID(*u)
	}
	return ropu
}

// SetProductName sets the "product_name" field.
func (ropu *RefundOrderProductUpdate) SetProductName(s string) *RefundOrderProductUpdate {
	ropu.mutation.SetProductName(s)
	return ropu
}

// SetNillableProductName sets the "product_name" field if the given value is not nil.
func (ropu *RefundOrderProductUpdate) SetNillableProductName(s *string) *RefundOrderProductUpdate {
	if s != nil {
		ropu.SetProductName(*s)
	}
	return ropu
}

// SetProductType sets the "product_type" field.
func (ropu *RefundOrderProductUpdate) SetProductType(dt domain.ProductType) *RefundOrderProductUpdate {
	ropu.mutation.SetProductType(dt)
	return ropu
}

// SetNillableProductType sets the "product_type" field if the given value is not nil.
func (ropu *RefundOrderProductUpdate) SetNillableProductType(dt *domain.ProductType) *RefundOrderProductUpdate {
	if dt != nil {
		ropu.SetProductType(*dt)
	}
	return ropu
}

// SetCategory sets the "category" field.
func (ropu *RefundOrderProductUpdate) SetCategory(d domain.Category) *RefundOrderProductUpdate {
	ropu.mutation.SetCategory(d)
	return ropu
}

// SetNillableCategory sets the "category" field if the given value is not nil.
func (ropu *RefundOrderProductUpdate) SetNillableCategory(d *domain.Category) *RefundOrderProductUpdate {
	if d != nil {
		ropu.SetCategory(*d)
	}
	return ropu
}

// ClearCategory clears the value of the "category" field.
func (ropu *RefundOrderProductUpdate) ClearCategory() *RefundOrderProductUpdate {
	ropu.mutation.ClearCategory()
	return ropu
}

// SetUnitID sets the "unit_id" field.
func (ropu *RefundOrderProductUpdate) SetUnitID(u uuid.UUID) *RefundOrderProductUpdate {
	ropu.mutation.SetUnitID(u)
	return ropu
}

// SetNillableUnitID sets the "unit_id" field if the given value is not nil.
func (ropu *RefundOrderProductUpdate) SetNillableUnitID(u *uuid.UUID) *RefundOrderProductUpdate {
	if u != nil {
		ropu.SetUnitID(*u)
	}
	return ropu
}

// ClearUnitID clears the value of the "unit_id" field.
func (ropu *RefundOrderProductUpdate) ClearUnitID() *RefundOrderProductUpdate {
	ropu.mutation.ClearUnitID()
	return ropu
}

// SetMainImage sets the "main_image" field.
func (ropu *RefundOrderProductUpdate) SetMainImage(s string) *RefundOrderProductUpdate {
	ropu.mutation.SetMainImage(s)
	return ropu
}

// SetNillableMainImage sets the "main_image" field if the given value is not nil.
func (ropu *RefundOrderProductUpdate) SetNillableMainImage(s *string) *RefundOrderProductUpdate {
	if s != nil {
		ropu.SetMainImage(*s)
	}
	return ropu
}

// SetDescription sets the "description" field.
func (ropu *RefundOrderProductUpdate) SetDescription(s string) *RefundOrderProductUpdate {
	ropu.mutation.SetDescription(s)
	return ropu
}

// SetNillableDescription sets the "description" field if the given value is not nil.
func (ropu *RefundOrderProductUpdate) SetNillableDescription(s *string) *RefundOrderProductUpdate {
	if s != nil {
		ropu.SetDescription(*s)
	}
	return ropu
}

// SetOriginQty sets the "origin_qty" field.
func (ropu *RefundOrderProductUpdate) SetOriginQty(i int) *RefundOrderProductUpdate {
	ropu.mutation.ResetOriginQty()
	ropu.mutation.SetOriginQty(i)
	return ropu
}

// SetNillableOriginQty sets the "origin_qty" field if the given value is not nil.
func (ropu *RefundOrderProductUpdate) SetNillableOriginQty(i *int) *RefundOrderProductUpdate {
	if i != nil {
		ropu.SetOriginQty(*i)
	}
	return ropu
}

// AddOriginQty adds i to the "origin_qty" field.
func (ropu *RefundOrderProductUpdate) AddOriginQty(i int) *RefundOrderProductUpdate {
	ropu.mutation.AddOriginQty(i)
	return ropu
}

// SetOriginPrice sets the "origin_price" field.
func (ropu *RefundOrderProductUpdate) SetOriginPrice(d decimal.Decimal) *RefundOrderProductUpdate {
	ropu.mutation.SetOriginPrice(d)
	return ropu
}

// SetNillableOriginPrice sets the "origin_price" field if the given value is not nil.
func (ropu *RefundOrderProductUpdate) SetNillableOriginPrice(d *decimal.Decimal) *RefundOrderProductUpdate {
	if d != nil {
		ropu.SetOriginPrice(*d)
	}
	return ropu
}

// ClearOriginPrice clears the value of the "origin_price" field.
func (ropu *RefundOrderProductUpdate) ClearOriginPrice() *RefundOrderProductUpdate {
	ropu.mutation.ClearOriginPrice()
	return ropu
}

// SetOriginSubtotal sets the "origin_subtotal" field.
func (ropu *RefundOrderProductUpdate) SetOriginSubtotal(d decimal.Decimal) *RefundOrderProductUpdate {
	ropu.mutation.SetOriginSubtotal(d)
	return ropu
}

// SetNillableOriginSubtotal sets the "origin_subtotal" field if the given value is not nil.
func (ropu *RefundOrderProductUpdate) SetNillableOriginSubtotal(d *decimal.Decimal) *RefundOrderProductUpdate {
	if d != nil {
		ropu.SetOriginSubtotal(*d)
	}
	return ropu
}

// ClearOriginSubtotal clears the value of the "origin_subtotal" field.
func (ropu *RefundOrderProductUpdate) ClearOriginSubtotal() *RefundOrderProductUpdate {
	ropu.mutation.ClearOriginSubtotal()
	return ropu
}

// SetOriginDiscount sets the "origin_discount" field.
func (ropu *RefundOrderProductUpdate) SetOriginDiscount(d decimal.Decimal) *RefundOrderProductUpdate {
	ropu.mutation.SetOriginDiscount(d)
	return ropu
}

// SetNillableOriginDiscount sets the "origin_discount" field if the given value is not nil.
func (ropu *RefundOrderProductUpdate) SetNillableOriginDiscount(d *decimal.Decimal) *RefundOrderProductUpdate {
	if d != nil {
		ropu.SetOriginDiscount(*d)
	}
	return ropu
}

// ClearOriginDiscount clears the value of the "origin_discount" field.
func (ropu *RefundOrderProductUpdate) ClearOriginDiscount() *RefundOrderProductUpdate {
	ropu.mutation.ClearOriginDiscount()
	return ropu
}

// SetOriginTax sets the "origin_tax" field.
func (ropu *RefundOrderProductUpdate) SetOriginTax(d decimal.Decimal) *RefundOrderProductUpdate {
	ropu.mutation.SetOriginTax(d)
	return ropu
}

// SetNillableOriginTax sets the "origin_tax" field if the given value is not nil.
func (ropu *RefundOrderProductUpdate) SetNillableOriginTax(d *decimal.Decimal) *RefundOrderProductUpdate {
	if d != nil {
		ropu.SetOriginTax(*d)
	}
	return ropu
}

// ClearOriginTax clears the value of the "origin_tax" field.
func (ropu *RefundOrderProductUpdate) ClearOriginTax() *RefundOrderProductUpdate {
	ropu.mutation.ClearOriginTax()
	return ropu
}

// SetOriginTotal sets the "origin_total" field.
func (ropu *RefundOrderProductUpdate) SetOriginTotal(d decimal.Decimal) *RefundOrderProductUpdate {
	ropu.mutation.SetOriginTotal(d)
	return ropu
}

// SetNillableOriginTotal sets the "origin_total" field if the given value is not nil.
func (ropu *RefundOrderProductUpdate) SetNillableOriginTotal(d *decimal.Decimal) *RefundOrderProductUpdate {
	if d != nil {
		ropu.SetOriginTotal(*d)
	}
	return ropu
}

// ClearOriginTotal clears the value of the "origin_total" field.
func (ropu *RefundOrderProductUpdate) ClearOriginTotal() *RefundOrderProductUpdate {
	ropu.mutation.ClearOriginTotal()
	return ropu
}

// SetRefundQty sets the "refund_qty" field.
func (ropu *RefundOrderProductUpdate) SetRefundQty(i int) *RefundOrderProductUpdate {
	ropu.mutation.ResetRefundQty()
	ropu.mutation.SetRefundQty(i)
	return ropu
}

// SetNillableRefundQty sets the "refund_qty" field if the given value is not nil.
func (ropu *RefundOrderProductUpdate) SetNillableRefundQty(i *int) *RefundOrderProductUpdate {
	if i != nil {
		ropu.SetRefundQty(*i)
	}
	return ropu
}

// AddRefundQty adds i to the "refund_qty" field.
func (ropu *RefundOrderProductUpdate) AddRefundQty(i int) *RefundOrderProductUpdate {
	ropu.mutation.AddRefundQty(i)
	return ropu
}

// SetRefundSubtotal sets the "refund_subtotal" field.
func (ropu *RefundOrderProductUpdate) SetRefundSubtotal(d decimal.Decimal) *RefundOrderProductUpdate {
	ropu.mutation.SetRefundSubtotal(d)
	return ropu
}

// SetNillableRefundSubtotal sets the "refund_subtotal" field if the given value is not nil.
func (ropu *RefundOrderProductUpdate) SetNillableRefundSubtotal(d *decimal.Decimal) *RefundOrderProductUpdate {
	if d != nil {
		ropu.SetRefundSubtotal(*d)
	}
	return ropu
}

// ClearRefundSubtotal clears the value of the "refund_subtotal" field.
func (ropu *RefundOrderProductUpdate) ClearRefundSubtotal() *RefundOrderProductUpdate {
	ropu.mutation.ClearRefundSubtotal()
	return ropu
}

// SetRefundDiscount sets the "refund_discount" field.
func (ropu *RefundOrderProductUpdate) SetRefundDiscount(d decimal.Decimal) *RefundOrderProductUpdate {
	ropu.mutation.SetRefundDiscount(d)
	return ropu
}

// SetNillableRefundDiscount sets the "refund_discount" field if the given value is not nil.
func (ropu *RefundOrderProductUpdate) SetNillableRefundDiscount(d *decimal.Decimal) *RefundOrderProductUpdate {
	if d != nil {
		ropu.SetRefundDiscount(*d)
	}
	return ropu
}

// ClearRefundDiscount clears the value of the "refund_discount" field.
func (ropu *RefundOrderProductUpdate) ClearRefundDiscount() *RefundOrderProductUpdate {
	ropu.mutation.ClearRefundDiscount()
	return ropu
}

// SetRefundTax sets the "refund_tax" field.
func (ropu *RefundOrderProductUpdate) SetRefundTax(d decimal.Decimal) *RefundOrderProductUpdate {
	ropu.mutation.SetRefundTax(d)
	return ropu
}

// SetNillableRefundTax sets the "refund_tax" field if the given value is not nil.
func (ropu *RefundOrderProductUpdate) SetNillableRefundTax(d *decimal.Decimal) *RefundOrderProductUpdate {
	if d != nil {
		ropu.SetRefundTax(*d)
	}
	return ropu
}

// ClearRefundTax clears the value of the "refund_tax" field.
func (ropu *RefundOrderProductUpdate) ClearRefundTax() *RefundOrderProductUpdate {
	ropu.mutation.ClearRefundTax()
	return ropu
}

// SetRefundTotal sets the "refund_total" field.
func (ropu *RefundOrderProductUpdate) SetRefundTotal(d decimal.Decimal) *RefundOrderProductUpdate {
	ropu.mutation.SetRefundTotal(d)
	return ropu
}

// SetNillableRefundTotal sets the "refund_total" field if the given value is not nil.
func (ropu *RefundOrderProductUpdate) SetNillableRefundTotal(d *decimal.Decimal) *RefundOrderProductUpdate {
	if d != nil {
		ropu.SetRefundTotal(*d)
	}
	return ropu
}

// ClearRefundTotal clears the value of the "refund_total" field.
func (ropu *RefundOrderProductUpdate) ClearRefundTotal() *RefundOrderProductUpdate {
	ropu.mutation.ClearRefundTotal()
	return ropu
}

// SetGroups sets the "groups" field.
func (ropu *RefundOrderProductUpdate) SetGroups(dmg domain.SetMealGroups) *RefundOrderProductUpdate {
	ropu.mutation.SetGroups(dmg)
	return ropu
}

// AppendGroups appends dmg to the "groups" field.
func (ropu *RefundOrderProductUpdate) AppendGroups(dmg domain.SetMealGroups) *RefundOrderProductUpdate {
	ropu.mutation.AppendGroups(dmg)
	return ropu
}

// ClearGroups clears the value of the "groups" field.
func (ropu *RefundOrderProductUpdate) ClearGroups() *RefundOrderProductUpdate {
	ropu.mutation.ClearGroups()
	return ropu
}

// SetSpecRelations sets the "spec_relations" field.
func (ropu *RefundOrderProductUpdate) SetSpecRelations(dsr domain.ProductSpecRelations) *RefundOrderProductUpdate {
	ropu.mutation.SetSpecRelations(dsr)
	return ropu
}

// AppendSpecRelations appends dsr to the "spec_relations" field.
func (ropu *RefundOrderProductUpdate) AppendSpecRelations(dsr domain.ProductSpecRelations) *RefundOrderProductUpdate {
	ropu.mutation.AppendSpecRelations(dsr)
	return ropu
}

// ClearSpecRelations clears the value of the "spec_relations" field.
func (ropu *RefundOrderProductUpdate) ClearSpecRelations() *RefundOrderProductUpdate {
	ropu.mutation.ClearSpecRelations()
	return ropu
}

// SetAttrRelations sets the "attr_relations" field.
func (ropu *RefundOrderProductUpdate) SetAttrRelations(dar domain.ProductAttrRelations) *RefundOrderProductUpdate {
	ropu.mutation.SetAttrRelations(dar)
	return ropu
}

// AppendAttrRelations appends dar to the "attr_relations" field.
func (ropu *RefundOrderProductUpdate) AppendAttrRelations(dar domain.ProductAttrRelations) *RefundOrderProductUpdate {
	ropu.mutation.AppendAttrRelations(dar)
	return ropu
}

// ClearAttrRelations clears the value of the "attr_relations" field.
func (ropu *RefundOrderProductUpdate) ClearAttrRelations() *RefundOrderProductUpdate {
	ropu.mutation.ClearAttrRelations()
	return ropu
}

// SetRefundReason sets the "refund_reason" field.
func (ropu *RefundOrderProductUpdate) SetRefundReason(s string) *RefundOrderProductUpdate {
	ropu.mutation.SetRefundReason(s)
	return ropu
}

// SetNillableRefundReason sets the "refund_reason" field if the given value is not nil.
func (ropu *RefundOrderProductUpdate) SetNillableRefundReason(s *string) *RefundOrderProductUpdate {
	if s != nil {
		ropu.SetRefundReason(*s)
	}
	return ropu
}

// ClearRefundReason clears the value of the "refund_reason" field.
func (ropu *RefundOrderProductUpdate) ClearRefundReason() *RefundOrderProductUpdate {
	ropu.mutation.ClearRefundReason()
	return ropu
}

// SetRefundOrder sets the "refund_order" edge to the RefundOrder entity.
func (ropu *RefundOrderProductUpdate) SetRefundOrder(r *RefundOrder) *RefundOrderProductUpdate {
	return ropu.SetRefundOrderID(r.ID)
}

// Mutation returns the RefundOrderProductMutation object of the builder.
func (ropu *RefundOrderProductUpdate) Mutation() *RefundOrderProductMutation {
	return ropu.mutation
}

// ClearRefundOrder clears the "refund_order" edge to the RefundOrder entity.
func (ropu *RefundOrderProductUpdate) ClearRefundOrder() *RefundOrderProductUpdate {
	ropu.mutation.ClearRefundOrder()
	return ropu
}

// Save executes the query and returns the number of nodes affected by the update operation.
func (ropu *RefundOrderProductUpdate) Save(ctx context.Context) (int, error) {
	if err := ropu.defaults(); err != nil {
		return 0, err
	}
	return withHooks(ctx, ropu.sqlSave, ropu.mutation, ropu.hooks)
}

// SaveX is like Save, but panics if an error occurs.
func (ropu *RefundOrderProductUpdate) SaveX(ctx context.Context) int {
	affected, err := ropu.Save(ctx)
	if err != nil {
		panic(err)
	}
	return affected
}

// Exec executes the query.
func (ropu *RefundOrderProductUpdate) Exec(ctx context.Context) error {
	_, err := ropu.Save(ctx)
	return err
}

// ExecX is like Exec, but panics if an error occurs.
func (ropu *RefundOrderProductUpdate) ExecX(ctx context.Context) {
	if err := ropu.Exec(ctx); err != nil {
		panic(err)
	}
}

// defaults sets the default values of the builder before save.
func (ropu *RefundOrderProductUpdate) defaults() error {
	if _, ok := ropu.mutation.UpdatedAt(); !ok {
		if refundorderproduct.UpdateDefaultUpdatedAt == nil {
			return fmt.Errorf("ent: uninitialized refundorderproduct.UpdateDefaultUpdatedAt (forgotten import ent/runtime?)")
		}
		v := refundorderproduct.UpdateDefaultUpdatedAt()
		ropu.mutation.SetUpdatedAt(v)
	}
	return nil
}

// check runs all checks and user-defined validators on the builder.
func (ropu *RefundOrderProductUpdate) check() error {
	if v, ok := ropu.mutation.ProductName(); ok {
		if err := refundorderproduct.ProductNameValidator(v); err != nil {
			return &ValidationError{Name: "product_name", err: fmt.Errorf(`ent: validator failed for field "RefundOrderProduct.product_name": %w`, err)}
		}
	}
	if v, ok := ropu.mutation.ProductType(); ok {
		if err := refundorderproduct.ProductTypeValidator(v); err != nil {
			return &ValidationError{Name: "product_type", err: fmt.Errorf(`ent: validator failed for field "RefundOrderProduct.product_type": %w`, err)}
		}
	}
	if v, ok := ropu.mutation.MainImage(); ok {
		if err := refundorderproduct.MainImageValidator(v); err != nil {
			return &ValidationError{Name: "main_image", err: fmt.Errorf(`ent: validator failed for field "RefundOrderProduct.main_image": %w`, err)}
		}
	}
	if v, ok := ropu.mutation.Description(); ok {
		if err := refundorderproduct.DescriptionValidator(v); err != nil {
			return &ValidationError{Name: "description", err: fmt.Errorf(`ent: validator failed for field "RefundOrderProduct.description": %w`, err)}
		}
	}
	if ropu.mutation.RefundOrderCleared() && len(ropu.mutation.RefundOrderIDs()) > 0 {
		return errors.New(`ent: clearing a required unique edge "RefundOrderProduct.refund_order"`)
	}
	return nil
}

// Modify adds a statement modifier for attaching custom logic to the UPDATE statement.
func (ropu *RefundOrderProductUpdate) Modify(modifiers ...func(u *sql.UpdateBuilder)) *RefundOrderProductUpdate {
	ropu.modifiers = append(ropu.modifiers, modifiers...)
	return ropu
}

func (ropu *RefundOrderProductUpdate) sqlSave(ctx context.Context) (n int, err error) {
	if err := ropu.check(); err != nil {
		return n, err
	}
	_spec := sqlgraph.NewUpdateSpec(refundorderproduct.Table, refundorderproduct.Columns, sqlgraph.NewFieldSpec(refundorderproduct.FieldID, field.TypeUUID))
	if ps := ropu.mutation.predicates; len(ps) > 0 {
		_spec.Predicate = func(selector *sql.Selector) {
			for i := range ps {
				ps[i](selector)
			}
		}
	}
	if value, ok := ropu.mutation.UpdatedAt(); ok {
		_spec.SetField(refundorderproduct.FieldUpdatedAt, field.TypeTime, value)
	}
	if value, ok := ropu.mutation.DeletedAt(); ok {
		_spec.SetField(refundorderproduct.FieldDeletedAt, field.TypeInt64, value)
	}
	if value, ok := ropu.mutation.AddedDeletedAt(); ok {
		_spec.AddField(refundorderproduct.FieldDeletedAt, field.TypeInt64, value)
	}
	if value, ok := ropu.mutation.OriginOrderProductID(); ok {
		_spec.SetField(refundorderproduct.FieldOriginOrderProductID, field.TypeUUID, value)
	}
	if value, ok := ropu.mutation.OriginOrderItemID(); ok {
		_spec.SetField(refundorderproduct.FieldOriginOrderItemID, field.TypeString, value)
	}
	if ropu.mutation.OriginOrderItemIDCleared() {
		_spec.ClearField(refundorderproduct.FieldOriginOrderItemID, field.TypeString)
	}
	if value, ok := ropu.mutation.ProductID(); ok {
		_spec.SetField(refundorderproduct.FieldProductID, field.TypeUUID, value)
	}
	if value, ok := ropu.mutation.ProductName(); ok {
		_spec.SetField(refundorderproduct.FieldProductName, field.TypeString, value)
	}
	if value, ok := ropu.mutation.ProductType(); ok {
		_spec.SetField(refundorderproduct.FieldProductType, field.TypeEnum, value)
	}
	if value, ok := ropu.mutation.Category(); ok {
		_spec.SetField(refundorderproduct.FieldCategory, field.TypeJSON, value)
	}
	if ropu.mutation.CategoryCleared() {
		_spec.ClearField(refundorderproduct.FieldCategory, field.TypeJSON)
	}
	if value, ok := ropu.mutation.UnitID(); ok {
		_spec.SetField(refundorderproduct.FieldUnitID, field.TypeUUID, value)
	}
	if ropu.mutation.UnitIDCleared() {
		_spec.ClearField(refundorderproduct.FieldUnitID, field.TypeUUID)
	}
	if value, ok := ropu.mutation.MainImage(); ok {
		_spec.SetField(refundorderproduct.FieldMainImage, field.TypeString, value)
	}
	if value, ok := ropu.mutation.Description(); ok {
		_spec.SetField(refundorderproduct.FieldDescription, field.TypeString, value)
	}
	if value, ok := ropu.mutation.OriginQty(); ok {
		_spec.SetField(refundorderproduct.FieldOriginQty, field.TypeInt, value)
	}
	if value, ok := ropu.mutation.AddedOriginQty(); ok {
		_spec.AddField(refundorderproduct.FieldOriginQty, field.TypeInt, value)
	}
	if value, ok := ropu.mutation.OriginPrice(); ok {
		_spec.SetField(refundorderproduct.FieldOriginPrice, field.TypeOther, value)
	}
	if ropu.mutation.OriginPriceCleared() {
		_spec.ClearField(refundorderproduct.FieldOriginPrice, field.TypeOther)
	}
	if value, ok := ropu.mutation.OriginSubtotal(); ok {
		_spec.SetField(refundorderproduct.FieldOriginSubtotal, field.TypeOther, value)
	}
	if ropu.mutation.OriginSubtotalCleared() {
		_spec.ClearField(refundorderproduct.FieldOriginSubtotal, field.TypeOther)
	}
	if value, ok := ropu.mutation.OriginDiscount(); ok {
		_spec.SetField(refundorderproduct.FieldOriginDiscount, field.TypeOther, value)
	}
	if ropu.mutation.OriginDiscountCleared() {
		_spec.ClearField(refundorderproduct.FieldOriginDiscount, field.TypeOther)
	}
	if value, ok := ropu.mutation.OriginTax(); ok {
		_spec.SetField(refundorderproduct.FieldOriginTax, field.TypeOther, value)
	}
	if ropu.mutation.OriginTaxCleared() {
		_spec.ClearField(refundorderproduct.FieldOriginTax, field.TypeOther)
	}
	if value, ok := ropu.mutation.OriginTotal(); ok {
		_spec.SetField(refundorderproduct.FieldOriginTotal, field.TypeOther, value)
	}
	if ropu.mutation.OriginTotalCleared() {
		_spec.ClearField(refundorderproduct.FieldOriginTotal, field.TypeOther)
	}
	if value, ok := ropu.mutation.RefundQty(); ok {
		_spec.SetField(refundorderproduct.FieldRefundQty, field.TypeInt, value)
	}
	if value, ok := ropu.mutation.AddedRefundQty(); ok {
		_spec.AddField(refundorderproduct.FieldRefundQty, field.TypeInt, value)
	}
	if value, ok := ropu.mutation.RefundSubtotal(); ok {
		_spec.SetField(refundorderproduct.FieldRefundSubtotal, field.TypeOther, value)
	}
	if ropu.mutation.RefundSubtotalCleared() {
		_spec.ClearField(refundorderproduct.FieldRefundSubtotal, field.TypeOther)
	}
	if value, ok := ropu.mutation.RefundDiscount(); ok {
		_spec.SetField(refundorderproduct.FieldRefundDiscount, field.TypeOther, value)
	}
	if ropu.mutation.RefundDiscountCleared() {
		_spec.ClearField(refundorderproduct.FieldRefundDiscount, field.TypeOther)
	}
	if value, ok := ropu.mutation.RefundTax(); ok {
		_spec.SetField(refundorderproduct.FieldRefundTax, field.TypeOther, value)
	}
	if ropu.mutation.RefundTaxCleared() {
		_spec.ClearField(refundorderproduct.FieldRefundTax, field.TypeOther)
	}
	if value, ok := ropu.mutation.RefundTotal(); ok {
		_spec.SetField(refundorderproduct.FieldRefundTotal, field.TypeOther, value)
	}
	if ropu.mutation.RefundTotalCleared() {
		_spec.ClearField(refundorderproduct.FieldRefundTotal, field.TypeOther)
	}
	if value, ok := ropu.mutation.Groups(); ok {
		_spec.SetField(refundorderproduct.FieldGroups, field.TypeJSON, value)
	}
	if value, ok := ropu.mutation.AppendedGroups(); ok {
		_spec.AddModifier(func(u *sql.UpdateBuilder) {
			sqljson.Append(u, refundorderproduct.FieldGroups, value)
		})
	}
	if ropu.mutation.GroupsCleared() {
		_spec.ClearField(refundorderproduct.FieldGroups, field.TypeJSON)
	}
	if value, ok := ropu.mutation.SpecRelations(); ok {
		_spec.SetField(refundorderproduct.FieldSpecRelations, field.TypeJSON, value)
	}
	if value, ok := ropu.mutation.AppendedSpecRelations(); ok {
		_spec.AddModifier(func(u *sql.UpdateBuilder) {
			sqljson.Append(u, refundorderproduct.FieldSpecRelations, value)
		})
	}
	if ropu.mutation.SpecRelationsCleared() {
		_spec.ClearField(refundorderproduct.FieldSpecRelations, field.TypeJSON)
	}
	if value, ok := ropu.mutation.AttrRelations(); ok {
		_spec.SetField(refundorderproduct.FieldAttrRelations, field.TypeJSON, value)
	}
	if value, ok := ropu.mutation.AppendedAttrRelations(); ok {
		_spec.AddModifier(func(u *sql.UpdateBuilder) {
			sqljson.Append(u, refundorderproduct.FieldAttrRelations, value)
		})
	}
	if ropu.mutation.AttrRelationsCleared() {
		_spec.ClearField(refundorderproduct.FieldAttrRelations, field.TypeJSON)
	}
	if value, ok := ropu.mutation.RefundReason(); ok {
		_spec.SetField(refundorderproduct.FieldRefundReason, field.TypeString, value)
	}
	if ropu.mutation.RefundReasonCleared() {
		_spec.ClearField(refundorderproduct.FieldRefundReason, field.TypeString)
	}
	if ropu.mutation.RefundOrderCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.M2O,
			Inverse: true,
			Table:   refundorderproduct.RefundOrderTable,
			Columns: []string{refundorderproduct.RefundOrderColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(refundorder.FieldID, field.TypeUUID),
			},
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := ropu.mutation.RefundOrderIDs(); len(nodes) > 0 {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.M2O,
			Inverse: true,
			Table:   refundorderproduct.RefundOrderTable,
			Columns: []string{refundorderproduct.RefundOrderColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(refundorder.FieldID, field.TypeUUID),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Add = append(_spec.Edges.Add, edge)
	}
	_spec.AddModifiers(ropu.modifiers...)
	if n, err = sqlgraph.UpdateNodes(ctx, ropu.driver, _spec); err != nil {
		if _, ok := err.(*sqlgraph.NotFoundError); ok {
			err = &NotFoundError{refundorderproduct.Label}
		} else if sqlgraph.IsConstraintError(err) {
			err = &ConstraintError{msg: err.Error(), wrap: err}
		}
		return 0, err
	}
	ropu.mutation.done = true
	return n, nil
}

// RefundOrderProductUpdateOne is the builder for updating a single RefundOrderProduct entity.
type RefundOrderProductUpdateOne struct {
	config
	fields    []string
	hooks     []Hook
	mutation  *RefundOrderProductMutation
	modifiers []func(*sql.UpdateBuilder)
}

// SetUpdatedAt sets the "updated_at" field.
func (ropuo *RefundOrderProductUpdateOne) SetUpdatedAt(t time.Time) *RefundOrderProductUpdateOne {
	ropuo.mutation.SetUpdatedAt(t)
	return ropuo
}

// SetDeletedAt sets the "deleted_at" field.
func (ropuo *RefundOrderProductUpdateOne) SetDeletedAt(i int64) *RefundOrderProductUpdateOne {
	ropuo.mutation.ResetDeletedAt()
	ropuo.mutation.SetDeletedAt(i)
	return ropuo
}

// SetNillableDeletedAt sets the "deleted_at" field if the given value is not nil.
func (ropuo *RefundOrderProductUpdateOne) SetNillableDeletedAt(i *int64) *RefundOrderProductUpdateOne {
	if i != nil {
		ropuo.SetDeletedAt(*i)
	}
	return ropuo
}

// AddDeletedAt adds i to the "deleted_at" field.
func (ropuo *RefundOrderProductUpdateOne) AddDeletedAt(i int64) *RefundOrderProductUpdateOne {
	ropuo.mutation.AddDeletedAt(i)
	return ropuo
}

// SetRefundOrderID sets the "refund_order_id" field.
func (ropuo *RefundOrderProductUpdateOne) SetRefundOrderID(u uuid.UUID) *RefundOrderProductUpdateOne {
	ropuo.mutation.SetRefundOrderID(u)
	return ropuo
}

// SetNillableRefundOrderID sets the "refund_order_id" field if the given value is not nil.
func (ropuo *RefundOrderProductUpdateOne) SetNillableRefundOrderID(u *uuid.UUID) *RefundOrderProductUpdateOne {
	if u != nil {
		ropuo.SetRefundOrderID(*u)
	}
	return ropuo
}

// SetOriginOrderProductID sets the "origin_order_product_id" field.
func (ropuo *RefundOrderProductUpdateOne) SetOriginOrderProductID(u uuid.UUID) *RefundOrderProductUpdateOne {
	ropuo.mutation.SetOriginOrderProductID(u)
	return ropuo
}

// SetNillableOriginOrderProductID sets the "origin_order_product_id" field if the given value is not nil.
func (ropuo *RefundOrderProductUpdateOne) SetNillableOriginOrderProductID(u *uuid.UUID) *RefundOrderProductUpdateOne {
	if u != nil {
		ropuo.SetOriginOrderProductID(*u)
	}
	return ropuo
}

// SetOriginOrderItemID sets the "origin_order_item_id" field.
func (ropuo *RefundOrderProductUpdateOne) SetOriginOrderItemID(s string) *RefundOrderProductUpdateOne {
	ropuo.mutation.SetOriginOrderItemID(s)
	return ropuo
}

// SetNillableOriginOrderItemID sets the "origin_order_item_id" field if the given value is not nil.
func (ropuo *RefundOrderProductUpdateOne) SetNillableOriginOrderItemID(s *string) *RefundOrderProductUpdateOne {
	if s != nil {
		ropuo.SetOriginOrderItemID(*s)
	}
	return ropuo
}

// ClearOriginOrderItemID clears the value of the "origin_order_item_id" field.
func (ropuo *RefundOrderProductUpdateOne) ClearOriginOrderItemID() *RefundOrderProductUpdateOne {
	ropuo.mutation.ClearOriginOrderItemID()
	return ropuo
}

// SetProductID sets the "product_id" field.
func (ropuo *RefundOrderProductUpdateOne) SetProductID(u uuid.UUID) *RefundOrderProductUpdateOne {
	ropuo.mutation.SetProductID(u)
	return ropuo
}

// SetNillableProductID sets the "product_id" field if the given value is not nil.
func (ropuo *RefundOrderProductUpdateOne) SetNillableProductID(u *uuid.UUID) *RefundOrderProductUpdateOne {
	if u != nil {
		ropuo.SetProductID(*u)
	}
	return ropuo
}

// SetProductName sets the "product_name" field.
func (ropuo *RefundOrderProductUpdateOne) SetProductName(s string) *RefundOrderProductUpdateOne {
	ropuo.mutation.SetProductName(s)
	return ropuo
}

// SetNillableProductName sets the "product_name" field if the given value is not nil.
func (ropuo *RefundOrderProductUpdateOne) SetNillableProductName(s *string) *RefundOrderProductUpdateOne {
	if s != nil {
		ropuo.SetProductName(*s)
	}
	return ropuo
}

// SetProductType sets the "product_type" field.
func (ropuo *RefundOrderProductUpdateOne) SetProductType(dt domain.ProductType) *RefundOrderProductUpdateOne {
	ropuo.mutation.SetProductType(dt)
	return ropuo
}

// SetNillableProductType sets the "product_type" field if the given value is not nil.
func (ropuo *RefundOrderProductUpdateOne) SetNillableProductType(dt *domain.ProductType) *RefundOrderProductUpdateOne {
	if dt != nil {
		ropuo.SetProductType(*dt)
	}
	return ropuo
}

// SetCategory sets the "category" field.
func (ropuo *RefundOrderProductUpdateOne) SetCategory(d domain.Category) *RefundOrderProductUpdateOne {
	ropuo.mutation.SetCategory(d)
	return ropuo
}

// SetNillableCategory sets the "category" field if the given value is not nil.
func (ropuo *RefundOrderProductUpdateOne) SetNillableCategory(d *domain.Category) *RefundOrderProductUpdateOne {
	if d != nil {
		ropuo.SetCategory(*d)
	}
	return ropuo
}

// ClearCategory clears the value of the "category" field.
func (ropuo *RefundOrderProductUpdateOne) ClearCategory() *RefundOrderProductUpdateOne {
	ropuo.mutation.ClearCategory()
	return ropuo
}

// SetUnitID sets the "unit_id" field.
func (ropuo *RefundOrderProductUpdateOne) SetUnitID(u uuid.UUID) *RefundOrderProductUpdateOne {
	ropuo.mutation.SetUnitID(u)
	return ropuo
}

// SetNillableUnitID sets the "unit_id" field if the given value is not nil.
func (ropuo *RefundOrderProductUpdateOne) SetNillableUnitID(u *uuid.UUID) *RefundOrderProductUpdateOne {
	if u != nil {
		ropuo.SetUnitID(*u)
	}
	return ropuo
}

// ClearUnitID clears the value of the "unit_id" field.
func (ropuo *RefundOrderProductUpdateOne) ClearUnitID() *RefundOrderProductUpdateOne {
	ropuo.mutation.ClearUnitID()
	return ropuo
}

// SetMainImage sets the "main_image" field.
func (ropuo *RefundOrderProductUpdateOne) SetMainImage(s string) *RefundOrderProductUpdateOne {
	ropuo.mutation.SetMainImage(s)
	return ropuo
}

// SetNillableMainImage sets the "main_image" field if the given value is not nil.
func (ropuo *RefundOrderProductUpdateOne) SetNillableMainImage(s *string) *RefundOrderProductUpdateOne {
	if s != nil {
		ropuo.SetMainImage(*s)
	}
	return ropuo
}

// SetDescription sets the "description" field.
func (ropuo *RefundOrderProductUpdateOne) SetDescription(s string) *RefundOrderProductUpdateOne {
	ropuo.mutation.SetDescription(s)
	return ropuo
}

// SetNillableDescription sets the "description" field if the given value is not nil.
func (ropuo *RefundOrderProductUpdateOne) SetNillableDescription(s *string) *RefundOrderProductUpdateOne {
	if s != nil {
		ropuo.SetDescription(*s)
	}
	return ropuo
}

// SetOriginQty sets the "origin_qty" field.
func (ropuo *RefundOrderProductUpdateOne) SetOriginQty(i int) *RefundOrderProductUpdateOne {
	ropuo.mutation.ResetOriginQty()
	ropuo.mutation.SetOriginQty(i)
	return ropuo
}

// SetNillableOriginQty sets the "origin_qty" field if the given value is not nil.
func (ropuo *RefundOrderProductUpdateOne) SetNillableOriginQty(i *int) *RefundOrderProductUpdateOne {
	if i != nil {
		ropuo.SetOriginQty(*i)
	}
	return ropuo
}

// AddOriginQty adds i to the "origin_qty" field.
func (ropuo *RefundOrderProductUpdateOne) AddOriginQty(i int) *RefundOrderProductUpdateOne {
	ropuo.mutation.AddOriginQty(i)
	return ropuo
}

// SetOriginPrice sets the "origin_price" field.
func (ropuo *RefundOrderProductUpdateOne) SetOriginPrice(d decimal.Decimal) *RefundOrderProductUpdateOne {
	ropuo.mutation.SetOriginPrice(d)
	return ropuo
}

// SetNillableOriginPrice sets the "origin_price" field if the given value is not nil.
func (ropuo *RefundOrderProductUpdateOne) SetNillableOriginPrice(d *decimal.Decimal) *RefundOrderProductUpdateOne {
	if d != nil {
		ropuo.SetOriginPrice(*d)
	}
	return ropuo
}

// ClearOriginPrice clears the value of the "origin_price" field.
func (ropuo *RefundOrderProductUpdateOne) ClearOriginPrice() *RefundOrderProductUpdateOne {
	ropuo.mutation.ClearOriginPrice()
	return ropuo
}

// SetOriginSubtotal sets the "origin_subtotal" field.
func (ropuo *RefundOrderProductUpdateOne) SetOriginSubtotal(d decimal.Decimal) *RefundOrderProductUpdateOne {
	ropuo.mutation.SetOriginSubtotal(d)
	return ropuo
}

// SetNillableOriginSubtotal sets the "origin_subtotal" field if the given value is not nil.
func (ropuo *RefundOrderProductUpdateOne) SetNillableOriginSubtotal(d *decimal.Decimal) *RefundOrderProductUpdateOne {
	if d != nil {
		ropuo.SetOriginSubtotal(*d)
	}
	return ropuo
}

// ClearOriginSubtotal clears the value of the "origin_subtotal" field.
func (ropuo *RefundOrderProductUpdateOne) ClearOriginSubtotal() *RefundOrderProductUpdateOne {
	ropuo.mutation.ClearOriginSubtotal()
	return ropuo
}

// SetOriginDiscount sets the "origin_discount" field.
func (ropuo *RefundOrderProductUpdateOne) SetOriginDiscount(d decimal.Decimal) *RefundOrderProductUpdateOne {
	ropuo.mutation.SetOriginDiscount(d)
	return ropuo
}

// SetNillableOriginDiscount sets the "origin_discount" field if the given value is not nil.
func (ropuo *RefundOrderProductUpdateOne) SetNillableOriginDiscount(d *decimal.Decimal) *RefundOrderProductUpdateOne {
	if d != nil {
		ropuo.SetOriginDiscount(*d)
	}
	return ropuo
}

// ClearOriginDiscount clears the value of the "origin_discount" field.
func (ropuo *RefundOrderProductUpdateOne) ClearOriginDiscount() *RefundOrderProductUpdateOne {
	ropuo.mutation.ClearOriginDiscount()
	return ropuo
}

// SetOriginTax sets the "origin_tax" field.
func (ropuo *RefundOrderProductUpdateOne) SetOriginTax(d decimal.Decimal) *RefundOrderProductUpdateOne {
	ropuo.mutation.SetOriginTax(d)
	return ropuo
}

// SetNillableOriginTax sets the "origin_tax" field if the given value is not nil.
func (ropuo *RefundOrderProductUpdateOne) SetNillableOriginTax(d *decimal.Decimal) *RefundOrderProductUpdateOne {
	if d != nil {
		ropuo.SetOriginTax(*d)
	}
	return ropuo
}

// ClearOriginTax clears the value of the "origin_tax" field.
func (ropuo *RefundOrderProductUpdateOne) ClearOriginTax() *RefundOrderProductUpdateOne {
	ropuo.mutation.ClearOriginTax()
	return ropuo
}

// SetOriginTotal sets the "origin_total" field.
func (ropuo *RefundOrderProductUpdateOne) SetOriginTotal(d decimal.Decimal) *RefundOrderProductUpdateOne {
	ropuo.mutation.SetOriginTotal(d)
	return ropuo
}

// SetNillableOriginTotal sets the "origin_total" field if the given value is not nil.
func (ropuo *RefundOrderProductUpdateOne) SetNillableOriginTotal(d *decimal.Decimal) *RefundOrderProductUpdateOne {
	if d != nil {
		ropuo.SetOriginTotal(*d)
	}
	return ropuo
}

// ClearOriginTotal clears the value of the "origin_total" field.
func (ropuo *RefundOrderProductUpdateOne) ClearOriginTotal() *RefundOrderProductUpdateOne {
	ropuo.mutation.ClearOriginTotal()
	return ropuo
}

// SetRefundQty sets the "refund_qty" field.
func (ropuo *RefundOrderProductUpdateOne) SetRefundQty(i int) *RefundOrderProductUpdateOne {
	ropuo.mutation.ResetRefundQty()
	ropuo.mutation.SetRefundQty(i)
	return ropuo
}

// SetNillableRefundQty sets the "refund_qty" field if the given value is not nil.
func (ropuo *RefundOrderProductUpdateOne) SetNillableRefundQty(i *int) *RefundOrderProductUpdateOne {
	if i != nil {
		ropuo.SetRefundQty(*i)
	}
	return ropuo
}

// AddRefundQty adds i to the "refund_qty" field.
func (ropuo *RefundOrderProductUpdateOne) AddRefundQty(i int) *RefundOrderProductUpdateOne {
	ropuo.mutation.AddRefundQty(i)
	return ropuo
}

// SetRefundSubtotal sets the "refund_subtotal" field.
func (ropuo *RefundOrderProductUpdateOne) SetRefundSubtotal(d decimal.Decimal) *RefundOrderProductUpdateOne {
	ropuo.mutation.SetRefundSubtotal(d)
	return ropuo
}

// SetNillableRefundSubtotal sets the "refund_subtotal" field if the given value is not nil.
func (ropuo *RefundOrderProductUpdateOne) SetNillableRefundSubtotal(d *decimal.Decimal) *RefundOrderProductUpdateOne {
	if d != nil {
		ropuo.SetRefundSubtotal(*d)
	}
	return ropuo
}

// ClearRefundSubtotal clears the value of the "refund_subtotal" field.
func (ropuo *RefundOrderProductUpdateOne) ClearRefundSubtotal() *RefundOrderProductUpdateOne {
	ropuo.mutation.ClearRefundSubtotal()
	return ropuo
}

// SetRefundDiscount sets the "refund_discount" field.
func (ropuo *RefundOrderProductUpdateOne) SetRefundDiscount(d decimal.Decimal) *RefundOrderProductUpdateOne {
	ropuo.mutation.SetRefundDiscount(d)
	return ropuo
}

// SetNillableRefundDiscount sets the "refund_discount" field if the given value is not nil.
func (ropuo *RefundOrderProductUpdateOne) SetNillableRefundDiscount(d *decimal.Decimal) *RefundOrderProductUpdateOne {
	if d != nil {
		ropuo.SetRefundDiscount(*d)
	}
	return ropuo
}

// ClearRefundDiscount clears the value of the "refund_discount" field.
func (ropuo *RefundOrderProductUpdateOne) ClearRefundDiscount() *RefundOrderProductUpdateOne {
	ropuo.mutation.ClearRefundDiscount()
	return ropuo
}

// SetRefundTax sets the "refund_tax" field.
func (ropuo *RefundOrderProductUpdateOne) SetRefundTax(d decimal.Decimal) *RefundOrderProductUpdateOne {
	ropuo.mutation.SetRefundTax(d)
	return ropuo
}

// SetNillableRefundTax sets the "refund_tax" field if the given value is not nil.
func (ropuo *RefundOrderProductUpdateOne) SetNillableRefundTax(d *decimal.Decimal) *RefundOrderProductUpdateOne {
	if d != nil {
		ropuo.SetRefundTax(*d)
	}
	return ropuo
}

// ClearRefundTax clears the value of the "refund_tax" field.
func (ropuo *RefundOrderProductUpdateOne) ClearRefundTax() *RefundOrderProductUpdateOne {
	ropuo.mutation.ClearRefundTax()
	return ropuo
}

// SetRefundTotal sets the "refund_total" field.
func (ropuo *RefundOrderProductUpdateOne) SetRefundTotal(d decimal.Decimal) *RefundOrderProductUpdateOne {
	ropuo.mutation.SetRefundTotal(d)
	return ropuo
}

// SetNillableRefundTotal sets the "refund_total" field if the given value is not nil.
func (ropuo *RefundOrderProductUpdateOne) SetNillableRefundTotal(d *decimal.Decimal) *RefundOrderProductUpdateOne {
	if d != nil {
		ropuo.SetRefundTotal(*d)
	}
	return ropuo
}

// ClearRefundTotal clears the value of the "refund_total" field.
func (ropuo *RefundOrderProductUpdateOne) ClearRefundTotal() *RefundOrderProductUpdateOne {
	ropuo.mutation.ClearRefundTotal()
	return ropuo
}

// SetGroups sets the "groups" field.
func (ropuo *RefundOrderProductUpdateOne) SetGroups(dmg domain.SetMealGroups) *RefundOrderProductUpdateOne {
	ropuo.mutation.SetGroups(dmg)
	return ropuo
}

// AppendGroups appends dmg to the "groups" field.
func (ropuo *RefundOrderProductUpdateOne) AppendGroups(dmg domain.SetMealGroups) *RefundOrderProductUpdateOne {
	ropuo.mutation.AppendGroups(dmg)
	return ropuo
}

// ClearGroups clears the value of the "groups" field.
func (ropuo *RefundOrderProductUpdateOne) ClearGroups() *RefundOrderProductUpdateOne {
	ropuo.mutation.ClearGroups()
	return ropuo
}

// SetSpecRelations sets the "spec_relations" field.
func (ropuo *RefundOrderProductUpdateOne) SetSpecRelations(dsr domain.ProductSpecRelations) *RefundOrderProductUpdateOne {
	ropuo.mutation.SetSpecRelations(dsr)
	return ropuo
}

// AppendSpecRelations appends dsr to the "spec_relations" field.
func (ropuo *RefundOrderProductUpdateOne) AppendSpecRelations(dsr domain.ProductSpecRelations) *RefundOrderProductUpdateOne {
	ropuo.mutation.AppendSpecRelations(dsr)
	return ropuo
}

// ClearSpecRelations clears the value of the "spec_relations" field.
func (ropuo *RefundOrderProductUpdateOne) ClearSpecRelations() *RefundOrderProductUpdateOne {
	ropuo.mutation.ClearSpecRelations()
	return ropuo
}

// SetAttrRelations sets the "attr_relations" field.
func (ropuo *RefundOrderProductUpdateOne) SetAttrRelations(dar domain.ProductAttrRelations) *RefundOrderProductUpdateOne {
	ropuo.mutation.SetAttrRelations(dar)
	return ropuo
}

// AppendAttrRelations appends dar to the "attr_relations" field.
func (ropuo *RefundOrderProductUpdateOne) AppendAttrRelations(dar domain.ProductAttrRelations) *RefundOrderProductUpdateOne {
	ropuo.mutation.AppendAttrRelations(dar)
	return ropuo
}

// ClearAttrRelations clears the value of the "attr_relations" field.
func (ropuo *RefundOrderProductUpdateOne) ClearAttrRelations() *RefundOrderProductUpdateOne {
	ropuo.mutation.ClearAttrRelations()
	return ropuo
}

// SetRefundReason sets the "refund_reason" field.
func (ropuo *RefundOrderProductUpdateOne) SetRefundReason(s string) *RefundOrderProductUpdateOne {
	ropuo.mutation.SetRefundReason(s)
	return ropuo
}

// SetNillableRefundReason sets the "refund_reason" field if the given value is not nil.
func (ropuo *RefundOrderProductUpdateOne) SetNillableRefundReason(s *string) *RefundOrderProductUpdateOne {
	if s != nil {
		ropuo.SetRefundReason(*s)
	}
	return ropuo
}

// ClearRefundReason clears the value of the "refund_reason" field.
func (ropuo *RefundOrderProductUpdateOne) ClearRefundReason() *RefundOrderProductUpdateOne {
	ropuo.mutation.ClearRefundReason()
	return ropuo
}

// SetRefundOrder sets the "refund_order" edge to the RefundOrder entity.
func (ropuo *RefundOrderProductUpdateOne) SetRefundOrder(r *RefundOrder) *RefundOrderProductUpdateOne {
	return ropuo.SetRefundOrderID(r.ID)
}

// Mutation returns the RefundOrderProductMutation object of the builder.
func (ropuo *RefundOrderProductUpdateOne) Mutation() *RefundOrderProductMutation {
	return ropuo.mutation
}

// ClearRefundOrder clears the "refund_order" edge to the RefundOrder entity.
func (ropuo *RefundOrderProductUpdateOne) ClearRefundOrder() *RefundOrderProductUpdateOne {
	ropuo.mutation.ClearRefundOrder()
	return ropuo
}

// Where appends a list predicates to the RefundOrderProductUpdate builder.
func (ropuo *RefundOrderProductUpdateOne) Where(ps ...predicate.RefundOrderProduct) *RefundOrderProductUpdateOne {
	ropuo.mutation.Where(ps...)
	return ropuo
}

// Select allows selecting one or more fields (columns) of the returned entity.
// The default is selecting all fields defined in the entity schema.
func (ropuo *RefundOrderProductUpdateOne) Select(field string, fields ...string) *RefundOrderProductUpdateOne {
	ropuo.fields = append([]string{field}, fields...)
	return ropuo
}

// Save executes the query and returns the updated RefundOrderProduct entity.
func (ropuo *RefundOrderProductUpdateOne) Save(ctx context.Context) (*RefundOrderProduct, error) {
	if err := ropuo.defaults(); err != nil {
		return nil, err
	}
	return withHooks(ctx, ropuo.sqlSave, ropuo.mutation, ropuo.hooks)
}

// SaveX is like Save, but panics if an error occurs.
func (ropuo *RefundOrderProductUpdateOne) SaveX(ctx context.Context) *RefundOrderProduct {
	node, err := ropuo.Save(ctx)
	if err != nil {
		panic(err)
	}
	return node
}

// Exec executes the query on the entity.
func (ropuo *RefundOrderProductUpdateOne) Exec(ctx context.Context) error {
	_, err := ropuo.Save(ctx)
	return err
}

// ExecX is like Exec, but panics if an error occurs.
func (ropuo *RefundOrderProductUpdateOne) ExecX(ctx context.Context) {
	if err := ropuo.Exec(ctx); err != nil {
		panic(err)
	}
}

// defaults sets the default values of the builder before save.
func (ropuo *RefundOrderProductUpdateOne) defaults() error {
	if _, ok := ropuo.mutation.UpdatedAt(); !ok {
		if refundorderproduct.UpdateDefaultUpdatedAt == nil {
			return fmt.Errorf("ent: uninitialized refundorderproduct.UpdateDefaultUpdatedAt (forgotten import ent/runtime?)")
		}
		v := refundorderproduct.UpdateDefaultUpdatedAt()
		ropuo.mutation.SetUpdatedAt(v)
	}
	return nil
}

// check runs all checks and user-defined validators on the builder.
func (ropuo *RefundOrderProductUpdateOne) check() error {
	if v, ok := ropuo.mutation.ProductName(); ok {
		if err := refundorderproduct.ProductNameValidator(v); err != nil {
			return &ValidationError{Name: "product_name", err: fmt.Errorf(`ent: validator failed for field "RefundOrderProduct.product_name": %w`, err)}
		}
	}
	if v, ok := ropuo.mutation.ProductType(); ok {
		if err := refundorderproduct.ProductTypeValidator(v); err != nil {
			return &ValidationError{Name: "product_type", err: fmt.Errorf(`ent: validator failed for field "RefundOrderProduct.product_type": %w`, err)}
		}
	}
	if v, ok := ropuo.mutation.MainImage(); ok {
		if err := refundorderproduct.MainImageValidator(v); err != nil {
			return &ValidationError{Name: "main_image", err: fmt.Errorf(`ent: validator failed for field "RefundOrderProduct.main_image": %w`, err)}
		}
	}
	if v, ok := ropuo.mutation.Description(); ok {
		if err := refundorderproduct.DescriptionValidator(v); err != nil {
			return &ValidationError{Name: "description", err: fmt.Errorf(`ent: validator failed for field "RefundOrderProduct.description": %w`, err)}
		}
	}
	if ropuo.mutation.RefundOrderCleared() && len(ropuo.mutation.RefundOrderIDs()) > 0 {
		return errors.New(`ent: clearing a required unique edge "RefundOrderProduct.refund_order"`)
	}
	return nil
}

// Modify adds a statement modifier for attaching custom logic to the UPDATE statement.
func (ropuo *RefundOrderProductUpdateOne) Modify(modifiers ...func(u *sql.UpdateBuilder)) *RefundOrderProductUpdateOne {
	ropuo.modifiers = append(ropuo.modifiers, modifiers...)
	return ropuo
}

func (ropuo *RefundOrderProductUpdateOne) sqlSave(ctx context.Context) (_node *RefundOrderProduct, err error) {
	if err := ropuo.check(); err != nil {
		return _node, err
	}
	_spec := sqlgraph.NewUpdateSpec(refundorderproduct.Table, refundorderproduct.Columns, sqlgraph.NewFieldSpec(refundorderproduct.FieldID, field.TypeUUID))
	id, ok := ropuo.mutation.ID()
	if !ok {
		return nil, &ValidationError{Name: "id", err: errors.New(`ent: missing "RefundOrderProduct.id" for update`)}
	}
	_spec.Node.ID.Value = id
	if fields := ropuo.fields; len(fields) > 0 {
		_spec.Node.Columns = make([]string, 0, len(fields))
		_spec.Node.Columns = append(_spec.Node.Columns, refundorderproduct.FieldID)
		for _, f := range fields {
			if !refundorderproduct.ValidColumn(f) {
				return nil, &ValidationError{Name: f, err: fmt.Errorf("ent: invalid field %q for query", f)}
			}
			if f != refundorderproduct.FieldID {
				_spec.Node.Columns = append(_spec.Node.Columns, f)
			}
		}
	}
	if ps := ropuo.mutation.predicates; len(ps) > 0 {
		_spec.Predicate = func(selector *sql.Selector) {
			for i := range ps {
				ps[i](selector)
			}
		}
	}
	if value, ok := ropuo.mutation.UpdatedAt(); ok {
		_spec.SetField(refundorderproduct.FieldUpdatedAt, field.TypeTime, value)
	}
	if value, ok := ropuo.mutation.DeletedAt(); ok {
		_spec.SetField(refundorderproduct.FieldDeletedAt, field.TypeInt64, value)
	}
	if value, ok := ropuo.mutation.AddedDeletedAt(); ok {
		_spec.AddField(refundorderproduct.FieldDeletedAt, field.TypeInt64, value)
	}
	if value, ok := ropuo.mutation.OriginOrderProductID(); ok {
		_spec.SetField(refundorderproduct.FieldOriginOrderProductID, field.TypeUUID, value)
	}
	if value, ok := ropuo.mutation.OriginOrderItemID(); ok {
		_spec.SetField(refundorderproduct.FieldOriginOrderItemID, field.TypeString, value)
	}
	if ropuo.mutation.OriginOrderItemIDCleared() {
		_spec.ClearField(refundorderproduct.FieldOriginOrderItemID, field.TypeString)
	}
	if value, ok := ropuo.mutation.ProductID(); ok {
		_spec.SetField(refundorderproduct.FieldProductID, field.TypeUUID, value)
	}
	if value, ok := ropuo.mutation.ProductName(); ok {
		_spec.SetField(refundorderproduct.FieldProductName, field.TypeString, value)
	}
	if value, ok := ropuo.mutation.ProductType(); ok {
		_spec.SetField(refundorderproduct.FieldProductType, field.TypeEnum, value)
	}
	if value, ok := ropuo.mutation.Category(); ok {
		_spec.SetField(refundorderproduct.FieldCategory, field.TypeJSON, value)
	}
	if ropuo.mutation.CategoryCleared() {
		_spec.ClearField(refundorderproduct.FieldCategory, field.TypeJSON)
	}
	if value, ok := ropuo.mutation.UnitID(); ok {
		_spec.SetField(refundorderproduct.FieldUnitID, field.TypeUUID, value)
	}
	if ropuo.mutation.UnitIDCleared() {
		_spec.ClearField(refundorderproduct.FieldUnitID, field.TypeUUID)
	}
	if value, ok := ropuo.mutation.MainImage(); ok {
		_spec.SetField(refundorderproduct.FieldMainImage, field.TypeString, value)
	}
	if value, ok := ropuo.mutation.Description(); ok {
		_spec.SetField(refundorderproduct.FieldDescription, field.TypeString, value)
	}
	if value, ok := ropuo.mutation.OriginQty(); ok {
		_spec.SetField(refundorderproduct.FieldOriginQty, field.TypeInt, value)
	}
	if value, ok := ropuo.mutation.AddedOriginQty(); ok {
		_spec.AddField(refundorderproduct.FieldOriginQty, field.TypeInt, value)
	}
	if value, ok := ropuo.mutation.OriginPrice(); ok {
		_spec.SetField(refundorderproduct.FieldOriginPrice, field.TypeOther, value)
	}
	if ropuo.mutation.OriginPriceCleared() {
		_spec.ClearField(refundorderproduct.FieldOriginPrice, field.TypeOther)
	}
	if value, ok := ropuo.mutation.OriginSubtotal(); ok {
		_spec.SetField(refundorderproduct.FieldOriginSubtotal, field.TypeOther, value)
	}
	if ropuo.mutation.OriginSubtotalCleared() {
		_spec.ClearField(refundorderproduct.FieldOriginSubtotal, field.TypeOther)
	}
	if value, ok := ropuo.mutation.OriginDiscount(); ok {
		_spec.SetField(refundorderproduct.FieldOriginDiscount, field.TypeOther, value)
	}
	if ropuo.mutation.OriginDiscountCleared() {
		_spec.ClearField(refundorderproduct.FieldOriginDiscount, field.TypeOther)
	}
	if value, ok := ropuo.mutation.OriginTax(); ok {
		_spec.SetField(refundorderproduct.FieldOriginTax, field.TypeOther, value)
	}
	if ropuo.mutation.OriginTaxCleared() {
		_spec.ClearField(refundorderproduct.FieldOriginTax, field.TypeOther)
	}
	if value, ok := ropuo.mutation.OriginTotal(); ok {
		_spec.SetField(refundorderproduct.FieldOriginTotal, field.TypeOther, value)
	}
	if ropuo.mutation.OriginTotalCleared() {
		_spec.ClearField(refundorderproduct.FieldOriginTotal, field.TypeOther)
	}
	if value, ok := ropuo.mutation.RefundQty(); ok {
		_spec.SetField(refundorderproduct.FieldRefundQty, field.TypeInt, value)
	}
	if value, ok := ropuo.mutation.AddedRefundQty(); ok {
		_spec.AddField(refundorderproduct.FieldRefundQty, field.TypeInt, value)
	}
	if value, ok := ropuo.mutation.RefundSubtotal(); ok {
		_spec.SetField(refundorderproduct.FieldRefundSubtotal, field.TypeOther, value)
	}
	if ropuo.mutation.RefundSubtotalCleared() {
		_spec.ClearField(refundorderproduct.FieldRefundSubtotal, field.TypeOther)
	}
	if value, ok := ropuo.mutation.RefundDiscount(); ok {
		_spec.SetField(refundorderproduct.FieldRefundDiscount, field.TypeOther, value)
	}
	if ropuo.mutation.RefundDiscountCleared() {
		_spec.ClearField(refundorderproduct.FieldRefundDiscount, field.TypeOther)
	}
	if value, ok := ropuo.mutation.RefundTax(); ok {
		_spec.SetField(refundorderproduct.FieldRefundTax, field.TypeOther, value)
	}
	if ropuo.mutation.RefundTaxCleared() {
		_spec.ClearField(refundorderproduct.FieldRefundTax, field.TypeOther)
	}
	if value, ok := ropuo.mutation.RefundTotal(); ok {
		_spec.SetField(refundorderproduct.FieldRefundTotal, field.TypeOther, value)
	}
	if ropuo.mutation.RefundTotalCleared() {
		_spec.ClearField(refundorderproduct.FieldRefundTotal, field.TypeOther)
	}
	if value, ok := ropuo.mutation.Groups(); ok {
		_spec.SetField(refundorderproduct.FieldGroups, field.TypeJSON, value)
	}
	if value, ok := ropuo.mutation.AppendedGroups(); ok {
		_spec.AddModifier(func(u *sql.UpdateBuilder) {
			sqljson.Append(u, refundorderproduct.FieldGroups, value)
		})
	}
	if ropuo.mutation.GroupsCleared() {
		_spec.ClearField(refundorderproduct.FieldGroups, field.TypeJSON)
	}
	if value, ok := ropuo.mutation.SpecRelations(); ok {
		_spec.SetField(refundorderproduct.FieldSpecRelations, field.TypeJSON, value)
	}
	if value, ok := ropuo.mutation.AppendedSpecRelations(); ok {
		_spec.AddModifier(func(u *sql.UpdateBuilder) {
			sqljson.Append(u, refundorderproduct.FieldSpecRelations, value)
		})
	}
	if ropuo.mutation.SpecRelationsCleared() {
		_spec.ClearField(refundorderproduct.FieldSpecRelations, field.TypeJSON)
	}
	if value, ok := ropuo.mutation.AttrRelations(); ok {
		_spec.SetField(refundorderproduct.FieldAttrRelations, field.TypeJSON, value)
	}
	if value, ok := ropuo.mutation.AppendedAttrRelations(); ok {
		_spec.AddModifier(func(u *sql.UpdateBuilder) {
			sqljson.Append(u, refundorderproduct.FieldAttrRelations, value)
		})
	}
	if ropuo.mutation.AttrRelationsCleared() {
		_spec.ClearField(refundorderproduct.FieldAttrRelations, field.TypeJSON)
	}
	if value, ok := ropuo.mutation.RefundReason(); ok {
		_spec.SetField(refundorderproduct.FieldRefundReason, field.TypeString, value)
	}
	if ropuo.mutation.RefundReasonCleared() {
		_spec.ClearField(refundorderproduct.FieldRefundReason, field.TypeString)
	}
	if ropuo.mutation.RefundOrderCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.M2O,
			Inverse: true,
			Table:   refundorderproduct.RefundOrderTable,
			Columns: []string{refundorderproduct.RefundOrderColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(refundorder.FieldID, field.TypeUUID),
			},
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := ropuo.mutation.RefundOrderIDs(); len(nodes) > 0 {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.M2O,
			Inverse: true,
			Table:   refundorderproduct.RefundOrderTable,
			Columns: []string{refundorderproduct.RefundOrderColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(refundorder.FieldID, field.TypeUUID),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Add = append(_spec.Edges.Add, edge)
	}
	_spec.AddModifiers(ropuo.modifiers...)
	_node = &RefundOrderProduct{config: ropuo.config}
	_spec.Assign = _node.assignValues
	_spec.ScanValues = _node.scanValues
	if err = sqlgraph.UpdateNode(ctx, ropuo.driver, _spec); err != nil {
		if _, ok := err.(*sqlgraph.NotFoundError); ok {
			err = &NotFoundError{refundorderproduct.Label}
		} else if sqlgraph.IsConstraintError(err) {
			err = &ConstraintError{msg: err.Error(), wrap: err}
		}
		return nil, err
	}
	ropuo.mutation.done = true
	return _node, nil
}
