// Code generated by ent, DO NOT EDIT.

package ent

import (
	"encoding/json"
	"fmt"
	"strings"
	"time"

	"entgo.io/ent"
	"entgo.io/ent/dialect/sql"
	"github.com/google/uuid"
	"github.com/shopspring/decimal"
	"gitlab.jiguang.dev/pos-dine/dine/domain"
	"gitlab.jiguang.dev/pos-dine/dine/ent/order"
	"gitlab.jiguang.dev/pos-dine/dine/ent/orderproduct"
)

// OrderProduct is the model entity for the OrderProduct schema.
type OrderProduct struct {
	config `json:"-"`
	// ID of the ent.
	// UUID as primary key
	ID uuid.UUID `json:"id,omitempty"`
	// CreatedAt holds the value of the "created_at" field.
	CreatedAt time.Time `json:"created_at,omitempty"`
	// UpdatedAt holds the value of the "updated_at" field.
	UpdatedAt time.Time `json:"updated_at,omitempty"`
	// 删除时间
	DeletedAt int64 `json:"deleted_at,omitempty"`
	// 所属订单ID
	OrderID uuid.UUID `json:"order_id,omitempty"`
	// 订单内明细ID
	OrderItemID string `json:"order_item_id,omitempty"`
	// 下单序号（同订单内第几次下单）
	Index int `json:"index,omitempty"`
	// 商品ID
	ProductID uuid.UUID `json:"product_id,omitempty"`
	// 商品名称
	ProductName string `json:"product_name,omitempty"`
	// 商品类型：normal（普通商品）、set_meal（套餐商品）
	ProductType domain.ProductType `json:"product_type,omitempty"`
	// 分类信息
	Category domain.Category `json:"category,omitempty"`
	// 商品单位信息
	ProductUnit domain.ProductUnit `json:"product_unit,omitempty"`
	// 商品主图
	MainImage string `json:"main_image,omitempty"`
	// 菜品描述
	Description string `json:"description,omitempty"`
	// 是否赠送
	IsGift bool `json:"is_gift,omitempty"`
	// 数量
	Qty int `json:"qty,omitempty"`
	// 赠送数量
	GiftQty int `json:"gift_qty,omitempty"`
	// 小计
	Subtotal *decimal.Decimal `json:"subtotal,omitempty"`
	// 优惠金额
	DiscountAmount *decimal.Decimal `json:"discount_amount,omitempty"`
	// 税前金额
	AmountBeforeTax *decimal.Decimal `json:"amount_before_tax,omitempty"`
	// 税率（百分比，如 6.00 表示 6%）
	TaxRate *decimal.Decimal `json:"tax_rate,omitempty"`
	// 税额
	Tax *decimal.Decimal `json:"tax,omitempty"`
	// 税后金额
	AmountAfterTax *decimal.Decimal `json:"amount_after_tax,omitempty"`
	// 合计
	Total *decimal.Decimal `json:"total,omitempty"`
	// 促销优惠金额
	PromotionDiscount *decimal.Decimal `json:"promotion_discount,omitempty"`
	// 做法金额
	AttrAmount *decimal.Decimal `json:"attr_amount,omitempty"`
	// 赠送金额
	GiftAmount *decimal.Decimal `json:"gift_amount,omitempty"`
	// 已退菜数量汇总
	VoidQty int `json:"void_qty,omitempty"`
	// 已退菜金额汇总
	VoidAmount *decimal.Decimal `json:"void_amount,omitempty"`
	// 退菜原因
	RefundReason string `json:"refund_reason,omitempty"`
	// 退菜操作人
	RefundedBy uuid.UUID `json:"refunded_by,omitempty"`
	// 退菜时间
	RefundedAt *time.Time `json:"refunded_at,omitempty"`
	// 备注
	Note string `json:"note,omitempty"`
	// 商品价格
	Price *decimal.Decimal `json:"price,omitempty"`
	// 套餐组信息（包含套餐组名称、选择类型、详情列表等）
	Groups domain.SetMealGroups `json:"groups,omitempty"`
	// 商品规格关联信息（规格名称、价格、库存等）
	SpecRelations domain.ProductSpecRelations `json:"spec_relations,omitempty"`
	// 商品口味做法关联信息（口味名称、加价等）
	AttrRelations domain.ProductAttrRelations `json:"attr_relations,omitempty"`
	// Edges holds the relations/edges for other nodes in the graph.
	// The values are being populated by the OrderProductQuery when eager-loading is set.
	Edges        OrderProductEdges `json:"edges"`
	selectValues sql.SelectValues
}

// OrderProductEdges holds the relations/edges for other nodes in the graph.
type OrderProductEdges struct {
	// 所属订单
	Order *Order `json:"order,omitempty"`
	// loadedTypes holds the information for reporting if a
	// type was loaded (or requested) in eager-loading or not.
	loadedTypes [1]bool
}

// OrderOrErr returns the Order value or an error if the edge
// was not loaded in eager-loading, or loaded but was not found.
func (e OrderProductEdges) OrderOrErr() (*Order, error) {
	if e.Order != nil {
		return e.Order, nil
	} else if e.loadedTypes[0] {
		return nil, &NotFoundError{label: order.Label}
	}
	return nil, &NotLoadedError{edge: "order"}
}

// scanValues returns the types for scanning values from sql.Rows.
func (*OrderProduct) scanValues(columns []string) ([]any, error) {
	values := make([]any, len(columns))
	for i := range columns {
		switch columns[i] {
		case orderproduct.FieldSubtotal, orderproduct.FieldDiscountAmount, orderproduct.FieldAmountBeforeTax, orderproduct.FieldTaxRate, orderproduct.FieldTax, orderproduct.FieldAmountAfterTax, orderproduct.FieldTotal, orderproduct.FieldPromotionDiscount, orderproduct.FieldAttrAmount, orderproduct.FieldGiftAmount, orderproduct.FieldVoidAmount, orderproduct.FieldPrice:
			values[i] = &sql.NullScanner{S: new(decimal.Decimal)}
		case orderproduct.FieldCategory, orderproduct.FieldProductUnit, orderproduct.FieldGroups, orderproduct.FieldSpecRelations, orderproduct.FieldAttrRelations:
			values[i] = new([]byte)
		case orderproduct.FieldIsGift:
			values[i] = new(sql.NullBool)
		case orderproduct.FieldDeletedAt, orderproduct.FieldIndex, orderproduct.FieldQty, orderproduct.FieldGiftQty, orderproduct.FieldVoidQty:
			values[i] = new(sql.NullInt64)
		case orderproduct.FieldOrderItemID, orderproduct.FieldProductName, orderproduct.FieldProductType, orderproduct.FieldMainImage, orderproduct.FieldDescription, orderproduct.FieldRefundReason, orderproduct.FieldNote:
			values[i] = new(sql.NullString)
		case orderproduct.FieldCreatedAt, orderproduct.FieldUpdatedAt, orderproduct.FieldRefundedAt:
			values[i] = new(sql.NullTime)
		case orderproduct.FieldID, orderproduct.FieldOrderID, orderproduct.FieldProductID, orderproduct.FieldRefundedBy:
			values[i] = new(uuid.UUID)
		default:
			values[i] = new(sql.UnknownType)
		}
	}
	return values, nil
}

// assignValues assigns the values that were returned from sql.Rows (after scanning)
// to the OrderProduct fields.
func (op *OrderProduct) assignValues(columns []string, values []any) error {
	if m, n := len(values), len(columns); m < n {
		return fmt.Errorf("mismatch number of scan values: %d != %d", m, n)
	}
	for i := range columns {
		switch columns[i] {
		case orderproduct.FieldID:
			if value, ok := values[i].(*uuid.UUID); !ok {
				return fmt.Errorf("unexpected type %T for field id", values[i])
			} else if value != nil {
				op.ID = *value
			}
		case orderproduct.FieldCreatedAt:
			if value, ok := values[i].(*sql.NullTime); !ok {
				return fmt.Errorf("unexpected type %T for field created_at", values[i])
			} else if value.Valid {
				op.CreatedAt = value.Time
			}
		case orderproduct.FieldUpdatedAt:
			if value, ok := values[i].(*sql.NullTime); !ok {
				return fmt.Errorf("unexpected type %T for field updated_at", values[i])
			} else if value.Valid {
				op.UpdatedAt = value.Time
			}
		case orderproduct.FieldDeletedAt:
			if value, ok := values[i].(*sql.NullInt64); !ok {
				return fmt.Errorf("unexpected type %T for field deleted_at", values[i])
			} else if value.Valid {
				op.DeletedAt = value.Int64
			}
		case orderproduct.FieldOrderID:
			if value, ok := values[i].(*uuid.UUID); !ok {
				return fmt.Errorf("unexpected type %T for field order_id", values[i])
			} else if value != nil {
				op.OrderID = *value
			}
		case orderproduct.FieldOrderItemID:
			if value, ok := values[i].(*sql.NullString); !ok {
				return fmt.Errorf("unexpected type %T for field order_item_id", values[i])
			} else if value.Valid {
				op.OrderItemID = value.String
			}
		case orderproduct.FieldIndex:
			if value, ok := values[i].(*sql.NullInt64); !ok {
				return fmt.Errorf("unexpected type %T for field index", values[i])
			} else if value.Valid {
				op.Index = int(value.Int64)
			}
		case orderproduct.FieldProductID:
			if value, ok := values[i].(*uuid.UUID); !ok {
				return fmt.Errorf("unexpected type %T for field product_id", values[i])
			} else if value != nil {
				op.ProductID = *value
			}
		case orderproduct.FieldProductName:
			if value, ok := values[i].(*sql.NullString); !ok {
				return fmt.Errorf("unexpected type %T for field product_name", values[i])
			} else if value.Valid {
				op.ProductName = value.String
			}
		case orderproduct.FieldProductType:
			if value, ok := values[i].(*sql.NullString); !ok {
				return fmt.Errorf("unexpected type %T for field product_type", values[i])
			} else if value.Valid {
				op.ProductType = domain.ProductType(value.String)
			}
		case orderproduct.FieldCategory:
			if value, ok := values[i].(*[]byte); !ok {
				return fmt.Errorf("unexpected type %T for field category", values[i])
			} else if value != nil && len(*value) > 0 {
				if err := json.Unmarshal(*value, &op.Category); err != nil {
					return fmt.Errorf("unmarshal field category: %w", err)
				}
			}
		case orderproduct.FieldProductUnit:
			if value, ok := values[i].(*[]byte); !ok {
				return fmt.Errorf("unexpected type %T for field product_unit", values[i])
			} else if value != nil && len(*value) > 0 {
				if err := json.Unmarshal(*value, &op.ProductUnit); err != nil {
					return fmt.Errorf("unmarshal field product_unit: %w", err)
				}
			}
		case orderproduct.FieldMainImage:
			if value, ok := values[i].(*sql.NullString); !ok {
				return fmt.Errorf("unexpected type %T for field main_image", values[i])
			} else if value.Valid {
				op.MainImage = value.String
			}
		case orderproduct.FieldDescription:
			if value, ok := values[i].(*sql.NullString); !ok {
				return fmt.Errorf("unexpected type %T for field description", values[i])
			} else if value.Valid {
				op.Description = value.String
			}
		case orderproduct.FieldIsGift:
			if value, ok := values[i].(*sql.NullBool); !ok {
				return fmt.Errorf("unexpected type %T for field is_gift", values[i])
			} else if value.Valid {
				op.IsGift = value.Bool
			}
		case orderproduct.FieldQty:
			if value, ok := values[i].(*sql.NullInt64); !ok {
				return fmt.Errorf("unexpected type %T for field qty", values[i])
			} else if value.Valid {
				op.Qty = int(value.Int64)
			}
		case orderproduct.FieldGiftQty:
			if value, ok := values[i].(*sql.NullInt64); !ok {
				return fmt.Errorf("unexpected type %T for field gift_qty", values[i])
			} else if value.Valid {
				op.GiftQty = int(value.Int64)
			}
		case orderproduct.FieldSubtotal:
			if value, ok := values[i].(*sql.NullScanner); !ok {
				return fmt.Errorf("unexpected type %T for field subtotal", values[i])
			} else if value.Valid {
				op.Subtotal = new(decimal.Decimal)
				*op.Subtotal = *value.S.(*decimal.Decimal)
			}
		case orderproduct.FieldDiscountAmount:
			if value, ok := values[i].(*sql.NullScanner); !ok {
				return fmt.Errorf("unexpected type %T for field discount_amount", values[i])
			} else if value.Valid {
				op.DiscountAmount = new(decimal.Decimal)
				*op.DiscountAmount = *value.S.(*decimal.Decimal)
			}
		case orderproduct.FieldAmountBeforeTax:
			if value, ok := values[i].(*sql.NullScanner); !ok {
				return fmt.Errorf("unexpected type %T for field amount_before_tax", values[i])
			} else if value.Valid {
				op.AmountBeforeTax = new(decimal.Decimal)
				*op.AmountBeforeTax = *value.S.(*decimal.Decimal)
			}
		case orderproduct.FieldTaxRate:
			if value, ok := values[i].(*sql.NullScanner); !ok {
				return fmt.Errorf("unexpected type %T for field tax_rate", values[i])
			} else if value.Valid {
				op.TaxRate = new(decimal.Decimal)
				*op.TaxRate = *value.S.(*decimal.Decimal)
			}
		case orderproduct.FieldTax:
			if value, ok := values[i].(*sql.NullScanner); !ok {
				return fmt.Errorf("unexpected type %T for field tax", values[i])
			} else if value.Valid {
				op.Tax = new(decimal.Decimal)
				*op.Tax = *value.S.(*decimal.Decimal)
			}
		case orderproduct.FieldAmountAfterTax:
			if value, ok := values[i].(*sql.NullScanner); !ok {
				return fmt.Errorf("unexpected type %T for field amount_after_tax", values[i])
			} else if value.Valid {
				op.AmountAfterTax = new(decimal.Decimal)
				*op.AmountAfterTax = *value.S.(*decimal.Decimal)
			}
		case orderproduct.FieldTotal:
			if value, ok := values[i].(*sql.NullScanner); !ok {
				return fmt.Errorf("unexpected type %T for field total", values[i])
			} else if value.Valid {
				op.Total = new(decimal.Decimal)
				*op.Total = *value.S.(*decimal.Decimal)
			}
		case orderproduct.FieldPromotionDiscount:
			if value, ok := values[i].(*sql.NullScanner); !ok {
				return fmt.Errorf("unexpected type %T for field promotion_discount", values[i])
			} else if value.Valid {
				op.PromotionDiscount = new(decimal.Decimal)
				*op.PromotionDiscount = *value.S.(*decimal.Decimal)
			}
		case orderproduct.FieldAttrAmount:
			if value, ok := values[i].(*sql.NullScanner); !ok {
				return fmt.Errorf("unexpected type %T for field attr_amount", values[i])
			} else if value.Valid {
				op.AttrAmount = new(decimal.Decimal)
				*op.AttrAmount = *value.S.(*decimal.Decimal)
			}
		case orderproduct.FieldGiftAmount:
			if value, ok := values[i].(*sql.NullScanner); !ok {
				return fmt.Errorf("unexpected type %T for field gift_amount", values[i])
			} else if value.Valid {
				op.GiftAmount = new(decimal.Decimal)
				*op.GiftAmount = *value.S.(*decimal.Decimal)
			}
		case orderproduct.FieldVoidQty:
			if value, ok := values[i].(*sql.NullInt64); !ok {
				return fmt.Errorf("unexpected type %T for field void_qty", values[i])
			} else if value.Valid {
				op.VoidQty = int(value.Int64)
			}
		case orderproduct.FieldVoidAmount:
			if value, ok := values[i].(*sql.NullScanner); !ok {
				return fmt.Errorf("unexpected type %T for field void_amount", values[i])
			} else if value.Valid {
				op.VoidAmount = new(decimal.Decimal)
				*op.VoidAmount = *value.S.(*decimal.Decimal)
			}
		case orderproduct.FieldRefundReason:
			if value, ok := values[i].(*sql.NullString); !ok {
				return fmt.Errorf("unexpected type %T for field refund_reason", values[i])
			} else if value.Valid {
				op.RefundReason = value.String
			}
		case orderproduct.FieldRefundedBy:
			if value, ok := values[i].(*uuid.UUID); !ok {
				return fmt.Errorf("unexpected type %T for field refunded_by", values[i])
			} else if value != nil {
				op.RefundedBy = *value
			}
		case orderproduct.FieldRefundedAt:
			if value, ok := values[i].(*sql.NullTime); !ok {
				return fmt.Errorf("unexpected type %T for field refunded_at", values[i])
			} else if value.Valid {
				op.RefundedAt = new(time.Time)
				*op.RefundedAt = value.Time
			}
		case orderproduct.FieldNote:
			if value, ok := values[i].(*sql.NullString); !ok {
				return fmt.Errorf("unexpected type %T for field note", values[i])
			} else if value.Valid {
				op.Note = value.String
			}
		case orderproduct.FieldPrice:
			if value, ok := values[i].(*sql.NullScanner); !ok {
				return fmt.Errorf("unexpected type %T for field price", values[i])
			} else if value.Valid {
				op.Price = new(decimal.Decimal)
				*op.Price = *value.S.(*decimal.Decimal)
			}
		case orderproduct.FieldGroups:
			if value, ok := values[i].(*[]byte); !ok {
				return fmt.Errorf("unexpected type %T for field groups", values[i])
			} else if value != nil && len(*value) > 0 {
				if err := json.Unmarshal(*value, &op.Groups); err != nil {
					return fmt.Errorf("unmarshal field groups: %w", err)
				}
			}
		case orderproduct.FieldSpecRelations:
			if value, ok := values[i].(*[]byte); !ok {
				return fmt.Errorf("unexpected type %T for field spec_relations", values[i])
			} else if value != nil && len(*value) > 0 {
				if err := json.Unmarshal(*value, &op.SpecRelations); err != nil {
					return fmt.Errorf("unmarshal field spec_relations: %w", err)
				}
			}
		case orderproduct.FieldAttrRelations:
			if value, ok := values[i].(*[]byte); !ok {
				return fmt.Errorf("unexpected type %T for field attr_relations", values[i])
			} else if value != nil && len(*value) > 0 {
				if err := json.Unmarshal(*value, &op.AttrRelations); err != nil {
					return fmt.Errorf("unmarshal field attr_relations: %w", err)
				}
			}
		default:
			op.selectValues.Set(columns[i], values[i])
		}
	}
	return nil
}

// Value returns the ent.Value that was dynamically selected and assigned to the OrderProduct.
// This includes values selected through modifiers, order, etc.
func (op *OrderProduct) Value(name string) (ent.Value, error) {
	return op.selectValues.Get(name)
}

// QueryOrder queries the "order" edge of the OrderProduct entity.
func (op *OrderProduct) QueryOrder() *OrderQuery {
	return NewOrderProductClient(op.config).QueryOrder(op)
}

// Update returns a builder for updating this OrderProduct.
// Note that you need to call OrderProduct.Unwrap() before calling this method if this OrderProduct
// was returned from a transaction, and the transaction was committed or rolled back.
func (op *OrderProduct) Update() *OrderProductUpdateOne {
	return NewOrderProductClient(op.config).UpdateOne(op)
}

// Unwrap unwraps the OrderProduct entity that was returned from a transaction after it was closed,
// so that all future queries will be executed through the driver which created the transaction.
func (op *OrderProduct) Unwrap() *OrderProduct {
	_tx, ok := op.config.driver.(*txDriver)
	if !ok {
		panic("ent: OrderProduct is not a transactional entity")
	}
	op.config.driver = _tx.drv
	return op
}

// String implements the fmt.Stringer.
func (op *OrderProduct) String() string {
	var builder strings.Builder
	builder.WriteString("OrderProduct(")
	builder.WriteString(fmt.Sprintf("id=%v, ", op.ID))
	builder.WriteString("created_at=")
	builder.WriteString(op.CreatedAt.Format(time.ANSIC))
	builder.WriteString(", ")
	builder.WriteString("updated_at=")
	builder.WriteString(op.UpdatedAt.Format(time.ANSIC))
	builder.WriteString(", ")
	builder.WriteString("deleted_at=")
	builder.WriteString(fmt.Sprintf("%v", op.DeletedAt))
	builder.WriteString(", ")
	builder.WriteString("order_id=")
	builder.WriteString(fmt.Sprintf("%v", op.OrderID))
	builder.WriteString(", ")
	builder.WriteString("order_item_id=")
	builder.WriteString(op.OrderItemID)
	builder.WriteString(", ")
	builder.WriteString("index=")
	builder.WriteString(fmt.Sprintf("%v", op.Index))
	builder.WriteString(", ")
	builder.WriteString("product_id=")
	builder.WriteString(fmt.Sprintf("%v", op.ProductID))
	builder.WriteString(", ")
	builder.WriteString("product_name=")
	builder.WriteString(op.ProductName)
	builder.WriteString(", ")
	builder.WriteString("product_type=")
	builder.WriteString(fmt.Sprintf("%v", op.ProductType))
	builder.WriteString(", ")
	builder.WriteString("category=")
	builder.WriteString(fmt.Sprintf("%v", op.Category))
	builder.WriteString(", ")
	builder.WriteString("product_unit=")
	builder.WriteString(fmt.Sprintf("%v", op.ProductUnit))
	builder.WriteString(", ")
	builder.WriteString("main_image=")
	builder.WriteString(op.MainImage)
	builder.WriteString(", ")
	builder.WriteString("description=")
	builder.WriteString(op.Description)
	builder.WriteString(", ")
	builder.WriteString("is_gift=")
	builder.WriteString(fmt.Sprintf("%v", op.IsGift))
	builder.WriteString(", ")
	builder.WriteString("qty=")
	builder.WriteString(fmt.Sprintf("%v", op.Qty))
	builder.WriteString(", ")
	builder.WriteString("gift_qty=")
	builder.WriteString(fmt.Sprintf("%v", op.GiftQty))
	builder.WriteString(", ")
	if v := op.Subtotal; v != nil {
		builder.WriteString("subtotal=")
		builder.WriteString(fmt.Sprintf("%v", *v))
	}
	builder.WriteString(", ")
	if v := op.DiscountAmount; v != nil {
		builder.WriteString("discount_amount=")
		builder.WriteString(fmt.Sprintf("%v", *v))
	}
	builder.WriteString(", ")
	if v := op.AmountBeforeTax; v != nil {
		builder.WriteString("amount_before_tax=")
		builder.WriteString(fmt.Sprintf("%v", *v))
	}
	builder.WriteString(", ")
	if v := op.TaxRate; v != nil {
		builder.WriteString("tax_rate=")
		builder.WriteString(fmt.Sprintf("%v", *v))
	}
	builder.WriteString(", ")
	if v := op.Tax; v != nil {
		builder.WriteString("tax=")
		builder.WriteString(fmt.Sprintf("%v", *v))
	}
	builder.WriteString(", ")
	if v := op.AmountAfterTax; v != nil {
		builder.WriteString("amount_after_tax=")
		builder.WriteString(fmt.Sprintf("%v", *v))
	}
	builder.WriteString(", ")
	if v := op.Total; v != nil {
		builder.WriteString("total=")
		builder.WriteString(fmt.Sprintf("%v", *v))
	}
	builder.WriteString(", ")
	if v := op.PromotionDiscount; v != nil {
		builder.WriteString("promotion_discount=")
		builder.WriteString(fmt.Sprintf("%v", *v))
	}
	builder.WriteString(", ")
	if v := op.AttrAmount; v != nil {
		builder.WriteString("attr_amount=")
		builder.WriteString(fmt.Sprintf("%v", *v))
	}
	builder.WriteString(", ")
	if v := op.GiftAmount; v != nil {
		builder.WriteString("gift_amount=")
		builder.WriteString(fmt.Sprintf("%v", *v))
	}
	builder.WriteString(", ")
	builder.WriteString("void_qty=")
	builder.WriteString(fmt.Sprintf("%v", op.VoidQty))
	builder.WriteString(", ")
	if v := op.VoidAmount; v != nil {
		builder.WriteString("void_amount=")
		builder.WriteString(fmt.Sprintf("%v", *v))
	}
	builder.WriteString(", ")
	builder.WriteString("refund_reason=")
	builder.WriteString(op.RefundReason)
	builder.WriteString(", ")
	builder.WriteString("refunded_by=")
	builder.WriteString(fmt.Sprintf("%v", op.RefundedBy))
	builder.WriteString(", ")
	if v := op.RefundedAt; v != nil {
		builder.WriteString("refunded_at=")
		builder.WriteString(v.Format(time.ANSIC))
	}
	builder.WriteString(", ")
	builder.WriteString("note=")
	builder.WriteString(op.Note)
	builder.WriteString(", ")
	if v := op.Price; v != nil {
		builder.WriteString("price=")
		builder.WriteString(fmt.Sprintf("%v", *v))
	}
	builder.WriteString(", ")
	builder.WriteString("groups=")
	builder.WriteString(fmt.Sprintf("%v", op.Groups))
	builder.WriteString(", ")
	builder.WriteString("spec_relations=")
	builder.WriteString(fmt.Sprintf("%v", op.SpecRelations))
	builder.WriteString(", ")
	builder.WriteString("attr_relations=")
	builder.WriteString(fmt.Sprintf("%v", op.AttrRelations))
	builder.WriteByte(')')
	return builder.String()
}

// OrderProducts is a parsable slice of OrderProduct.
type OrderProducts []*OrderProduct
