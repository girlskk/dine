// Code generated by ent, DO NOT EDIT.

package ent

import (
	"context"
	"errors"
	"fmt"
	"time"

	"entgo.io/ent/dialect/sql"
	"entgo.io/ent/dialect/sql/sqlgraph"
	"entgo.io/ent/dialect/sql/sqljson"
	"entgo.io/ent/schema/field"
	"github.com/shopspring/decimal"
	"gitlab.jiguang.dev/pos-dine/dine/domain"
	"gitlab.jiguang.dev/pos-dine/dine/ent/dinetable"
	"gitlab.jiguang.dev/pos-dine/dine/ent/order"
	"gitlab.jiguang.dev/pos-dine/dine/ent/orderitem"
	"gitlab.jiguang.dev/pos-dine/dine/ent/orderlog"
	"gitlab.jiguang.dev/pos-dine/dine/ent/predicate"
)

// OrderUpdate is the builder for updating Order entities.
type OrderUpdate struct {
	config
	hooks     []Hook
	mutation  *OrderMutation
	modifiers []func(*sql.UpdateBuilder)
}

// Where appends a list predicates to the OrderUpdate builder.
func (ou *OrderUpdate) Where(ps ...predicate.Order) *OrderUpdate {
	ou.mutation.Where(ps...)
	return ou
}

// SetUpdatedAt sets the "updated_at" field.
func (ou *OrderUpdate) SetUpdatedAt(t time.Time) *OrderUpdate {
	ou.mutation.SetUpdatedAt(t)
	return ou
}

// SetDeletedAt sets the "deleted_at" field.
func (ou *OrderUpdate) SetDeletedAt(i int64) *OrderUpdate {
	ou.mutation.ResetDeletedAt()
	ou.mutation.SetDeletedAt(i)
	return ou
}

// SetNillableDeletedAt sets the "deleted_at" field if the given value is not nil.
func (ou *OrderUpdate) SetNillableDeletedAt(i *int64) *OrderUpdate {
	if i != nil {
		ou.SetDeletedAt(*i)
	}
	return ou
}

// AddDeletedAt adds i to the "deleted_at" field.
func (ou *OrderUpdate) AddDeletedAt(i int64) *OrderUpdate {
	ou.mutation.AddDeletedAt(i)
	return ou
}

// SetStatus sets the "status" field.
func (ou *OrderUpdate) SetStatus(ds domain.OrderStatus) *OrderUpdate {
	ou.mutation.SetStatus(ds)
	return ou
}

// SetNillableStatus sets the "status" field if the given value is not nil.
func (ou *OrderUpdate) SetNillableStatus(ds *domain.OrderStatus) *OrderUpdate {
	if ds != nil {
		ou.SetStatus(*ds)
	}
	return ou
}

// SetTotalPrice sets the "total_price" field.
func (ou *OrderUpdate) SetTotalPrice(d decimal.Decimal) *OrderUpdate {
	ou.mutation.SetTotalPrice(d)
	return ou
}

// SetNillableTotalPrice sets the "total_price" field if the given value is not nil.
func (ou *OrderUpdate) SetNillableTotalPrice(d *decimal.Decimal) *OrderUpdate {
	if d != nil {
		ou.SetTotalPrice(*d)
	}
	return ou
}

// SetDiscount sets the "discount" field.
func (ou *OrderUpdate) SetDiscount(d decimal.Decimal) *OrderUpdate {
	ou.mutation.SetDiscount(d)
	return ou
}

// SetNillableDiscount sets the "discount" field if the given value is not nil.
func (ou *OrderUpdate) SetNillableDiscount(d *decimal.Decimal) *OrderUpdate {
	if d != nil {
		ou.SetDiscount(*d)
	}
	return ou
}

// SetRealPrice sets the "real_price" field.
func (ou *OrderUpdate) SetRealPrice(d decimal.Decimal) *OrderUpdate {
	ou.mutation.SetRealPrice(d)
	return ou
}

// SetNillableRealPrice sets the "real_price" field if the given value is not nil.
func (ou *OrderUpdate) SetNillableRealPrice(d *decimal.Decimal) *OrderUpdate {
	if d != nil {
		ou.SetRealPrice(*d)
	}
	return ou
}

// SetPointsAvailable sets the "points_available" field.
func (ou *OrderUpdate) SetPointsAvailable(d decimal.Decimal) *OrderUpdate {
	ou.mutation.SetPointsAvailable(d)
	return ou
}

// SetNillablePointsAvailable sets the "points_available" field if the given value is not nil.
func (ou *OrderUpdate) SetNillablePointsAvailable(d *decimal.Decimal) *OrderUpdate {
	if d != nil {
		ou.SetPointsAvailable(*d)
	}
	return ou
}

// SetPaid sets the "paid" field.
func (ou *OrderUpdate) SetPaid(d decimal.Decimal) *OrderUpdate {
	ou.mutation.SetPaid(d)
	return ou
}

// SetNillablePaid sets the "paid" field if the given value is not nil.
func (ou *OrderUpdate) SetNillablePaid(d *decimal.Decimal) *OrderUpdate {
	if d != nil {
		ou.SetPaid(*d)
	}
	return ou
}

// SetRefunded sets the "refunded" field.
func (ou *OrderUpdate) SetRefunded(d decimal.Decimal) *OrderUpdate {
	ou.mutation.SetRefunded(d)
	return ou
}

// SetNillableRefunded sets the "refunded" field if the given value is not nil.
func (ou *OrderUpdate) SetNillableRefunded(d *decimal.Decimal) *OrderUpdate {
	if d != nil {
		ou.SetRefunded(*d)
	}
	return ou
}

// SetPaidChannels sets the "paid_channels" field.
func (ou *OrderUpdate) SetPaidChannels(dpc domain.OrderPaidChannels) *OrderUpdate {
	ou.mutation.SetPaidChannels(dpc)
	return ou
}

// AppendPaidChannels appends dpc to the "paid_channels" field.
func (ou *OrderUpdate) AppendPaidChannels(dpc domain.OrderPaidChannels) *OrderUpdate {
	ou.mutation.AppendPaidChannels(dpc)
	return ou
}

// ClearPaidChannels clears the value of the "paid_channels" field.
func (ou *OrderUpdate) ClearPaidChannels() *OrderUpdate {
	ou.mutation.ClearPaidChannels()
	return ou
}

// SetCashPaid sets the "cash_paid" field.
func (ou *OrderUpdate) SetCashPaid(d decimal.Decimal) *OrderUpdate {
	ou.mutation.SetCashPaid(d)
	return ou
}

// SetNillableCashPaid sets the "cash_paid" field if the given value is not nil.
func (ou *OrderUpdate) SetNillableCashPaid(d *decimal.Decimal) *OrderUpdate {
	if d != nil {
		ou.SetCashPaid(*d)
	}
	return ou
}

// SetCashRefunded sets the "cash_refunded" field.
func (ou *OrderUpdate) SetCashRefunded(d decimal.Decimal) *OrderUpdate {
	ou.mutation.SetCashRefunded(d)
	return ou
}

// SetNillableCashRefunded sets the "cash_refunded" field if the given value is not nil.
func (ou *OrderUpdate) SetNillableCashRefunded(d *decimal.Decimal) *OrderUpdate {
	if d != nil {
		ou.SetCashRefunded(*d)
	}
	return ou
}

// SetWechatPaid sets the "wechat_paid" field.
func (ou *OrderUpdate) SetWechatPaid(d decimal.Decimal) *OrderUpdate {
	ou.mutation.SetWechatPaid(d)
	return ou
}

// SetNillableWechatPaid sets the "wechat_paid" field if the given value is not nil.
func (ou *OrderUpdate) SetNillableWechatPaid(d *decimal.Decimal) *OrderUpdate {
	if d != nil {
		ou.SetWechatPaid(*d)
	}
	return ou
}

// SetWechatRefunded sets the "wechat_refunded" field.
func (ou *OrderUpdate) SetWechatRefunded(d decimal.Decimal) *OrderUpdate {
	ou.mutation.SetWechatRefunded(d)
	return ou
}

// SetNillableWechatRefunded sets the "wechat_refunded" field if the given value is not nil.
func (ou *OrderUpdate) SetNillableWechatRefunded(d *decimal.Decimal) *OrderUpdate {
	if d != nil {
		ou.SetWechatRefunded(*d)
	}
	return ou
}

// SetAlipayPaid sets the "alipay_paid" field.
func (ou *OrderUpdate) SetAlipayPaid(d decimal.Decimal) *OrderUpdate {
	ou.mutation.SetAlipayPaid(d)
	return ou
}

// SetNillableAlipayPaid sets the "alipay_paid" field if the given value is not nil.
func (ou *OrderUpdate) SetNillableAlipayPaid(d *decimal.Decimal) *OrderUpdate {
	if d != nil {
		ou.SetAlipayPaid(*d)
	}
	return ou
}

// SetAlipayRefunded sets the "alipay_refunded" field.
func (ou *OrderUpdate) SetAlipayRefunded(d decimal.Decimal) *OrderUpdate {
	ou.mutation.SetAlipayRefunded(d)
	return ou
}

// SetNillableAlipayRefunded sets the "alipay_refunded" field if the given value is not nil.
func (ou *OrderUpdate) SetNillableAlipayRefunded(d *decimal.Decimal) *OrderUpdate {
	if d != nil {
		ou.SetAlipayRefunded(*d)
	}
	return ou
}

// SetPointsPaid sets the "points_paid" field.
func (ou *OrderUpdate) SetPointsPaid(d decimal.Decimal) *OrderUpdate {
	ou.mutation.SetPointsPaid(d)
	return ou
}

// SetNillablePointsPaid sets the "points_paid" field if the given value is not nil.
func (ou *OrderUpdate) SetNillablePointsPaid(d *decimal.Decimal) *OrderUpdate {
	if d != nil {
		ou.SetPointsPaid(*d)
	}
	return ou
}

// SetPointsRefunded sets the "points_refunded" field.
func (ou *OrderUpdate) SetPointsRefunded(d decimal.Decimal) *OrderUpdate {
	ou.mutation.SetPointsRefunded(d)
	return ou
}

// SetNillablePointsRefunded sets the "points_refunded" field if the given value is not nil.
func (ou *OrderUpdate) SetNillablePointsRefunded(d *decimal.Decimal) *OrderUpdate {
	if d != nil {
		ou.SetPointsRefunded(*d)
	}
	return ou
}

// SetPointsWalletPaid sets the "points_wallet_paid" field.
func (ou *OrderUpdate) SetPointsWalletPaid(d decimal.Decimal) *OrderUpdate {
	ou.mutation.SetPointsWalletPaid(d)
	return ou
}

// SetNillablePointsWalletPaid sets the "points_wallet_paid" field if the given value is not nil.
func (ou *OrderUpdate) SetNillablePointsWalletPaid(d *decimal.Decimal) *OrderUpdate {
	if d != nil {
		ou.SetPointsWalletPaid(*d)
	}
	return ou
}

// SetPointsWalletRefunded sets the "points_wallet_refunded" field.
func (ou *OrderUpdate) SetPointsWalletRefunded(d decimal.Decimal) *OrderUpdate {
	ou.mutation.SetPointsWalletRefunded(d)
	return ou
}

// SetNillablePointsWalletRefunded sets the "points_wallet_refunded" field if the given value is not nil.
func (ou *OrderUpdate) SetNillablePointsWalletRefunded(d *decimal.Decimal) *OrderUpdate {
	if d != nil {
		ou.SetPointsWalletRefunded(*d)
	}
	return ou
}

// SetLastPaidAt sets the "last_paid_at" field.
func (ou *OrderUpdate) SetLastPaidAt(t time.Time) *OrderUpdate {
	ou.mutation.SetLastPaidAt(t)
	return ou
}

// SetNillableLastPaidAt sets the "last_paid_at" field if the given value is not nil.
func (ou *OrderUpdate) SetNillableLastPaidAt(t *time.Time) *OrderUpdate {
	if t != nil {
		ou.SetLastPaidAt(*t)
	}
	return ou
}

// ClearLastPaidAt clears the value of the "last_paid_at" field.
func (ou *OrderUpdate) ClearLastPaidAt() *OrderUpdate {
	ou.mutation.ClearLastPaidAt()
	return ou
}

// SetFinishedAt sets the "finished_at" field.
func (ou *OrderUpdate) SetFinishedAt(t time.Time) *OrderUpdate {
	ou.mutation.SetFinishedAt(t)
	return ou
}

// SetNillableFinishedAt sets the "finished_at" field if the given value is not nil.
func (ou *OrderUpdate) SetNillableFinishedAt(t *time.Time) *OrderUpdate {
	if t != nil {
		ou.SetFinishedAt(*t)
	}
	return ou
}

// ClearFinishedAt clears the value of the "finished_at" field.
func (ou *OrderUpdate) ClearFinishedAt() *OrderUpdate {
	ou.mutation.ClearFinishedAt()
	return ou
}

// SetMemberID sets the "member_id" field.
func (ou *OrderUpdate) SetMemberID(i int) *OrderUpdate {
	ou.mutation.ResetMemberID()
	ou.mutation.SetMemberID(i)
	return ou
}

// SetNillableMemberID sets the "member_id" field if the given value is not nil.
func (ou *OrderUpdate) SetNillableMemberID(i *int) *OrderUpdate {
	if i != nil {
		ou.SetMemberID(*i)
	}
	return ou
}

// AddMemberID adds i to the "member_id" field.
func (ou *OrderUpdate) AddMemberID(i int) *OrderUpdate {
	ou.mutation.AddMemberID(i)
	return ou
}

// SetMemberName sets the "member_name" field.
func (ou *OrderUpdate) SetMemberName(s string) *OrderUpdate {
	ou.mutation.SetMemberName(s)
	return ou
}

// SetNillableMemberName sets the "member_name" field if the given value is not nil.
func (ou *OrderUpdate) SetNillableMemberName(s *string) *OrderUpdate {
	if s != nil {
		ou.SetMemberName(*s)
	}
	return ou
}

// SetMemberPhone sets the "member_phone" field.
func (ou *OrderUpdate) SetMemberPhone(s string) *OrderUpdate {
	ou.mutation.SetMemberPhone(s)
	return ou
}

// SetNillableMemberPhone sets the "member_phone" field if the given value is not nil.
func (ou *OrderUpdate) SetNillableMemberPhone(s *string) *OrderUpdate {
	if s != nil {
		ou.SetMemberPhone(*s)
	}
	return ou
}

// SetTableID sets the "table_id" field.
func (ou *OrderUpdate) SetTableID(i int) *OrderUpdate {
	ou.mutation.SetTableID(i)
	return ou
}

// SetNillableTableID sets the "table_id" field if the given value is not nil.
func (ou *OrderUpdate) SetNillableTableID(i *int) *OrderUpdate {
	if i != nil {
		ou.SetTableID(*i)
	}
	return ou
}

// ClearTableID clears the value of the "table_id" field.
func (ou *OrderUpdate) ClearTableID() *OrderUpdate {
	ou.mutation.ClearTableID()
	return ou
}

// SetTableName sets the "table_name" field.
func (ou *OrderUpdate) SetTableName(s string) *OrderUpdate {
	ou.mutation.SetTableName(s)
	return ou
}

// SetNillableTableName sets the "table_name" field if the given value is not nil.
func (ou *OrderUpdate) SetNillableTableName(s *string) *OrderUpdate {
	if s != nil {
		ou.SetTableName(*s)
	}
	return ou
}

// SetPeopleNumber sets the "people_number" field.
func (ou *OrderUpdate) SetPeopleNumber(i int) *OrderUpdate {
	ou.mutation.ResetPeopleNumber()
	ou.mutation.SetPeopleNumber(i)
	return ou
}

// SetNillablePeopleNumber sets the "people_number" field if the given value is not nil.
func (ou *OrderUpdate) SetNillablePeopleNumber(i *int) *OrderUpdate {
	if i != nil {
		ou.SetPeopleNumber(*i)
	}
	return ou
}

// AddPeopleNumber adds i to the "people_number" field.
func (ou *OrderUpdate) AddPeopleNumber(i int) *OrderUpdate {
	ou.mutation.AddPeopleNumber(i)
	return ou
}

// AddItemIDs adds the "items" edge to the OrderItem entity by IDs.
func (ou *OrderUpdate) AddItemIDs(ids ...int) *OrderUpdate {
	ou.mutation.AddItemIDs(ids...)
	return ou
}

// AddItems adds the "items" edges to the OrderItem entity.
func (ou *OrderUpdate) AddItems(o ...*OrderItem) *OrderUpdate {
	ids := make([]int, len(o))
	for i := range o {
		ids[i] = o[i].ID
	}
	return ou.AddItemIDs(ids...)
}

// AddLogIDs adds the "logs" edge to the OrderLog entity by IDs.
func (ou *OrderUpdate) AddLogIDs(ids ...int) *OrderUpdate {
	ou.mutation.AddLogIDs(ids...)
	return ou
}

// AddLogs adds the "logs" edges to the OrderLog entity.
func (ou *OrderUpdate) AddLogs(o ...*OrderLog) *OrderUpdate {
	ids := make([]int, len(o))
	for i := range o {
		ids[i] = o[i].ID
	}
	return ou.AddLogIDs(ids...)
}

// SetCurrentDinetableID sets the "current_dinetable" edge to the DineTable entity by ID.
func (ou *OrderUpdate) SetCurrentDinetableID(id int) *OrderUpdate {
	ou.mutation.SetCurrentDinetableID(id)
	return ou
}

// SetNillableCurrentDinetableID sets the "current_dinetable" edge to the DineTable entity by ID if the given value is not nil.
func (ou *OrderUpdate) SetNillableCurrentDinetableID(id *int) *OrderUpdate {
	if id != nil {
		ou = ou.SetCurrentDinetableID(*id)
	}
	return ou
}

// SetCurrentDinetable sets the "current_dinetable" edge to the DineTable entity.
func (ou *OrderUpdate) SetCurrentDinetable(d *DineTable) *OrderUpdate {
	return ou.SetCurrentDinetableID(d.ID)
}

// SetDinetableID sets the "dinetable" edge to the DineTable entity by ID.
func (ou *OrderUpdate) SetDinetableID(id int) *OrderUpdate {
	ou.mutation.SetDinetableID(id)
	return ou
}

// SetNillableDinetableID sets the "dinetable" edge to the DineTable entity by ID if the given value is not nil.
func (ou *OrderUpdate) SetNillableDinetableID(id *int) *OrderUpdate {
	if id != nil {
		ou = ou.SetDinetableID(*id)
	}
	return ou
}

// SetDinetable sets the "dinetable" edge to the DineTable entity.
func (ou *OrderUpdate) SetDinetable(d *DineTable) *OrderUpdate {
	return ou.SetDinetableID(d.ID)
}

// Mutation returns the OrderMutation object of the builder.
func (ou *OrderUpdate) Mutation() *OrderMutation {
	return ou.mutation
}

// ClearItems clears all "items" edges to the OrderItem entity.
func (ou *OrderUpdate) ClearItems() *OrderUpdate {
	ou.mutation.ClearItems()
	return ou
}

// RemoveItemIDs removes the "items" edge to OrderItem entities by IDs.
func (ou *OrderUpdate) RemoveItemIDs(ids ...int) *OrderUpdate {
	ou.mutation.RemoveItemIDs(ids...)
	return ou
}

// RemoveItems removes "items" edges to OrderItem entities.
func (ou *OrderUpdate) RemoveItems(o ...*OrderItem) *OrderUpdate {
	ids := make([]int, len(o))
	for i := range o {
		ids[i] = o[i].ID
	}
	return ou.RemoveItemIDs(ids...)
}

// ClearLogs clears all "logs" edges to the OrderLog entity.
func (ou *OrderUpdate) ClearLogs() *OrderUpdate {
	ou.mutation.ClearLogs()
	return ou
}

// RemoveLogIDs removes the "logs" edge to OrderLog entities by IDs.
func (ou *OrderUpdate) RemoveLogIDs(ids ...int) *OrderUpdate {
	ou.mutation.RemoveLogIDs(ids...)
	return ou
}

// RemoveLogs removes "logs" edges to OrderLog entities.
func (ou *OrderUpdate) RemoveLogs(o ...*OrderLog) *OrderUpdate {
	ids := make([]int, len(o))
	for i := range o {
		ids[i] = o[i].ID
	}
	return ou.RemoveLogIDs(ids...)
}

// ClearCurrentDinetable clears the "current_dinetable" edge to the DineTable entity.
func (ou *OrderUpdate) ClearCurrentDinetable() *OrderUpdate {
	ou.mutation.ClearCurrentDinetable()
	return ou
}

// ClearDinetable clears the "dinetable" edge to the DineTable entity.
func (ou *OrderUpdate) ClearDinetable() *OrderUpdate {
	ou.mutation.ClearDinetable()
	return ou
}

// Save executes the query and returns the number of nodes affected by the update operation.
func (ou *OrderUpdate) Save(ctx context.Context) (int, error) {
	if err := ou.defaults(); err != nil {
		return 0, err
	}
	return withHooks(ctx, ou.sqlSave, ou.mutation, ou.hooks)
}

// SaveX is like Save, but panics if an error occurs.
func (ou *OrderUpdate) SaveX(ctx context.Context) int {
	affected, err := ou.Save(ctx)
	if err != nil {
		panic(err)
	}
	return affected
}

// Exec executes the query.
func (ou *OrderUpdate) Exec(ctx context.Context) error {
	_, err := ou.Save(ctx)
	return err
}

// ExecX is like Exec, but panics if an error occurs.
func (ou *OrderUpdate) ExecX(ctx context.Context) {
	if err := ou.Exec(ctx); err != nil {
		panic(err)
	}
}

// defaults sets the default values of the builder before save.
func (ou *OrderUpdate) defaults() error {
	if _, ok := ou.mutation.UpdatedAt(); !ok {
		if order.UpdateDefaultUpdatedAt == nil {
			return fmt.Errorf("ent: uninitialized order.UpdateDefaultUpdatedAt (forgotten import ent/runtime?)")
		}
		v := order.UpdateDefaultUpdatedAt()
		ou.mutation.SetUpdatedAt(v)
	}
	return nil
}

// check runs all checks and user-defined validators on the builder.
func (ou *OrderUpdate) check() error {
	if v, ok := ou.mutation.Status(); ok {
		if err := order.StatusValidator(v); err != nil {
			return &ValidationError{Name: "status", err: fmt.Errorf(`ent: validator failed for field "Order.status": %w`, err)}
		}
	}
	if v, ok := ou.mutation.MemberID(); ok {
		if err := order.MemberIDValidator(v); err != nil {
			return &ValidationError{Name: "member_id", err: fmt.Errorf(`ent: validator failed for field "Order.member_id": %w`, err)}
		}
	}
	if v, ok := ou.mutation.PeopleNumber(); ok {
		if err := order.PeopleNumberValidator(v); err != nil {
			return &ValidationError{Name: "people_number", err: fmt.Errorf(`ent: validator failed for field "Order.people_number": %w`, err)}
		}
	}
	return nil
}

// Modify adds a statement modifier for attaching custom logic to the UPDATE statement.
func (ou *OrderUpdate) Modify(modifiers ...func(u *sql.UpdateBuilder)) *OrderUpdate {
	ou.modifiers = append(ou.modifiers, modifiers...)
	return ou
}

func (ou *OrderUpdate) sqlSave(ctx context.Context) (n int, err error) {
	if err := ou.check(); err != nil {
		return n, err
	}
	_spec := sqlgraph.NewUpdateSpec(order.Table, order.Columns, sqlgraph.NewFieldSpec(order.FieldID, field.TypeInt))
	if ps := ou.mutation.predicates; len(ps) > 0 {
		_spec.Predicate = func(selector *sql.Selector) {
			for i := range ps {
				ps[i](selector)
			}
		}
	}
	if value, ok := ou.mutation.UpdatedAt(); ok {
		_spec.SetField(order.FieldUpdatedAt, field.TypeTime, value)
	}
	if value, ok := ou.mutation.DeletedAt(); ok {
		_spec.SetField(order.FieldDeletedAt, field.TypeInt64, value)
	}
	if value, ok := ou.mutation.AddedDeletedAt(); ok {
		_spec.AddField(order.FieldDeletedAt, field.TypeInt64, value)
	}
	if value, ok := ou.mutation.Status(); ok {
		_spec.SetField(order.FieldStatus, field.TypeEnum, value)
	}
	if value, ok := ou.mutation.TotalPrice(); ok {
		_spec.SetField(order.FieldTotalPrice, field.TypeOther, value)
	}
	if value, ok := ou.mutation.Discount(); ok {
		_spec.SetField(order.FieldDiscount, field.TypeOther, value)
	}
	if value, ok := ou.mutation.RealPrice(); ok {
		_spec.SetField(order.FieldRealPrice, field.TypeOther, value)
	}
	if value, ok := ou.mutation.PointsAvailable(); ok {
		_spec.SetField(order.FieldPointsAvailable, field.TypeOther, value)
	}
	if value, ok := ou.mutation.Paid(); ok {
		_spec.SetField(order.FieldPaid, field.TypeOther, value)
	}
	if value, ok := ou.mutation.Refunded(); ok {
		_spec.SetField(order.FieldRefunded, field.TypeOther, value)
	}
	if value, ok := ou.mutation.PaidChannels(); ok {
		_spec.SetField(order.FieldPaidChannels, field.TypeJSON, value)
	}
	if value, ok := ou.mutation.AppendedPaidChannels(); ok {
		_spec.AddModifier(func(u *sql.UpdateBuilder) {
			sqljson.Append(u, order.FieldPaidChannels, value)
		})
	}
	if ou.mutation.PaidChannelsCleared() {
		_spec.ClearField(order.FieldPaidChannels, field.TypeJSON)
	}
	if value, ok := ou.mutation.CashPaid(); ok {
		_spec.SetField(order.FieldCashPaid, field.TypeOther, value)
	}
	if value, ok := ou.mutation.CashRefunded(); ok {
		_spec.SetField(order.FieldCashRefunded, field.TypeOther, value)
	}
	if value, ok := ou.mutation.WechatPaid(); ok {
		_spec.SetField(order.FieldWechatPaid, field.TypeOther, value)
	}
	if value, ok := ou.mutation.WechatRefunded(); ok {
		_spec.SetField(order.FieldWechatRefunded, field.TypeOther, value)
	}
	if value, ok := ou.mutation.AlipayPaid(); ok {
		_spec.SetField(order.FieldAlipayPaid, field.TypeOther, value)
	}
	if value, ok := ou.mutation.AlipayRefunded(); ok {
		_spec.SetField(order.FieldAlipayRefunded, field.TypeOther, value)
	}
	if value, ok := ou.mutation.PointsPaid(); ok {
		_spec.SetField(order.FieldPointsPaid, field.TypeOther, value)
	}
	if value, ok := ou.mutation.PointsRefunded(); ok {
		_spec.SetField(order.FieldPointsRefunded, field.TypeOther, value)
	}
	if value, ok := ou.mutation.PointsWalletPaid(); ok {
		_spec.SetField(order.FieldPointsWalletPaid, field.TypeOther, value)
	}
	if value, ok := ou.mutation.PointsWalletRefunded(); ok {
		_spec.SetField(order.FieldPointsWalletRefunded, field.TypeOther, value)
	}
	if value, ok := ou.mutation.LastPaidAt(); ok {
		_spec.SetField(order.FieldLastPaidAt, field.TypeTime, value)
	}
	if ou.mutation.LastPaidAtCleared() {
		_spec.ClearField(order.FieldLastPaidAt, field.TypeTime)
	}
	if value, ok := ou.mutation.FinishedAt(); ok {
		_spec.SetField(order.FieldFinishedAt, field.TypeTime, value)
	}
	if ou.mutation.FinishedAtCleared() {
		_spec.ClearField(order.FieldFinishedAt, field.TypeTime)
	}
	if value, ok := ou.mutation.MemberID(); ok {
		_spec.SetField(order.FieldMemberID, field.TypeInt, value)
	}
	if value, ok := ou.mutation.AddedMemberID(); ok {
		_spec.AddField(order.FieldMemberID, field.TypeInt, value)
	}
	if value, ok := ou.mutation.MemberName(); ok {
		_spec.SetField(order.FieldMemberName, field.TypeString, value)
	}
	if value, ok := ou.mutation.MemberPhone(); ok {
		_spec.SetField(order.FieldMemberPhone, field.TypeString, value)
	}
	if value, ok := ou.mutation.TableName(); ok {
		_spec.SetField(order.FieldTableName, field.TypeString, value)
	}
	if value, ok := ou.mutation.PeopleNumber(); ok {
		_spec.SetField(order.FieldPeopleNumber, field.TypeInt, value)
	}
	if value, ok := ou.mutation.AddedPeopleNumber(); ok {
		_spec.AddField(order.FieldPeopleNumber, field.TypeInt, value)
	}
	if ou.mutation.ItemsCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2M,
			Inverse: false,
			Table:   order.ItemsTable,
			Columns: []string{order.ItemsColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(orderitem.FieldID, field.TypeInt),
			},
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := ou.mutation.RemovedItemsIDs(); len(nodes) > 0 && !ou.mutation.ItemsCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2M,
			Inverse: false,
			Table:   order.ItemsTable,
			Columns: []string{order.ItemsColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(orderitem.FieldID, field.TypeInt),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := ou.mutation.ItemsIDs(); len(nodes) > 0 {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2M,
			Inverse: false,
			Table:   order.ItemsTable,
			Columns: []string{order.ItemsColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(orderitem.FieldID, field.TypeInt),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Add = append(_spec.Edges.Add, edge)
	}
	if ou.mutation.LogsCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2M,
			Inverse: false,
			Table:   order.LogsTable,
			Columns: []string{order.LogsColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(orderlog.FieldID, field.TypeInt),
			},
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := ou.mutation.RemovedLogsIDs(); len(nodes) > 0 && !ou.mutation.LogsCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2M,
			Inverse: false,
			Table:   order.LogsTable,
			Columns: []string{order.LogsColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(orderlog.FieldID, field.TypeInt),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := ou.mutation.LogsIDs(); len(nodes) > 0 {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2M,
			Inverse: false,
			Table:   order.LogsTable,
			Columns: []string{order.LogsColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(orderlog.FieldID, field.TypeInt),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Add = append(_spec.Edges.Add, edge)
	}
	if ou.mutation.CurrentDinetableCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2O,
			Inverse: false,
			Table:   order.CurrentDinetableTable,
			Columns: []string{order.CurrentDinetableColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(dinetable.FieldID, field.TypeInt),
			},
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := ou.mutation.CurrentDinetableIDs(); len(nodes) > 0 {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2O,
			Inverse: false,
			Table:   order.CurrentDinetableTable,
			Columns: []string{order.CurrentDinetableColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(dinetable.FieldID, field.TypeInt),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Add = append(_spec.Edges.Add, edge)
	}
	if ou.mutation.DinetableCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.M2O,
			Inverse: true,
			Table:   order.DinetableTable,
			Columns: []string{order.DinetableColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(dinetable.FieldID, field.TypeInt),
			},
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := ou.mutation.DinetableIDs(); len(nodes) > 0 {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.M2O,
			Inverse: true,
			Table:   order.DinetableTable,
			Columns: []string{order.DinetableColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(dinetable.FieldID, field.TypeInt),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Add = append(_spec.Edges.Add, edge)
	}
	_spec.AddModifiers(ou.modifiers...)
	if n, err = sqlgraph.UpdateNodes(ctx, ou.driver, _spec); err != nil {
		if _, ok := err.(*sqlgraph.NotFoundError); ok {
			err = &NotFoundError{order.Label}
		} else if sqlgraph.IsConstraintError(err) {
			err = &ConstraintError{msg: err.Error(), wrap: err}
		}
		return 0, err
	}
	ou.mutation.done = true
	return n, nil
}

// OrderUpdateOne is the builder for updating a single Order entity.
type OrderUpdateOne struct {
	config
	fields    []string
	hooks     []Hook
	mutation  *OrderMutation
	modifiers []func(*sql.UpdateBuilder)
}

// SetUpdatedAt sets the "updated_at" field.
func (ouo *OrderUpdateOne) SetUpdatedAt(t time.Time) *OrderUpdateOne {
	ouo.mutation.SetUpdatedAt(t)
	return ouo
}

// SetDeletedAt sets the "deleted_at" field.
func (ouo *OrderUpdateOne) SetDeletedAt(i int64) *OrderUpdateOne {
	ouo.mutation.ResetDeletedAt()
	ouo.mutation.SetDeletedAt(i)
	return ouo
}

// SetNillableDeletedAt sets the "deleted_at" field if the given value is not nil.
func (ouo *OrderUpdateOne) SetNillableDeletedAt(i *int64) *OrderUpdateOne {
	if i != nil {
		ouo.SetDeletedAt(*i)
	}
	return ouo
}

// AddDeletedAt adds i to the "deleted_at" field.
func (ouo *OrderUpdateOne) AddDeletedAt(i int64) *OrderUpdateOne {
	ouo.mutation.AddDeletedAt(i)
	return ouo
}

// SetStatus sets the "status" field.
func (ouo *OrderUpdateOne) SetStatus(ds domain.OrderStatus) *OrderUpdateOne {
	ouo.mutation.SetStatus(ds)
	return ouo
}

// SetNillableStatus sets the "status" field if the given value is not nil.
func (ouo *OrderUpdateOne) SetNillableStatus(ds *domain.OrderStatus) *OrderUpdateOne {
	if ds != nil {
		ouo.SetStatus(*ds)
	}
	return ouo
}

// SetTotalPrice sets the "total_price" field.
func (ouo *OrderUpdateOne) SetTotalPrice(d decimal.Decimal) *OrderUpdateOne {
	ouo.mutation.SetTotalPrice(d)
	return ouo
}

// SetNillableTotalPrice sets the "total_price" field if the given value is not nil.
func (ouo *OrderUpdateOne) SetNillableTotalPrice(d *decimal.Decimal) *OrderUpdateOne {
	if d != nil {
		ouo.SetTotalPrice(*d)
	}
	return ouo
}

// SetDiscount sets the "discount" field.
func (ouo *OrderUpdateOne) SetDiscount(d decimal.Decimal) *OrderUpdateOne {
	ouo.mutation.SetDiscount(d)
	return ouo
}

// SetNillableDiscount sets the "discount" field if the given value is not nil.
func (ouo *OrderUpdateOne) SetNillableDiscount(d *decimal.Decimal) *OrderUpdateOne {
	if d != nil {
		ouo.SetDiscount(*d)
	}
	return ouo
}

// SetRealPrice sets the "real_price" field.
func (ouo *OrderUpdateOne) SetRealPrice(d decimal.Decimal) *OrderUpdateOne {
	ouo.mutation.SetRealPrice(d)
	return ouo
}

// SetNillableRealPrice sets the "real_price" field if the given value is not nil.
func (ouo *OrderUpdateOne) SetNillableRealPrice(d *decimal.Decimal) *OrderUpdateOne {
	if d != nil {
		ouo.SetRealPrice(*d)
	}
	return ouo
}

// SetPointsAvailable sets the "points_available" field.
func (ouo *OrderUpdateOne) SetPointsAvailable(d decimal.Decimal) *OrderUpdateOne {
	ouo.mutation.SetPointsAvailable(d)
	return ouo
}

// SetNillablePointsAvailable sets the "points_available" field if the given value is not nil.
func (ouo *OrderUpdateOne) SetNillablePointsAvailable(d *decimal.Decimal) *OrderUpdateOne {
	if d != nil {
		ouo.SetPointsAvailable(*d)
	}
	return ouo
}

// SetPaid sets the "paid" field.
func (ouo *OrderUpdateOne) SetPaid(d decimal.Decimal) *OrderUpdateOne {
	ouo.mutation.SetPaid(d)
	return ouo
}

// SetNillablePaid sets the "paid" field if the given value is not nil.
func (ouo *OrderUpdateOne) SetNillablePaid(d *decimal.Decimal) *OrderUpdateOne {
	if d != nil {
		ouo.SetPaid(*d)
	}
	return ouo
}

// SetRefunded sets the "refunded" field.
func (ouo *OrderUpdateOne) SetRefunded(d decimal.Decimal) *OrderUpdateOne {
	ouo.mutation.SetRefunded(d)
	return ouo
}

// SetNillableRefunded sets the "refunded" field if the given value is not nil.
func (ouo *OrderUpdateOne) SetNillableRefunded(d *decimal.Decimal) *OrderUpdateOne {
	if d != nil {
		ouo.SetRefunded(*d)
	}
	return ouo
}

// SetPaidChannels sets the "paid_channels" field.
func (ouo *OrderUpdateOne) SetPaidChannels(dpc domain.OrderPaidChannels) *OrderUpdateOne {
	ouo.mutation.SetPaidChannels(dpc)
	return ouo
}

// AppendPaidChannels appends dpc to the "paid_channels" field.
func (ouo *OrderUpdateOne) AppendPaidChannels(dpc domain.OrderPaidChannels) *OrderUpdateOne {
	ouo.mutation.AppendPaidChannels(dpc)
	return ouo
}

// ClearPaidChannels clears the value of the "paid_channels" field.
func (ouo *OrderUpdateOne) ClearPaidChannels() *OrderUpdateOne {
	ouo.mutation.ClearPaidChannels()
	return ouo
}

// SetCashPaid sets the "cash_paid" field.
func (ouo *OrderUpdateOne) SetCashPaid(d decimal.Decimal) *OrderUpdateOne {
	ouo.mutation.SetCashPaid(d)
	return ouo
}

// SetNillableCashPaid sets the "cash_paid" field if the given value is not nil.
func (ouo *OrderUpdateOne) SetNillableCashPaid(d *decimal.Decimal) *OrderUpdateOne {
	if d != nil {
		ouo.SetCashPaid(*d)
	}
	return ouo
}

// SetCashRefunded sets the "cash_refunded" field.
func (ouo *OrderUpdateOne) SetCashRefunded(d decimal.Decimal) *OrderUpdateOne {
	ouo.mutation.SetCashRefunded(d)
	return ouo
}

// SetNillableCashRefunded sets the "cash_refunded" field if the given value is not nil.
func (ouo *OrderUpdateOne) SetNillableCashRefunded(d *decimal.Decimal) *OrderUpdateOne {
	if d != nil {
		ouo.SetCashRefunded(*d)
	}
	return ouo
}

// SetWechatPaid sets the "wechat_paid" field.
func (ouo *OrderUpdateOne) SetWechatPaid(d decimal.Decimal) *OrderUpdateOne {
	ouo.mutation.SetWechatPaid(d)
	return ouo
}

// SetNillableWechatPaid sets the "wechat_paid" field if the given value is not nil.
func (ouo *OrderUpdateOne) SetNillableWechatPaid(d *decimal.Decimal) *OrderUpdateOne {
	if d != nil {
		ouo.SetWechatPaid(*d)
	}
	return ouo
}

// SetWechatRefunded sets the "wechat_refunded" field.
func (ouo *OrderUpdateOne) SetWechatRefunded(d decimal.Decimal) *OrderUpdateOne {
	ouo.mutation.SetWechatRefunded(d)
	return ouo
}

// SetNillableWechatRefunded sets the "wechat_refunded" field if the given value is not nil.
func (ouo *OrderUpdateOne) SetNillableWechatRefunded(d *decimal.Decimal) *OrderUpdateOne {
	if d != nil {
		ouo.SetWechatRefunded(*d)
	}
	return ouo
}

// SetAlipayPaid sets the "alipay_paid" field.
func (ouo *OrderUpdateOne) SetAlipayPaid(d decimal.Decimal) *OrderUpdateOne {
	ouo.mutation.SetAlipayPaid(d)
	return ouo
}

// SetNillableAlipayPaid sets the "alipay_paid" field if the given value is not nil.
func (ouo *OrderUpdateOne) SetNillableAlipayPaid(d *decimal.Decimal) *OrderUpdateOne {
	if d != nil {
		ouo.SetAlipayPaid(*d)
	}
	return ouo
}

// SetAlipayRefunded sets the "alipay_refunded" field.
func (ouo *OrderUpdateOne) SetAlipayRefunded(d decimal.Decimal) *OrderUpdateOne {
	ouo.mutation.SetAlipayRefunded(d)
	return ouo
}

// SetNillableAlipayRefunded sets the "alipay_refunded" field if the given value is not nil.
func (ouo *OrderUpdateOne) SetNillableAlipayRefunded(d *decimal.Decimal) *OrderUpdateOne {
	if d != nil {
		ouo.SetAlipayRefunded(*d)
	}
	return ouo
}

// SetPointsPaid sets the "points_paid" field.
func (ouo *OrderUpdateOne) SetPointsPaid(d decimal.Decimal) *OrderUpdateOne {
	ouo.mutation.SetPointsPaid(d)
	return ouo
}

// SetNillablePointsPaid sets the "points_paid" field if the given value is not nil.
func (ouo *OrderUpdateOne) SetNillablePointsPaid(d *decimal.Decimal) *OrderUpdateOne {
	if d != nil {
		ouo.SetPointsPaid(*d)
	}
	return ouo
}

// SetPointsRefunded sets the "points_refunded" field.
func (ouo *OrderUpdateOne) SetPointsRefunded(d decimal.Decimal) *OrderUpdateOne {
	ouo.mutation.SetPointsRefunded(d)
	return ouo
}

// SetNillablePointsRefunded sets the "points_refunded" field if the given value is not nil.
func (ouo *OrderUpdateOne) SetNillablePointsRefunded(d *decimal.Decimal) *OrderUpdateOne {
	if d != nil {
		ouo.SetPointsRefunded(*d)
	}
	return ouo
}

// SetPointsWalletPaid sets the "points_wallet_paid" field.
func (ouo *OrderUpdateOne) SetPointsWalletPaid(d decimal.Decimal) *OrderUpdateOne {
	ouo.mutation.SetPointsWalletPaid(d)
	return ouo
}

// SetNillablePointsWalletPaid sets the "points_wallet_paid" field if the given value is not nil.
func (ouo *OrderUpdateOne) SetNillablePointsWalletPaid(d *decimal.Decimal) *OrderUpdateOne {
	if d != nil {
		ouo.SetPointsWalletPaid(*d)
	}
	return ouo
}

// SetPointsWalletRefunded sets the "points_wallet_refunded" field.
func (ouo *OrderUpdateOne) SetPointsWalletRefunded(d decimal.Decimal) *OrderUpdateOne {
	ouo.mutation.SetPointsWalletRefunded(d)
	return ouo
}

// SetNillablePointsWalletRefunded sets the "points_wallet_refunded" field if the given value is not nil.
func (ouo *OrderUpdateOne) SetNillablePointsWalletRefunded(d *decimal.Decimal) *OrderUpdateOne {
	if d != nil {
		ouo.SetPointsWalletRefunded(*d)
	}
	return ouo
}

// SetLastPaidAt sets the "last_paid_at" field.
func (ouo *OrderUpdateOne) SetLastPaidAt(t time.Time) *OrderUpdateOne {
	ouo.mutation.SetLastPaidAt(t)
	return ouo
}

// SetNillableLastPaidAt sets the "last_paid_at" field if the given value is not nil.
func (ouo *OrderUpdateOne) SetNillableLastPaidAt(t *time.Time) *OrderUpdateOne {
	if t != nil {
		ouo.SetLastPaidAt(*t)
	}
	return ouo
}

// ClearLastPaidAt clears the value of the "last_paid_at" field.
func (ouo *OrderUpdateOne) ClearLastPaidAt() *OrderUpdateOne {
	ouo.mutation.ClearLastPaidAt()
	return ouo
}

// SetFinishedAt sets the "finished_at" field.
func (ouo *OrderUpdateOne) SetFinishedAt(t time.Time) *OrderUpdateOne {
	ouo.mutation.SetFinishedAt(t)
	return ouo
}

// SetNillableFinishedAt sets the "finished_at" field if the given value is not nil.
func (ouo *OrderUpdateOne) SetNillableFinishedAt(t *time.Time) *OrderUpdateOne {
	if t != nil {
		ouo.SetFinishedAt(*t)
	}
	return ouo
}

// ClearFinishedAt clears the value of the "finished_at" field.
func (ouo *OrderUpdateOne) ClearFinishedAt() *OrderUpdateOne {
	ouo.mutation.ClearFinishedAt()
	return ouo
}

// SetMemberID sets the "member_id" field.
func (ouo *OrderUpdateOne) SetMemberID(i int) *OrderUpdateOne {
	ouo.mutation.ResetMemberID()
	ouo.mutation.SetMemberID(i)
	return ouo
}

// SetNillableMemberID sets the "member_id" field if the given value is not nil.
func (ouo *OrderUpdateOne) SetNillableMemberID(i *int) *OrderUpdateOne {
	if i != nil {
		ouo.SetMemberID(*i)
	}
	return ouo
}

// AddMemberID adds i to the "member_id" field.
func (ouo *OrderUpdateOne) AddMemberID(i int) *OrderUpdateOne {
	ouo.mutation.AddMemberID(i)
	return ouo
}

// SetMemberName sets the "member_name" field.
func (ouo *OrderUpdateOne) SetMemberName(s string) *OrderUpdateOne {
	ouo.mutation.SetMemberName(s)
	return ouo
}

// SetNillableMemberName sets the "member_name" field if the given value is not nil.
func (ouo *OrderUpdateOne) SetNillableMemberName(s *string) *OrderUpdateOne {
	if s != nil {
		ouo.SetMemberName(*s)
	}
	return ouo
}

// SetMemberPhone sets the "member_phone" field.
func (ouo *OrderUpdateOne) SetMemberPhone(s string) *OrderUpdateOne {
	ouo.mutation.SetMemberPhone(s)
	return ouo
}

// SetNillableMemberPhone sets the "member_phone" field if the given value is not nil.
func (ouo *OrderUpdateOne) SetNillableMemberPhone(s *string) *OrderUpdateOne {
	if s != nil {
		ouo.SetMemberPhone(*s)
	}
	return ouo
}

// SetTableID sets the "table_id" field.
func (ouo *OrderUpdateOne) SetTableID(i int) *OrderUpdateOne {
	ouo.mutation.SetTableID(i)
	return ouo
}

// SetNillableTableID sets the "table_id" field if the given value is not nil.
func (ouo *OrderUpdateOne) SetNillableTableID(i *int) *OrderUpdateOne {
	if i != nil {
		ouo.SetTableID(*i)
	}
	return ouo
}

// ClearTableID clears the value of the "table_id" field.
func (ouo *OrderUpdateOne) ClearTableID() *OrderUpdateOne {
	ouo.mutation.ClearTableID()
	return ouo
}

// SetTableName sets the "table_name" field.
func (ouo *OrderUpdateOne) SetTableName(s string) *OrderUpdateOne {
	ouo.mutation.SetTableName(s)
	return ouo
}

// SetNillableTableName sets the "table_name" field if the given value is not nil.
func (ouo *OrderUpdateOne) SetNillableTableName(s *string) *OrderUpdateOne {
	if s != nil {
		ouo.SetTableName(*s)
	}
	return ouo
}

// SetPeopleNumber sets the "people_number" field.
func (ouo *OrderUpdateOne) SetPeopleNumber(i int) *OrderUpdateOne {
	ouo.mutation.ResetPeopleNumber()
	ouo.mutation.SetPeopleNumber(i)
	return ouo
}

// SetNillablePeopleNumber sets the "people_number" field if the given value is not nil.
func (ouo *OrderUpdateOne) SetNillablePeopleNumber(i *int) *OrderUpdateOne {
	if i != nil {
		ouo.SetPeopleNumber(*i)
	}
	return ouo
}

// AddPeopleNumber adds i to the "people_number" field.
func (ouo *OrderUpdateOne) AddPeopleNumber(i int) *OrderUpdateOne {
	ouo.mutation.AddPeopleNumber(i)
	return ouo
}

// AddItemIDs adds the "items" edge to the OrderItem entity by IDs.
func (ouo *OrderUpdateOne) AddItemIDs(ids ...int) *OrderUpdateOne {
	ouo.mutation.AddItemIDs(ids...)
	return ouo
}

// AddItems adds the "items" edges to the OrderItem entity.
func (ouo *OrderUpdateOne) AddItems(o ...*OrderItem) *OrderUpdateOne {
	ids := make([]int, len(o))
	for i := range o {
		ids[i] = o[i].ID
	}
	return ouo.AddItemIDs(ids...)
}

// AddLogIDs adds the "logs" edge to the OrderLog entity by IDs.
func (ouo *OrderUpdateOne) AddLogIDs(ids ...int) *OrderUpdateOne {
	ouo.mutation.AddLogIDs(ids...)
	return ouo
}

// AddLogs adds the "logs" edges to the OrderLog entity.
func (ouo *OrderUpdateOne) AddLogs(o ...*OrderLog) *OrderUpdateOne {
	ids := make([]int, len(o))
	for i := range o {
		ids[i] = o[i].ID
	}
	return ouo.AddLogIDs(ids...)
}

// SetCurrentDinetableID sets the "current_dinetable" edge to the DineTable entity by ID.
func (ouo *OrderUpdateOne) SetCurrentDinetableID(id int) *OrderUpdateOne {
	ouo.mutation.SetCurrentDinetableID(id)
	return ouo
}

// SetNillableCurrentDinetableID sets the "current_dinetable" edge to the DineTable entity by ID if the given value is not nil.
func (ouo *OrderUpdateOne) SetNillableCurrentDinetableID(id *int) *OrderUpdateOne {
	if id != nil {
		ouo = ouo.SetCurrentDinetableID(*id)
	}
	return ouo
}

// SetCurrentDinetable sets the "current_dinetable" edge to the DineTable entity.
func (ouo *OrderUpdateOne) SetCurrentDinetable(d *DineTable) *OrderUpdateOne {
	return ouo.SetCurrentDinetableID(d.ID)
}

// SetDinetableID sets the "dinetable" edge to the DineTable entity by ID.
func (ouo *OrderUpdateOne) SetDinetableID(id int) *OrderUpdateOne {
	ouo.mutation.SetDinetableID(id)
	return ouo
}

// SetNillableDinetableID sets the "dinetable" edge to the DineTable entity by ID if the given value is not nil.
func (ouo *OrderUpdateOne) SetNillableDinetableID(id *int) *OrderUpdateOne {
	if id != nil {
		ouo = ouo.SetDinetableID(*id)
	}
	return ouo
}

// SetDinetable sets the "dinetable" edge to the DineTable entity.
func (ouo *OrderUpdateOne) SetDinetable(d *DineTable) *OrderUpdateOne {
	return ouo.SetDinetableID(d.ID)
}

// Mutation returns the OrderMutation object of the builder.
func (ouo *OrderUpdateOne) Mutation() *OrderMutation {
	return ouo.mutation
}

// ClearItems clears all "items" edges to the OrderItem entity.
func (ouo *OrderUpdateOne) ClearItems() *OrderUpdateOne {
	ouo.mutation.ClearItems()
	return ouo
}

// RemoveItemIDs removes the "items" edge to OrderItem entities by IDs.
func (ouo *OrderUpdateOne) RemoveItemIDs(ids ...int) *OrderUpdateOne {
	ouo.mutation.RemoveItemIDs(ids...)
	return ouo
}

// RemoveItems removes "items" edges to OrderItem entities.
func (ouo *OrderUpdateOne) RemoveItems(o ...*OrderItem) *OrderUpdateOne {
	ids := make([]int, len(o))
	for i := range o {
		ids[i] = o[i].ID
	}
	return ouo.RemoveItemIDs(ids...)
}

// ClearLogs clears all "logs" edges to the OrderLog entity.
func (ouo *OrderUpdateOne) ClearLogs() *OrderUpdateOne {
	ouo.mutation.ClearLogs()
	return ouo
}

// RemoveLogIDs removes the "logs" edge to OrderLog entities by IDs.
func (ouo *OrderUpdateOne) RemoveLogIDs(ids ...int) *OrderUpdateOne {
	ouo.mutation.RemoveLogIDs(ids...)
	return ouo
}

// RemoveLogs removes "logs" edges to OrderLog entities.
func (ouo *OrderUpdateOne) RemoveLogs(o ...*OrderLog) *OrderUpdateOne {
	ids := make([]int, len(o))
	for i := range o {
		ids[i] = o[i].ID
	}
	return ouo.RemoveLogIDs(ids...)
}

// ClearCurrentDinetable clears the "current_dinetable" edge to the DineTable entity.
func (ouo *OrderUpdateOne) ClearCurrentDinetable() *OrderUpdateOne {
	ouo.mutation.ClearCurrentDinetable()
	return ouo
}

// ClearDinetable clears the "dinetable" edge to the DineTable entity.
func (ouo *OrderUpdateOne) ClearDinetable() *OrderUpdateOne {
	ouo.mutation.ClearDinetable()
	return ouo
}

// Where appends a list predicates to the OrderUpdate builder.
func (ouo *OrderUpdateOne) Where(ps ...predicate.Order) *OrderUpdateOne {
	ouo.mutation.Where(ps...)
	return ouo
}

// Select allows selecting one or more fields (columns) of the returned entity.
// The default is selecting all fields defined in the entity schema.
func (ouo *OrderUpdateOne) Select(field string, fields ...string) *OrderUpdateOne {
	ouo.fields = append([]string{field}, fields...)
	return ouo
}

// Save executes the query and returns the updated Order entity.
func (ouo *OrderUpdateOne) Save(ctx context.Context) (*Order, error) {
	if err := ouo.defaults(); err != nil {
		return nil, err
	}
	return withHooks(ctx, ouo.sqlSave, ouo.mutation, ouo.hooks)
}

// SaveX is like Save, but panics if an error occurs.
func (ouo *OrderUpdateOne) SaveX(ctx context.Context) *Order {
	node, err := ouo.Save(ctx)
	if err != nil {
		panic(err)
	}
	return node
}

// Exec executes the query on the entity.
func (ouo *OrderUpdateOne) Exec(ctx context.Context) error {
	_, err := ouo.Save(ctx)
	return err
}

// ExecX is like Exec, but panics if an error occurs.
func (ouo *OrderUpdateOne) ExecX(ctx context.Context) {
	if err := ouo.Exec(ctx); err != nil {
		panic(err)
	}
}

// defaults sets the default values of the builder before save.
func (ouo *OrderUpdateOne) defaults() error {
	if _, ok := ouo.mutation.UpdatedAt(); !ok {
		if order.UpdateDefaultUpdatedAt == nil {
			return fmt.Errorf("ent: uninitialized order.UpdateDefaultUpdatedAt (forgotten import ent/runtime?)")
		}
		v := order.UpdateDefaultUpdatedAt()
		ouo.mutation.SetUpdatedAt(v)
	}
	return nil
}

// check runs all checks and user-defined validators on the builder.
func (ouo *OrderUpdateOne) check() error {
	if v, ok := ouo.mutation.Status(); ok {
		if err := order.StatusValidator(v); err != nil {
			return &ValidationError{Name: "status", err: fmt.Errorf(`ent: validator failed for field "Order.status": %w`, err)}
		}
	}
	if v, ok := ouo.mutation.MemberID(); ok {
		if err := order.MemberIDValidator(v); err != nil {
			return &ValidationError{Name: "member_id", err: fmt.Errorf(`ent: validator failed for field "Order.member_id": %w`, err)}
		}
	}
	if v, ok := ouo.mutation.PeopleNumber(); ok {
		if err := order.PeopleNumberValidator(v); err != nil {
			return &ValidationError{Name: "people_number", err: fmt.Errorf(`ent: validator failed for field "Order.people_number": %w`, err)}
		}
	}
	return nil
}

// Modify adds a statement modifier for attaching custom logic to the UPDATE statement.
func (ouo *OrderUpdateOne) Modify(modifiers ...func(u *sql.UpdateBuilder)) *OrderUpdateOne {
	ouo.modifiers = append(ouo.modifiers, modifiers...)
	return ouo
}

func (ouo *OrderUpdateOne) sqlSave(ctx context.Context) (_node *Order, err error) {
	if err := ouo.check(); err != nil {
		return _node, err
	}
	_spec := sqlgraph.NewUpdateSpec(order.Table, order.Columns, sqlgraph.NewFieldSpec(order.FieldID, field.TypeInt))
	id, ok := ouo.mutation.ID()
	if !ok {
		return nil, &ValidationError{Name: "id", err: errors.New(`ent: missing "Order.id" for update`)}
	}
	_spec.Node.ID.Value = id
	if fields := ouo.fields; len(fields) > 0 {
		_spec.Node.Columns = make([]string, 0, len(fields))
		_spec.Node.Columns = append(_spec.Node.Columns, order.FieldID)
		for _, f := range fields {
			if !order.ValidColumn(f) {
				return nil, &ValidationError{Name: f, err: fmt.Errorf("ent: invalid field %q for query", f)}
			}
			if f != order.FieldID {
				_spec.Node.Columns = append(_spec.Node.Columns, f)
			}
		}
	}
	if ps := ouo.mutation.predicates; len(ps) > 0 {
		_spec.Predicate = func(selector *sql.Selector) {
			for i := range ps {
				ps[i](selector)
			}
		}
	}
	if value, ok := ouo.mutation.UpdatedAt(); ok {
		_spec.SetField(order.FieldUpdatedAt, field.TypeTime, value)
	}
	if value, ok := ouo.mutation.DeletedAt(); ok {
		_spec.SetField(order.FieldDeletedAt, field.TypeInt64, value)
	}
	if value, ok := ouo.mutation.AddedDeletedAt(); ok {
		_spec.AddField(order.FieldDeletedAt, field.TypeInt64, value)
	}
	if value, ok := ouo.mutation.Status(); ok {
		_spec.SetField(order.FieldStatus, field.TypeEnum, value)
	}
	if value, ok := ouo.mutation.TotalPrice(); ok {
		_spec.SetField(order.FieldTotalPrice, field.TypeOther, value)
	}
	if value, ok := ouo.mutation.Discount(); ok {
		_spec.SetField(order.FieldDiscount, field.TypeOther, value)
	}
	if value, ok := ouo.mutation.RealPrice(); ok {
		_spec.SetField(order.FieldRealPrice, field.TypeOther, value)
	}
	if value, ok := ouo.mutation.PointsAvailable(); ok {
		_spec.SetField(order.FieldPointsAvailable, field.TypeOther, value)
	}
	if value, ok := ouo.mutation.Paid(); ok {
		_spec.SetField(order.FieldPaid, field.TypeOther, value)
	}
	if value, ok := ouo.mutation.Refunded(); ok {
		_spec.SetField(order.FieldRefunded, field.TypeOther, value)
	}
	if value, ok := ouo.mutation.PaidChannels(); ok {
		_spec.SetField(order.FieldPaidChannels, field.TypeJSON, value)
	}
	if value, ok := ouo.mutation.AppendedPaidChannels(); ok {
		_spec.AddModifier(func(u *sql.UpdateBuilder) {
			sqljson.Append(u, order.FieldPaidChannels, value)
		})
	}
	if ouo.mutation.PaidChannelsCleared() {
		_spec.ClearField(order.FieldPaidChannels, field.TypeJSON)
	}
	if value, ok := ouo.mutation.CashPaid(); ok {
		_spec.SetField(order.FieldCashPaid, field.TypeOther, value)
	}
	if value, ok := ouo.mutation.CashRefunded(); ok {
		_spec.SetField(order.FieldCashRefunded, field.TypeOther, value)
	}
	if value, ok := ouo.mutation.WechatPaid(); ok {
		_spec.SetField(order.FieldWechatPaid, field.TypeOther, value)
	}
	if value, ok := ouo.mutation.WechatRefunded(); ok {
		_spec.SetField(order.FieldWechatRefunded, field.TypeOther, value)
	}
	if value, ok := ouo.mutation.AlipayPaid(); ok {
		_spec.SetField(order.FieldAlipayPaid, field.TypeOther, value)
	}
	if value, ok := ouo.mutation.AlipayRefunded(); ok {
		_spec.SetField(order.FieldAlipayRefunded, field.TypeOther, value)
	}
	if value, ok := ouo.mutation.PointsPaid(); ok {
		_spec.SetField(order.FieldPointsPaid, field.TypeOther, value)
	}
	if value, ok := ouo.mutation.PointsRefunded(); ok {
		_spec.SetField(order.FieldPointsRefunded, field.TypeOther, value)
	}
	if value, ok := ouo.mutation.PointsWalletPaid(); ok {
		_spec.SetField(order.FieldPointsWalletPaid, field.TypeOther, value)
	}
	if value, ok := ouo.mutation.PointsWalletRefunded(); ok {
		_spec.SetField(order.FieldPointsWalletRefunded, field.TypeOther, value)
	}
	if value, ok := ouo.mutation.LastPaidAt(); ok {
		_spec.SetField(order.FieldLastPaidAt, field.TypeTime, value)
	}
	if ouo.mutation.LastPaidAtCleared() {
		_spec.ClearField(order.FieldLastPaidAt, field.TypeTime)
	}
	if value, ok := ouo.mutation.FinishedAt(); ok {
		_spec.SetField(order.FieldFinishedAt, field.TypeTime, value)
	}
	if ouo.mutation.FinishedAtCleared() {
		_spec.ClearField(order.FieldFinishedAt, field.TypeTime)
	}
	if value, ok := ouo.mutation.MemberID(); ok {
		_spec.SetField(order.FieldMemberID, field.TypeInt, value)
	}
	if value, ok := ouo.mutation.AddedMemberID(); ok {
		_spec.AddField(order.FieldMemberID, field.TypeInt, value)
	}
	if value, ok := ouo.mutation.MemberName(); ok {
		_spec.SetField(order.FieldMemberName, field.TypeString, value)
	}
	if value, ok := ouo.mutation.MemberPhone(); ok {
		_spec.SetField(order.FieldMemberPhone, field.TypeString, value)
	}
	if value, ok := ouo.mutation.TableName(); ok {
		_spec.SetField(order.FieldTableName, field.TypeString, value)
	}
	if value, ok := ouo.mutation.PeopleNumber(); ok {
		_spec.SetField(order.FieldPeopleNumber, field.TypeInt, value)
	}
	if value, ok := ouo.mutation.AddedPeopleNumber(); ok {
		_spec.AddField(order.FieldPeopleNumber, field.TypeInt, value)
	}
	if ouo.mutation.ItemsCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2M,
			Inverse: false,
			Table:   order.ItemsTable,
			Columns: []string{order.ItemsColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(orderitem.FieldID, field.TypeInt),
			},
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := ouo.mutation.RemovedItemsIDs(); len(nodes) > 0 && !ouo.mutation.ItemsCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2M,
			Inverse: false,
			Table:   order.ItemsTable,
			Columns: []string{order.ItemsColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(orderitem.FieldID, field.TypeInt),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := ouo.mutation.ItemsIDs(); len(nodes) > 0 {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2M,
			Inverse: false,
			Table:   order.ItemsTable,
			Columns: []string{order.ItemsColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(orderitem.FieldID, field.TypeInt),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Add = append(_spec.Edges.Add, edge)
	}
	if ouo.mutation.LogsCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2M,
			Inverse: false,
			Table:   order.LogsTable,
			Columns: []string{order.LogsColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(orderlog.FieldID, field.TypeInt),
			},
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := ouo.mutation.RemovedLogsIDs(); len(nodes) > 0 && !ouo.mutation.LogsCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2M,
			Inverse: false,
			Table:   order.LogsTable,
			Columns: []string{order.LogsColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(orderlog.FieldID, field.TypeInt),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := ouo.mutation.LogsIDs(); len(nodes) > 0 {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2M,
			Inverse: false,
			Table:   order.LogsTable,
			Columns: []string{order.LogsColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(orderlog.FieldID, field.TypeInt),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Add = append(_spec.Edges.Add, edge)
	}
	if ouo.mutation.CurrentDinetableCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2O,
			Inverse: false,
			Table:   order.CurrentDinetableTable,
			Columns: []string{order.CurrentDinetableColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(dinetable.FieldID, field.TypeInt),
			},
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := ouo.mutation.CurrentDinetableIDs(); len(nodes) > 0 {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.O2O,
			Inverse: false,
			Table:   order.CurrentDinetableTable,
			Columns: []string{order.CurrentDinetableColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(dinetable.FieldID, field.TypeInt),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Add = append(_spec.Edges.Add, edge)
	}
	if ouo.mutation.DinetableCleared() {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.M2O,
			Inverse: true,
			Table:   order.DinetableTable,
			Columns: []string{order.DinetableColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(dinetable.FieldID, field.TypeInt),
			},
		}
		_spec.Edges.Clear = append(_spec.Edges.Clear, edge)
	}
	if nodes := ouo.mutation.DinetableIDs(); len(nodes) > 0 {
		edge := &sqlgraph.EdgeSpec{
			Rel:     sqlgraph.M2O,
			Inverse: true,
			Table:   order.DinetableTable,
			Columns: []string{order.DinetableColumn},
			Bidi:    false,
			Target: &sqlgraph.EdgeTarget{
				IDSpec: sqlgraph.NewFieldSpec(dinetable.FieldID, field.TypeInt),
			},
		}
		for _, k := range nodes {
			edge.Target.Nodes = append(edge.Target.Nodes, k)
		}
		_spec.Edges.Add = append(_spec.Edges.Add, edge)
	}
	_spec.AddModifiers(ouo.modifiers...)
	_node = &Order{config: ouo.config}
	_spec.Assign = _node.assignValues
	_spec.ScanValues = _node.scanValues
	if err = sqlgraph.UpdateNode(ctx, ouo.driver, _spec); err != nil {
		if _, ok := err.(*sqlgraph.NotFoundError); ok {
			err = &NotFoundError{order.Label}
		} else if sqlgraph.IsConstraintError(err) {
			err = &ConstraintError{msg: err.Error(), wrap: err}
		}
		return nil, err
	}
	ouo.mutation.done = true
	return _node, nil
}
