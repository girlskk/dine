// Code generated by ent, DO NOT EDIT.

package ent

import (
	"context"
	"errors"
	"fmt"
	"time"

	"entgo.io/ent/dialect/sql"
	"entgo.io/ent/dialect/sql/sqlgraph"
	"entgo.io/ent/schema/field"
	"gitlab.jiguang.dev/pos-dine/dine/domain"
	"gitlab.jiguang.dev/pos-dine/dine/ent/predicate"
	"gitlab.jiguang.dev/pos-dine/dine/ent/store"
)

// StoreUpdate is the builder for updating Store entities.
type StoreUpdate struct {
	config
	hooks     []Hook
	mutation  *StoreMutation
	modifiers []func(*sql.UpdateBuilder)
}

// Where appends a list predicates to the StoreUpdate builder.
func (su *StoreUpdate) Where(ps ...predicate.Store) *StoreUpdate {
	su.mutation.Where(ps...)
	return su
}

// SetUpdatedAt sets the "updated_at" field.
func (su *StoreUpdate) SetUpdatedAt(t time.Time) *StoreUpdate {
	su.mutation.SetUpdatedAt(t)
	return su
}

// SetDeletedAt sets the "deleted_at" field.
func (su *StoreUpdate) SetDeletedAt(i int64) *StoreUpdate {
	su.mutation.ResetDeletedAt()
	su.mutation.SetDeletedAt(i)
	return su
}

// SetNillableDeletedAt sets the "deleted_at" field if the given value is not nil.
func (su *StoreUpdate) SetNillableDeletedAt(i *int64) *StoreUpdate {
	if i != nil {
		su.SetDeletedAt(*i)
	}
	return su
}

// AddDeletedAt adds i to the "deleted_at" field.
func (su *StoreUpdate) AddDeletedAt(i int64) *StoreUpdate {
	su.mutation.AddDeletedAt(i)
	return su
}

// SetAdminPhoneNumber sets the "admin_phone_number" field.
func (su *StoreUpdate) SetAdminPhoneNumber(s string) *StoreUpdate {
	su.mutation.SetAdminPhoneNumber(s)
	return su
}

// SetNillableAdminPhoneNumber sets the "admin_phone_number" field if the given value is not nil.
func (su *StoreUpdate) SetNillableAdminPhoneNumber(s *string) *StoreUpdate {
	if s != nil {
		su.SetAdminPhoneNumber(*s)
	}
	return su
}

// SetStoreName sets the "store_name" field.
func (su *StoreUpdate) SetStoreName(s string) *StoreUpdate {
	su.mutation.SetStoreName(s)
	return su
}

// SetNillableStoreName sets the "store_name" field if the given value is not nil.
func (su *StoreUpdate) SetNillableStoreName(s *string) *StoreUpdate {
	if s != nil {
		su.SetStoreName(*s)
	}
	return su
}

// SetStoreShortName sets the "store_short_name" field.
func (su *StoreUpdate) SetStoreShortName(s string) *StoreUpdate {
	su.mutation.SetStoreShortName(s)
	return su
}

// SetNillableStoreShortName sets the "store_short_name" field if the given value is not nil.
func (su *StoreUpdate) SetNillableStoreShortName(s *string) *StoreUpdate {
	if s != nil {
		su.SetStoreShortName(*s)
	}
	return su
}

// SetStoreCode sets the "store_code" field.
func (su *StoreUpdate) SetStoreCode(s string) *StoreUpdate {
	su.mutation.SetStoreCode(s)
	return su
}

// SetNillableStoreCode sets the "store_code" field if the given value is not nil.
func (su *StoreUpdate) SetNillableStoreCode(s *string) *StoreUpdate {
	if s != nil {
		su.SetStoreCode(*s)
	}
	return su
}

// SetStatus sets the "status" field.
func (su *StoreUpdate) SetStatus(ds domain.StoreStatus) *StoreUpdate {
	su.mutation.SetStatus(ds)
	return su
}

// SetNillableStatus sets the "status" field if the given value is not nil.
func (su *StoreUpdate) SetNillableStatus(ds *domain.StoreStatus) *StoreUpdate {
	if ds != nil {
		su.SetStatus(*ds)
	}
	return su
}

// SetBusinessModel sets the "business_model" field.
func (su *StoreUpdate) SetBusinessModel(dm domain.BusinessModel) *StoreUpdate {
	su.mutation.SetBusinessModel(dm)
	return su
}

// SetNillableBusinessModel sets the "business_model" field if the given value is not nil.
func (su *StoreUpdate) SetNillableBusinessModel(dm *domain.BusinessModel) *StoreUpdate {
	if dm != nil {
		su.SetBusinessModel(*dm)
	}
	return su
}

// SetBusinessTypeID sets the "business_type_id" field.
func (su *StoreUpdate) SetBusinessTypeID(i int) *StoreUpdate {
	su.mutation.ResetBusinessTypeID()
	su.mutation.SetBusinessTypeID(i)
	return su
}

// SetNillableBusinessTypeID sets the "business_type_id" field if the given value is not nil.
func (su *StoreUpdate) SetNillableBusinessTypeID(i *int) *StoreUpdate {
	if i != nil {
		su.SetBusinessTypeID(*i)
	}
	return su
}

// AddBusinessTypeID adds i to the "business_type_id" field.
func (su *StoreUpdate) AddBusinessTypeID(i int) *StoreUpdate {
	su.mutation.AddBusinessTypeID(i)
	return su
}

// SetContactName sets the "contact_name" field.
func (su *StoreUpdate) SetContactName(s string) *StoreUpdate {
	su.mutation.SetContactName(s)
	return su
}

// SetNillableContactName sets the "contact_name" field if the given value is not nil.
func (su *StoreUpdate) SetNillableContactName(s *string) *StoreUpdate {
	if s != nil {
		su.SetContactName(*s)
	}
	return su
}

// SetContactPhone sets the "contact_phone" field.
func (su *StoreUpdate) SetContactPhone(s string) *StoreUpdate {
	su.mutation.SetContactPhone(s)
	return su
}

// SetNillableContactPhone sets the "contact_phone" field if the given value is not nil.
func (su *StoreUpdate) SetNillableContactPhone(s *string) *StoreUpdate {
	if s != nil {
		su.SetContactPhone(*s)
	}
	return su
}

// SetUnifiedSocialCreditCode sets the "unified_social_credit_code" field.
func (su *StoreUpdate) SetUnifiedSocialCreditCode(s string) *StoreUpdate {
	su.mutation.SetUnifiedSocialCreditCode(s)
	return su
}

// SetNillableUnifiedSocialCreditCode sets the "unified_social_credit_code" field if the given value is not nil.
func (su *StoreUpdate) SetNillableUnifiedSocialCreditCode(s *string) *StoreUpdate {
	if s != nil {
		su.SetUnifiedSocialCreditCode(*s)
	}
	return su
}

// SetStoreLogo sets the "store_logo" field.
func (su *StoreUpdate) SetStoreLogo(s string) *StoreUpdate {
	su.mutation.SetStoreLogo(s)
	return su
}

// SetNillableStoreLogo sets the "store_logo" field if the given value is not nil.
func (su *StoreUpdate) SetNillableStoreLogo(s *string) *StoreUpdate {
	if s != nil {
		su.SetStoreLogo(*s)
	}
	return su
}

// SetBusinessLicenseURL sets the "business_license_url" field.
func (su *StoreUpdate) SetBusinessLicenseURL(s string) *StoreUpdate {
	su.mutation.SetBusinessLicenseURL(s)
	return su
}

// SetNillableBusinessLicenseURL sets the "business_license_url" field if the given value is not nil.
func (su *StoreUpdate) SetNillableBusinessLicenseURL(s *string) *StoreUpdate {
	if s != nil {
		su.SetBusinessLicenseURL(*s)
	}
	return su
}

// SetStorefrontURL sets the "storefront_url" field.
func (su *StoreUpdate) SetStorefrontURL(s string) *StoreUpdate {
	su.mutation.SetStorefrontURL(s)
	return su
}

// SetNillableStorefrontURL sets the "storefront_url" field if the given value is not nil.
func (su *StoreUpdate) SetNillableStorefrontURL(s *string) *StoreUpdate {
	if s != nil {
		su.SetStorefrontURL(*s)
	}
	return su
}

// SetCashierDeskURL sets the "cashier_desk_url" field.
func (su *StoreUpdate) SetCashierDeskURL(s string) *StoreUpdate {
	su.mutation.SetCashierDeskURL(s)
	return su
}

// SetNillableCashierDeskURL sets the "cashier_desk_url" field if the given value is not nil.
func (su *StoreUpdate) SetNillableCashierDeskURL(s *string) *StoreUpdate {
	if s != nil {
		su.SetCashierDeskURL(*s)
	}
	return su
}

// SetDiningEnvironmentURL sets the "dining_environment_url" field.
func (su *StoreUpdate) SetDiningEnvironmentURL(s string) *StoreUpdate {
	su.mutation.SetDiningEnvironmentURL(s)
	return su
}

// SetNillableDiningEnvironmentURL sets the "dining_environment_url" field if the given value is not nil.
func (su *StoreUpdate) SetNillableDiningEnvironmentURL(s *string) *StoreUpdate {
	if s != nil {
		su.SetDiningEnvironmentURL(*s)
	}
	return su
}

// SetFoodOperationLicenseURL sets the "food_operation_license_url" field.
func (su *StoreUpdate) SetFoodOperationLicenseURL(s string) *StoreUpdate {
	su.mutation.SetFoodOperationLicenseURL(s)
	return su
}

// SetNillableFoodOperationLicenseURL sets the "food_operation_license_url" field if the given value is not nil.
func (su *StoreUpdate) SetNillableFoodOperationLicenseURL(s *string) *StoreUpdate {
	if s != nil {
		su.SetFoodOperationLicenseURL(*s)
	}
	return su
}

// SetCountryID sets the "country_id" field.
func (su *StoreUpdate) SetCountryID(i int) *StoreUpdate {
	su.mutation.ResetCountryID()
	su.mutation.SetCountryID(i)
	return su
}

// SetNillableCountryID sets the "country_id" field if the given value is not nil.
func (su *StoreUpdate) SetNillableCountryID(i *int) *StoreUpdate {
	if i != nil {
		su.SetCountryID(*i)
	}
	return su
}

// AddCountryID adds i to the "country_id" field.
func (su *StoreUpdate) AddCountryID(i int) *StoreUpdate {
	su.mutation.AddCountryID(i)
	return su
}

// SetProvinceID sets the "province_id" field.
func (su *StoreUpdate) SetProvinceID(i int) *StoreUpdate {
	su.mutation.ResetProvinceID()
	su.mutation.SetProvinceID(i)
	return su
}

// SetNillableProvinceID sets the "province_id" field if the given value is not nil.
func (su *StoreUpdate) SetNillableProvinceID(i *int) *StoreUpdate {
	if i != nil {
		su.SetProvinceID(*i)
	}
	return su
}

// AddProvinceID adds i to the "province_id" field.
func (su *StoreUpdate) AddProvinceID(i int) *StoreUpdate {
	su.mutation.AddProvinceID(i)
	return su
}

// SetCityID sets the "city_id" field.
func (su *StoreUpdate) SetCityID(i int) *StoreUpdate {
	su.mutation.ResetCityID()
	su.mutation.SetCityID(i)
	return su
}

// SetNillableCityID sets the "city_id" field if the given value is not nil.
func (su *StoreUpdate) SetNillableCityID(i *int) *StoreUpdate {
	if i != nil {
		su.SetCityID(*i)
	}
	return su
}

// AddCityID adds i to the "city_id" field.
func (su *StoreUpdate) AddCityID(i int) *StoreUpdate {
	su.mutation.AddCityID(i)
	return su
}

// SetDistrictID sets the "district_id" field.
func (su *StoreUpdate) SetDistrictID(i int) *StoreUpdate {
	su.mutation.ResetDistrictID()
	su.mutation.SetDistrictID(i)
	return su
}

// SetNillableDistrictID sets the "district_id" field if the given value is not nil.
func (su *StoreUpdate) SetNillableDistrictID(i *int) *StoreUpdate {
	if i != nil {
		su.SetDistrictID(*i)
	}
	return su
}

// AddDistrictID adds i to the "district_id" field.
func (su *StoreUpdate) AddDistrictID(i int) *StoreUpdate {
	su.mutation.AddDistrictID(i)
	return su
}

// SetCountryName sets the "country_name" field.
func (su *StoreUpdate) SetCountryName(s string) *StoreUpdate {
	su.mutation.SetCountryName(s)
	return su
}

// SetNillableCountryName sets the "country_name" field if the given value is not nil.
func (su *StoreUpdate) SetNillableCountryName(s *string) *StoreUpdate {
	if s != nil {
		su.SetCountryName(*s)
	}
	return su
}

// SetProvinceName sets the "province_name" field.
func (su *StoreUpdate) SetProvinceName(s string) *StoreUpdate {
	su.mutation.SetProvinceName(s)
	return su
}

// SetNillableProvinceName sets the "province_name" field if the given value is not nil.
func (su *StoreUpdate) SetNillableProvinceName(s *string) *StoreUpdate {
	if s != nil {
		su.SetProvinceName(*s)
	}
	return su
}

// SetCityName sets the "city_name" field.
func (su *StoreUpdate) SetCityName(s string) *StoreUpdate {
	su.mutation.SetCityName(s)
	return su
}

// SetNillableCityName sets the "city_name" field if the given value is not nil.
func (su *StoreUpdate) SetNillableCityName(s *string) *StoreUpdate {
	if s != nil {
		su.SetCityName(*s)
	}
	return su
}

// SetDistrictName sets the "district_name" field.
func (su *StoreUpdate) SetDistrictName(s string) *StoreUpdate {
	su.mutation.SetDistrictName(s)
	return su
}

// SetNillableDistrictName sets the "district_name" field if the given value is not nil.
func (su *StoreUpdate) SetNillableDistrictName(s *string) *StoreUpdate {
	if s != nil {
		su.SetDistrictName(*s)
	}
	return su
}

// SetAddress sets the "address" field.
func (su *StoreUpdate) SetAddress(s string) *StoreUpdate {
	su.mutation.SetAddress(s)
	return su
}

// SetNillableAddress sets the "address" field if the given value is not nil.
func (su *StoreUpdate) SetNillableAddress(s *string) *StoreUpdate {
	if s != nil {
		su.SetAddress(*s)
	}
	return su
}

// SetLng sets the "lng" field.
func (su *StoreUpdate) SetLng(s string) *StoreUpdate {
	su.mutation.SetLng(s)
	return su
}

// SetNillableLng sets the "lng" field if the given value is not nil.
func (su *StoreUpdate) SetNillableLng(s *string) *StoreUpdate {
	if s != nil {
		su.SetLng(*s)
	}
	return su
}

// SetLat sets the "lat" field.
func (su *StoreUpdate) SetLat(s string) *StoreUpdate {
	su.mutation.SetLat(s)
	return su
}

// SetNillableLat sets the "lat" field if the given value is not nil.
func (su *StoreUpdate) SetNillableLat(s *string) *StoreUpdate {
	if s != nil {
		su.SetLat(*s)
	}
	return su
}

// Mutation returns the StoreMutation object of the builder.
func (su *StoreUpdate) Mutation() *StoreMutation {
	return su.mutation
}

// Save executes the query and returns the number of nodes affected by the update operation.
func (su *StoreUpdate) Save(ctx context.Context) (int, error) {
	su.defaults()
	return withHooks(ctx, su.sqlSave, su.mutation, su.hooks)
}

// SaveX is like Save, but panics if an error occurs.
func (su *StoreUpdate) SaveX(ctx context.Context) int {
	affected, err := su.Save(ctx)
	if err != nil {
		panic(err)
	}
	return affected
}

// Exec executes the query.
func (su *StoreUpdate) Exec(ctx context.Context) error {
	_, err := su.Save(ctx)
	return err
}

// ExecX is like Exec, but panics if an error occurs.
func (su *StoreUpdate) ExecX(ctx context.Context) {
	if err := su.Exec(ctx); err != nil {
		panic(err)
	}
}

// defaults sets the default values of the builder before save.
func (su *StoreUpdate) defaults() {
	if _, ok := su.mutation.UpdatedAt(); !ok {
		v := store.UpdateDefaultUpdatedAt()
		su.mutation.SetUpdatedAt(v)
	}
}

// check runs all checks and user-defined validators on the builder.
func (su *StoreUpdate) check() error {
	if v, ok := su.mutation.AdminPhoneNumber(); ok {
		if err := store.AdminPhoneNumberValidator(v); err != nil {
			return &ValidationError{Name: "admin_phone_number", err: fmt.Errorf(`ent: validator failed for field "Store.admin_phone_number": %w`, err)}
		}
	}
	if v, ok := su.mutation.StoreName(); ok {
		if err := store.StoreNameValidator(v); err != nil {
			return &ValidationError{Name: "store_name", err: fmt.Errorf(`ent: validator failed for field "Store.store_name": %w`, err)}
		}
	}
	if v, ok := su.mutation.StoreShortName(); ok {
		if err := store.StoreShortNameValidator(v); err != nil {
			return &ValidationError{Name: "store_short_name", err: fmt.Errorf(`ent: validator failed for field "Store.store_short_name": %w`, err)}
		}
	}
	if v, ok := su.mutation.StoreCode(); ok {
		if err := store.StoreCodeValidator(v); err != nil {
			return &ValidationError{Name: "store_code", err: fmt.Errorf(`ent: validator failed for field "Store.store_code": %w`, err)}
		}
	}
	if v, ok := su.mutation.Status(); ok {
		if err := store.StatusValidator(v); err != nil {
			return &ValidationError{Name: "status", err: fmt.Errorf(`ent: validator failed for field "Store.status": %w`, err)}
		}
	}
	if v, ok := su.mutation.BusinessModel(); ok {
		if err := store.BusinessModelValidator(v); err != nil {
			return &ValidationError{Name: "business_model", err: fmt.Errorf(`ent: validator failed for field "Store.business_model": %w`, err)}
		}
	}
	if v, ok := su.mutation.ContactName(); ok {
		if err := store.ContactNameValidator(v); err != nil {
			return &ValidationError{Name: "contact_name", err: fmt.Errorf(`ent: validator failed for field "Store.contact_name": %w`, err)}
		}
	}
	if v, ok := su.mutation.ContactPhone(); ok {
		if err := store.ContactPhoneValidator(v); err != nil {
			return &ValidationError{Name: "contact_phone", err: fmt.Errorf(`ent: validator failed for field "Store.contact_phone": %w`, err)}
		}
	}
	if v, ok := su.mutation.UnifiedSocialCreditCode(); ok {
		if err := store.UnifiedSocialCreditCodeValidator(v); err != nil {
			return &ValidationError{Name: "unified_social_credit_code", err: fmt.Errorf(`ent: validator failed for field "Store.unified_social_credit_code": %w`, err)}
		}
	}
	if v, ok := su.mutation.StoreLogo(); ok {
		if err := store.StoreLogoValidator(v); err != nil {
			return &ValidationError{Name: "store_logo", err: fmt.Errorf(`ent: validator failed for field "Store.store_logo": %w`, err)}
		}
	}
	if v, ok := su.mutation.BusinessLicenseURL(); ok {
		if err := store.BusinessLicenseURLValidator(v); err != nil {
			return &ValidationError{Name: "business_license_url", err: fmt.Errorf(`ent: validator failed for field "Store.business_license_url": %w`, err)}
		}
	}
	if v, ok := su.mutation.StorefrontURL(); ok {
		if err := store.StorefrontURLValidator(v); err != nil {
			return &ValidationError{Name: "storefront_url", err: fmt.Errorf(`ent: validator failed for field "Store.storefront_url": %w`, err)}
		}
	}
	if v, ok := su.mutation.CashierDeskURL(); ok {
		if err := store.CashierDeskURLValidator(v); err != nil {
			return &ValidationError{Name: "cashier_desk_url", err: fmt.Errorf(`ent: validator failed for field "Store.cashier_desk_url": %w`, err)}
		}
	}
	if v, ok := su.mutation.DiningEnvironmentURL(); ok {
		if err := store.DiningEnvironmentURLValidator(v); err != nil {
			return &ValidationError{Name: "dining_environment_url", err: fmt.Errorf(`ent: validator failed for field "Store.dining_environment_url": %w`, err)}
		}
	}
	if v, ok := su.mutation.FoodOperationLicenseURL(); ok {
		if err := store.FoodOperationLicenseURLValidator(v); err != nil {
			return &ValidationError{Name: "food_operation_license_url", err: fmt.Errorf(`ent: validator failed for field "Store.food_operation_license_url": %w`, err)}
		}
	}
	if v, ok := su.mutation.CountryName(); ok {
		if err := store.CountryNameValidator(v); err != nil {
			return &ValidationError{Name: "country_name", err: fmt.Errorf(`ent: validator failed for field "Store.country_name": %w`, err)}
		}
	}
	if v, ok := su.mutation.ProvinceName(); ok {
		if err := store.ProvinceNameValidator(v); err != nil {
			return &ValidationError{Name: "province_name", err: fmt.Errorf(`ent: validator failed for field "Store.province_name": %w`, err)}
		}
	}
	if v, ok := su.mutation.CityName(); ok {
		if err := store.CityNameValidator(v); err != nil {
			return &ValidationError{Name: "city_name", err: fmt.Errorf(`ent: validator failed for field "Store.city_name": %w`, err)}
		}
	}
	if v, ok := su.mutation.DistrictName(); ok {
		if err := store.DistrictNameValidator(v); err != nil {
			return &ValidationError{Name: "district_name", err: fmt.Errorf(`ent: validator failed for field "Store.district_name": %w`, err)}
		}
	}
	if v, ok := su.mutation.Address(); ok {
		if err := store.AddressValidator(v); err != nil {
			return &ValidationError{Name: "address", err: fmt.Errorf(`ent: validator failed for field "Store.address": %w`, err)}
		}
	}
	if v, ok := su.mutation.Lng(); ok {
		if err := store.LngValidator(v); err != nil {
			return &ValidationError{Name: "lng", err: fmt.Errorf(`ent: validator failed for field "Store.lng": %w`, err)}
		}
	}
	if v, ok := su.mutation.Lat(); ok {
		if err := store.LatValidator(v); err != nil {
			return &ValidationError{Name: "lat", err: fmt.Errorf(`ent: validator failed for field "Store.lat": %w`, err)}
		}
	}
	if su.mutation.MerchantCleared() && len(su.mutation.MerchantIDs()) > 0 {
		return errors.New(`ent: clearing a required unique edge "Store.merchant"`)
	}
	if su.mutation.AdminUserCleared() && len(su.mutation.AdminUserIDs()) > 0 {
		return errors.New(`ent: clearing a required unique edge "Store.admin_user"`)
	}
	return nil
}

// Modify adds a statement modifier for attaching custom logic to the UPDATE statement.
func (su *StoreUpdate) Modify(modifiers ...func(u *sql.UpdateBuilder)) *StoreUpdate {
	su.modifiers = append(su.modifiers, modifiers...)
	return su
}

func (su *StoreUpdate) sqlSave(ctx context.Context) (n int, err error) {
	if err := su.check(); err != nil {
		return n, err
	}
	_spec := sqlgraph.NewUpdateSpec(store.Table, store.Columns, sqlgraph.NewFieldSpec(store.FieldID, field.TypeInt))
	if ps := su.mutation.predicates; len(ps) > 0 {
		_spec.Predicate = func(selector *sql.Selector) {
			for i := range ps {
				ps[i](selector)
			}
		}
	}
	if value, ok := su.mutation.UpdatedAt(); ok {
		_spec.SetField(store.FieldUpdatedAt, field.TypeTime, value)
	}
	if value, ok := su.mutation.DeletedAt(); ok {
		_spec.SetField(store.FieldDeletedAt, field.TypeInt64, value)
	}
	if value, ok := su.mutation.AddedDeletedAt(); ok {
		_spec.AddField(store.FieldDeletedAt, field.TypeInt64, value)
	}
	if value, ok := su.mutation.AdminPhoneNumber(); ok {
		_spec.SetField(store.FieldAdminPhoneNumber, field.TypeString, value)
	}
	if value, ok := su.mutation.StoreName(); ok {
		_spec.SetField(store.FieldStoreName, field.TypeString, value)
	}
	if value, ok := su.mutation.StoreShortName(); ok {
		_spec.SetField(store.FieldStoreShortName, field.TypeString, value)
	}
	if value, ok := su.mutation.StoreCode(); ok {
		_spec.SetField(store.FieldStoreCode, field.TypeString, value)
	}
	if value, ok := su.mutation.Status(); ok {
		_spec.SetField(store.FieldStatus, field.TypeEnum, value)
	}
	if value, ok := su.mutation.BusinessModel(); ok {
		_spec.SetField(store.FieldBusinessModel, field.TypeEnum, value)
	}
	if value, ok := su.mutation.BusinessTypeID(); ok {
		_spec.SetField(store.FieldBusinessTypeID, field.TypeInt, value)
	}
	if value, ok := su.mutation.AddedBusinessTypeID(); ok {
		_spec.AddField(store.FieldBusinessTypeID, field.TypeInt, value)
	}
	if value, ok := su.mutation.ContactName(); ok {
		_spec.SetField(store.FieldContactName, field.TypeString, value)
	}
	if value, ok := su.mutation.ContactPhone(); ok {
		_spec.SetField(store.FieldContactPhone, field.TypeString, value)
	}
	if value, ok := su.mutation.UnifiedSocialCreditCode(); ok {
		_spec.SetField(store.FieldUnifiedSocialCreditCode, field.TypeString, value)
	}
	if value, ok := su.mutation.StoreLogo(); ok {
		_spec.SetField(store.FieldStoreLogo, field.TypeString, value)
	}
	if value, ok := su.mutation.BusinessLicenseURL(); ok {
		_spec.SetField(store.FieldBusinessLicenseURL, field.TypeString, value)
	}
	if value, ok := su.mutation.StorefrontURL(); ok {
		_spec.SetField(store.FieldStorefrontURL, field.TypeString, value)
	}
	if value, ok := su.mutation.CashierDeskURL(); ok {
		_spec.SetField(store.FieldCashierDeskURL, field.TypeString, value)
	}
	if value, ok := su.mutation.DiningEnvironmentURL(); ok {
		_spec.SetField(store.FieldDiningEnvironmentURL, field.TypeString, value)
	}
	if value, ok := su.mutation.FoodOperationLicenseURL(); ok {
		_spec.SetField(store.FieldFoodOperationLicenseURL, field.TypeString, value)
	}
	if value, ok := su.mutation.CountryID(); ok {
		_spec.SetField(store.FieldCountryID, field.TypeInt, value)
	}
	if value, ok := su.mutation.AddedCountryID(); ok {
		_spec.AddField(store.FieldCountryID, field.TypeInt, value)
	}
	if value, ok := su.mutation.ProvinceID(); ok {
		_spec.SetField(store.FieldProvinceID, field.TypeInt, value)
	}
	if value, ok := su.mutation.AddedProvinceID(); ok {
		_spec.AddField(store.FieldProvinceID, field.TypeInt, value)
	}
	if value, ok := su.mutation.CityID(); ok {
		_spec.SetField(store.FieldCityID, field.TypeInt, value)
	}
	if value, ok := su.mutation.AddedCityID(); ok {
		_spec.AddField(store.FieldCityID, field.TypeInt, value)
	}
	if value, ok := su.mutation.DistrictID(); ok {
		_spec.SetField(store.FieldDistrictID, field.TypeInt, value)
	}
	if value, ok := su.mutation.AddedDistrictID(); ok {
		_spec.AddField(store.FieldDistrictID, field.TypeInt, value)
	}
	if value, ok := su.mutation.CountryName(); ok {
		_spec.SetField(store.FieldCountryName, field.TypeString, value)
	}
	if value, ok := su.mutation.ProvinceName(); ok {
		_spec.SetField(store.FieldProvinceName, field.TypeString, value)
	}
	if value, ok := su.mutation.CityName(); ok {
		_spec.SetField(store.FieldCityName, field.TypeString, value)
	}
	if value, ok := su.mutation.DistrictName(); ok {
		_spec.SetField(store.FieldDistrictName, field.TypeString, value)
	}
	if value, ok := su.mutation.Address(); ok {
		_spec.SetField(store.FieldAddress, field.TypeString, value)
	}
	if value, ok := su.mutation.Lng(); ok {
		_spec.SetField(store.FieldLng, field.TypeString, value)
	}
	if value, ok := su.mutation.Lat(); ok {
		_spec.SetField(store.FieldLat, field.TypeString, value)
	}
	_spec.AddModifiers(su.modifiers...)
	if n, err = sqlgraph.UpdateNodes(ctx, su.driver, _spec); err != nil {
		if _, ok := err.(*sqlgraph.NotFoundError); ok {
			err = &NotFoundError{store.Label}
		} else if sqlgraph.IsConstraintError(err) {
			err = &ConstraintError{msg: err.Error(), wrap: err}
		}
		return 0, err
	}
	su.mutation.done = true
	return n, nil
}

// StoreUpdateOne is the builder for updating a single Store entity.
type StoreUpdateOne struct {
	config
	fields    []string
	hooks     []Hook
	mutation  *StoreMutation
	modifiers []func(*sql.UpdateBuilder)
}

// SetUpdatedAt sets the "updated_at" field.
func (suo *StoreUpdateOne) SetUpdatedAt(t time.Time) *StoreUpdateOne {
	suo.mutation.SetUpdatedAt(t)
	return suo
}

// SetDeletedAt sets the "deleted_at" field.
func (suo *StoreUpdateOne) SetDeletedAt(i int64) *StoreUpdateOne {
	suo.mutation.ResetDeletedAt()
	suo.mutation.SetDeletedAt(i)
	return suo
}

// SetNillableDeletedAt sets the "deleted_at" field if the given value is not nil.
func (suo *StoreUpdateOne) SetNillableDeletedAt(i *int64) *StoreUpdateOne {
	if i != nil {
		suo.SetDeletedAt(*i)
	}
	return suo
}

// AddDeletedAt adds i to the "deleted_at" field.
func (suo *StoreUpdateOne) AddDeletedAt(i int64) *StoreUpdateOne {
	suo.mutation.AddDeletedAt(i)
	return suo
}

// SetAdminPhoneNumber sets the "admin_phone_number" field.
func (suo *StoreUpdateOne) SetAdminPhoneNumber(s string) *StoreUpdateOne {
	suo.mutation.SetAdminPhoneNumber(s)
	return suo
}

// SetNillableAdminPhoneNumber sets the "admin_phone_number" field if the given value is not nil.
func (suo *StoreUpdateOne) SetNillableAdminPhoneNumber(s *string) *StoreUpdateOne {
	if s != nil {
		suo.SetAdminPhoneNumber(*s)
	}
	return suo
}

// SetStoreName sets the "store_name" field.
func (suo *StoreUpdateOne) SetStoreName(s string) *StoreUpdateOne {
	suo.mutation.SetStoreName(s)
	return suo
}

// SetNillableStoreName sets the "store_name" field if the given value is not nil.
func (suo *StoreUpdateOne) SetNillableStoreName(s *string) *StoreUpdateOne {
	if s != nil {
		suo.SetStoreName(*s)
	}
	return suo
}

// SetStoreShortName sets the "store_short_name" field.
func (suo *StoreUpdateOne) SetStoreShortName(s string) *StoreUpdateOne {
	suo.mutation.SetStoreShortName(s)
	return suo
}

// SetNillableStoreShortName sets the "store_short_name" field if the given value is not nil.
func (suo *StoreUpdateOne) SetNillableStoreShortName(s *string) *StoreUpdateOne {
	if s != nil {
		suo.SetStoreShortName(*s)
	}
	return suo
}

// SetStoreCode sets the "store_code" field.
func (suo *StoreUpdateOne) SetStoreCode(s string) *StoreUpdateOne {
	suo.mutation.SetStoreCode(s)
	return suo
}

// SetNillableStoreCode sets the "store_code" field if the given value is not nil.
func (suo *StoreUpdateOne) SetNillableStoreCode(s *string) *StoreUpdateOne {
	if s != nil {
		suo.SetStoreCode(*s)
	}
	return suo
}

// SetStatus sets the "status" field.
func (suo *StoreUpdateOne) SetStatus(ds domain.StoreStatus) *StoreUpdateOne {
	suo.mutation.SetStatus(ds)
	return suo
}

// SetNillableStatus sets the "status" field if the given value is not nil.
func (suo *StoreUpdateOne) SetNillableStatus(ds *domain.StoreStatus) *StoreUpdateOne {
	if ds != nil {
		suo.SetStatus(*ds)
	}
	return suo
}

// SetBusinessModel sets the "business_model" field.
func (suo *StoreUpdateOne) SetBusinessModel(dm domain.BusinessModel) *StoreUpdateOne {
	suo.mutation.SetBusinessModel(dm)
	return suo
}

// SetNillableBusinessModel sets the "business_model" field if the given value is not nil.
func (suo *StoreUpdateOne) SetNillableBusinessModel(dm *domain.BusinessModel) *StoreUpdateOne {
	if dm != nil {
		suo.SetBusinessModel(*dm)
	}
	return suo
}

// SetBusinessTypeID sets the "business_type_id" field.
func (suo *StoreUpdateOne) SetBusinessTypeID(i int) *StoreUpdateOne {
	suo.mutation.ResetBusinessTypeID()
	suo.mutation.SetBusinessTypeID(i)
	return suo
}

// SetNillableBusinessTypeID sets the "business_type_id" field if the given value is not nil.
func (suo *StoreUpdateOne) SetNillableBusinessTypeID(i *int) *StoreUpdateOne {
	if i != nil {
		suo.SetBusinessTypeID(*i)
	}
	return suo
}

// AddBusinessTypeID adds i to the "business_type_id" field.
func (suo *StoreUpdateOne) AddBusinessTypeID(i int) *StoreUpdateOne {
	suo.mutation.AddBusinessTypeID(i)
	return suo
}

// SetContactName sets the "contact_name" field.
func (suo *StoreUpdateOne) SetContactName(s string) *StoreUpdateOne {
	suo.mutation.SetContactName(s)
	return suo
}

// SetNillableContactName sets the "contact_name" field if the given value is not nil.
func (suo *StoreUpdateOne) SetNillableContactName(s *string) *StoreUpdateOne {
	if s != nil {
		suo.SetContactName(*s)
	}
	return suo
}

// SetContactPhone sets the "contact_phone" field.
func (suo *StoreUpdateOne) SetContactPhone(s string) *StoreUpdateOne {
	suo.mutation.SetContactPhone(s)
	return suo
}

// SetNillableContactPhone sets the "contact_phone" field if the given value is not nil.
func (suo *StoreUpdateOne) SetNillableContactPhone(s *string) *StoreUpdateOne {
	if s != nil {
		suo.SetContactPhone(*s)
	}
	return suo
}

// SetUnifiedSocialCreditCode sets the "unified_social_credit_code" field.
func (suo *StoreUpdateOne) SetUnifiedSocialCreditCode(s string) *StoreUpdateOne {
	suo.mutation.SetUnifiedSocialCreditCode(s)
	return suo
}

// SetNillableUnifiedSocialCreditCode sets the "unified_social_credit_code" field if the given value is not nil.
func (suo *StoreUpdateOne) SetNillableUnifiedSocialCreditCode(s *string) *StoreUpdateOne {
	if s != nil {
		suo.SetUnifiedSocialCreditCode(*s)
	}
	return suo
}

// SetStoreLogo sets the "store_logo" field.
func (suo *StoreUpdateOne) SetStoreLogo(s string) *StoreUpdateOne {
	suo.mutation.SetStoreLogo(s)
	return suo
}

// SetNillableStoreLogo sets the "store_logo" field if the given value is not nil.
func (suo *StoreUpdateOne) SetNillableStoreLogo(s *string) *StoreUpdateOne {
	if s != nil {
		suo.SetStoreLogo(*s)
	}
	return suo
}

// SetBusinessLicenseURL sets the "business_license_url" field.
func (suo *StoreUpdateOne) SetBusinessLicenseURL(s string) *StoreUpdateOne {
	suo.mutation.SetBusinessLicenseURL(s)
	return suo
}

// SetNillableBusinessLicenseURL sets the "business_license_url" field if the given value is not nil.
func (suo *StoreUpdateOne) SetNillableBusinessLicenseURL(s *string) *StoreUpdateOne {
	if s != nil {
		suo.SetBusinessLicenseURL(*s)
	}
	return suo
}

// SetStorefrontURL sets the "storefront_url" field.
func (suo *StoreUpdateOne) SetStorefrontURL(s string) *StoreUpdateOne {
	suo.mutation.SetStorefrontURL(s)
	return suo
}

// SetNillableStorefrontURL sets the "storefront_url" field if the given value is not nil.
func (suo *StoreUpdateOne) SetNillableStorefrontURL(s *string) *StoreUpdateOne {
	if s != nil {
		suo.SetStorefrontURL(*s)
	}
	return suo
}

// SetCashierDeskURL sets the "cashier_desk_url" field.
func (suo *StoreUpdateOne) SetCashierDeskURL(s string) *StoreUpdateOne {
	suo.mutation.SetCashierDeskURL(s)
	return suo
}

// SetNillableCashierDeskURL sets the "cashier_desk_url" field if the given value is not nil.
func (suo *StoreUpdateOne) SetNillableCashierDeskURL(s *string) *StoreUpdateOne {
	if s != nil {
		suo.SetCashierDeskURL(*s)
	}
	return suo
}

// SetDiningEnvironmentURL sets the "dining_environment_url" field.
func (suo *StoreUpdateOne) SetDiningEnvironmentURL(s string) *StoreUpdateOne {
	suo.mutation.SetDiningEnvironmentURL(s)
	return suo
}

// SetNillableDiningEnvironmentURL sets the "dining_environment_url" field if the given value is not nil.
func (suo *StoreUpdateOne) SetNillableDiningEnvironmentURL(s *string) *StoreUpdateOne {
	if s != nil {
		suo.SetDiningEnvironmentURL(*s)
	}
	return suo
}

// SetFoodOperationLicenseURL sets the "food_operation_license_url" field.
func (suo *StoreUpdateOne) SetFoodOperationLicenseURL(s string) *StoreUpdateOne {
	suo.mutation.SetFoodOperationLicenseURL(s)
	return suo
}

// SetNillableFoodOperationLicenseURL sets the "food_operation_license_url" field if the given value is not nil.
func (suo *StoreUpdateOne) SetNillableFoodOperationLicenseURL(s *string) *StoreUpdateOne {
	if s != nil {
		suo.SetFoodOperationLicenseURL(*s)
	}
	return suo
}

// SetCountryID sets the "country_id" field.
func (suo *StoreUpdateOne) SetCountryID(i int) *StoreUpdateOne {
	suo.mutation.ResetCountryID()
	suo.mutation.SetCountryID(i)
	return suo
}

// SetNillableCountryID sets the "country_id" field if the given value is not nil.
func (suo *StoreUpdateOne) SetNillableCountryID(i *int) *StoreUpdateOne {
	if i != nil {
		suo.SetCountryID(*i)
	}
	return suo
}

// AddCountryID adds i to the "country_id" field.
func (suo *StoreUpdateOne) AddCountryID(i int) *StoreUpdateOne {
	suo.mutation.AddCountryID(i)
	return suo
}

// SetProvinceID sets the "province_id" field.
func (suo *StoreUpdateOne) SetProvinceID(i int) *StoreUpdateOne {
	suo.mutation.ResetProvinceID()
	suo.mutation.SetProvinceID(i)
	return suo
}

// SetNillableProvinceID sets the "province_id" field if the given value is not nil.
func (suo *StoreUpdateOne) SetNillableProvinceID(i *int) *StoreUpdateOne {
	if i != nil {
		suo.SetProvinceID(*i)
	}
	return suo
}

// AddProvinceID adds i to the "province_id" field.
func (suo *StoreUpdateOne) AddProvinceID(i int) *StoreUpdateOne {
	suo.mutation.AddProvinceID(i)
	return suo
}

// SetCityID sets the "city_id" field.
func (suo *StoreUpdateOne) SetCityID(i int) *StoreUpdateOne {
	suo.mutation.ResetCityID()
	suo.mutation.SetCityID(i)
	return suo
}

// SetNillableCityID sets the "city_id" field if the given value is not nil.
func (suo *StoreUpdateOne) SetNillableCityID(i *int) *StoreUpdateOne {
	if i != nil {
		suo.SetCityID(*i)
	}
	return suo
}

// AddCityID adds i to the "city_id" field.
func (suo *StoreUpdateOne) AddCityID(i int) *StoreUpdateOne {
	suo.mutation.AddCityID(i)
	return suo
}

// SetDistrictID sets the "district_id" field.
func (suo *StoreUpdateOne) SetDistrictID(i int) *StoreUpdateOne {
	suo.mutation.ResetDistrictID()
	suo.mutation.SetDistrictID(i)
	return suo
}

// SetNillableDistrictID sets the "district_id" field if the given value is not nil.
func (suo *StoreUpdateOne) SetNillableDistrictID(i *int) *StoreUpdateOne {
	if i != nil {
		suo.SetDistrictID(*i)
	}
	return suo
}

// AddDistrictID adds i to the "district_id" field.
func (suo *StoreUpdateOne) AddDistrictID(i int) *StoreUpdateOne {
	suo.mutation.AddDistrictID(i)
	return suo
}

// SetCountryName sets the "country_name" field.
func (suo *StoreUpdateOne) SetCountryName(s string) *StoreUpdateOne {
	suo.mutation.SetCountryName(s)
	return suo
}

// SetNillableCountryName sets the "country_name" field if the given value is not nil.
func (suo *StoreUpdateOne) SetNillableCountryName(s *string) *StoreUpdateOne {
	if s != nil {
		suo.SetCountryName(*s)
	}
	return suo
}

// SetProvinceName sets the "province_name" field.
func (suo *StoreUpdateOne) SetProvinceName(s string) *StoreUpdateOne {
	suo.mutation.SetProvinceName(s)
	return suo
}

// SetNillableProvinceName sets the "province_name" field if the given value is not nil.
func (suo *StoreUpdateOne) SetNillableProvinceName(s *string) *StoreUpdateOne {
	if s != nil {
		suo.SetProvinceName(*s)
	}
	return suo
}

// SetCityName sets the "city_name" field.
func (suo *StoreUpdateOne) SetCityName(s string) *StoreUpdateOne {
	suo.mutation.SetCityName(s)
	return suo
}

// SetNillableCityName sets the "city_name" field if the given value is not nil.
func (suo *StoreUpdateOne) SetNillableCityName(s *string) *StoreUpdateOne {
	if s != nil {
		suo.SetCityName(*s)
	}
	return suo
}

// SetDistrictName sets the "district_name" field.
func (suo *StoreUpdateOne) SetDistrictName(s string) *StoreUpdateOne {
	suo.mutation.SetDistrictName(s)
	return suo
}

// SetNillableDistrictName sets the "district_name" field if the given value is not nil.
func (suo *StoreUpdateOne) SetNillableDistrictName(s *string) *StoreUpdateOne {
	if s != nil {
		suo.SetDistrictName(*s)
	}
	return suo
}

// SetAddress sets the "address" field.
func (suo *StoreUpdateOne) SetAddress(s string) *StoreUpdateOne {
	suo.mutation.SetAddress(s)
	return suo
}

// SetNillableAddress sets the "address" field if the given value is not nil.
func (suo *StoreUpdateOne) SetNillableAddress(s *string) *StoreUpdateOne {
	if s != nil {
		suo.SetAddress(*s)
	}
	return suo
}

// SetLng sets the "lng" field.
func (suo *StoreUpdateOne) SetLng(s string) *StoreUpdateOne {
	suo.mutation.SetLng(s)
	return suo
}

// SetNillableLng sets the "lng" field if the given value is not nil.
func (suo *StoreUpdateOne) SetNillableLng(s *string) *StoreUpdateOne {
	if s != nil {
		suo.SetLng(*s)
	}
	return suo
}

// SetLat sets the "lat" field.
func (suo *StoreUpdateOne) SetLat(s string) *StoreUpdateOne {
	suo.mutation.SetLat(s)
	return suo
}

// SetNillableLat sets the "lat" field if the given value is not nil.
func (suo *StoreUpdateOne) SetNillableLat(s *string) *StoreUpdateOne {
	if s != nil {
		suo.SetLat(*s)
	}
	return suo
}

// Mutation returns the StoreMutation object of the builder.
func (suo *StoreUpdateOne) Mutation() *StoreMutation {
	return suo.mutation
}

// Where appends a list predicates to the StoreUpdate builder.
func (suo *StoreUpdateOne) Where(ps ...predicate.Store) *StoreUpdateOne {
	suo.mutation.Where(ps...)
	return suo
}

// Select allows selecting one or more fields (columns) of the returned entity.
// The default is selecting all fields defined in the entity schema.
func (suo *StoreUpdateOne) Select(field string, fields ...string) *StoreUpdateOne {
	suo.fields = append([]string{field}, fields...)
	return suo
}

// Save executes the query and returns the updated Store entity.
func (suo *StoreUpdateOne) Save(ctx context.Context) (*Store, error) {
	suo.defaults()
	return withHooks(ctx, suo.sqlSave, suo.mutation, suo.hooks)
}

// SaveX is like Save, but panics if an error occurs.
func (suo *StoreUpdateOne) SaveX(ctx context.Context) *Store {
	node, err := suo.Save(ctx)
	if err != nil {
		panic(err)
	}
	return node
}

// Exec executes the query on the entity.
func (suo *StoreUpdateOne) Exec(ctx context.Context) error {
	_, err := suo.Save(ctx)
	return err
}

// ExecX is like Exec, but panics if an error occurs.
func (suo *StoreUpdateOne) ExecX(ctx context.Context) {
	if err := suo.Exec(ctx); err != nil {
		panic(err)
	}
}

// defaults sets the default values of the builder before save.
func (suo *StoreUpdateOne) defaults() {
	if _, ok := suo.mutation.UpdatedAt(); !ok {
		v := store.UpdateDefaultUpdatedAt()
		suo.mutation.SetUpdatedAt(v)
	}
}

// check runs all checks and user-defined validators on the builder.
func (suo *StoreUpdateOne) check() error {
	if v, ok := suo.mutation.AdminPhoneNumber(); ok {
		if err := store.AdminPhoneNumberValidator(v); err != nil {
			return &ValidationError{Name: "admin_phone_number", err: fmt.Errorf(`ent: validator failed for field "Store.admin_phone_number": %w`, err)}
		}
	}
	if v, ok := suo.mutation.StoreName(); ok {
		if err := store.StoreNameValidator(v); err != nil {
			return &ValidationError{Name: "store_name", err: fmt.Errorf(`ent: validator failed for field "Store.store_name": %w`, err)}
		}
	}
	if v, ok := suo.mutation.StoreShortName(); ok {
		if err := store.StoreShortNameValidator(v); err != nil {
			return &ValidationError{Name: "store_short_name", err: fmt.Errorf(`ent: validator failed for field "Store.store_short_name": %w`, err)}
		}
	}
	if v, ok := suo.mutation.StoreCode(); ok {
		if err := store.StoreCodeValidator(v); err != nil {
			return &ValidationError{Name: "store_code", err: fmt.Errorf(`ent: validator failed for field "Store.store_code": %w`, err)}
		}
	}
	if v, ok := suo.mutation.Status(); ok {
		if err := store.StatusValidator(v); err != nil {
			return &ValidationError{Name: "status", err: fmt.Errorf(`ent: validator failed for field "Store.status": %w`, err)}
		}
	}
	if v, ok := suo.mutation.BusinessModel(); ok {
		if err := store.BusinessModelValidator(v); err != nil {
			return &ValidationError{Name: "business_model", err: fmt.Errorf(`ent: validator failed for field "Store.business_model": %w`, err)}
		}
	}
	if v, ok := suo.mutation.ContactName(); ok {
		if err := store.ContactNameValidator(v); err != nil {
			return &ValidationError{Name: "contact_name", err: fmt.Errorf(`ent: validator failed for field "Store.contact_name": %w`, err)}
		}
	}
	if v, ok := suo.mutation.ContactPhone(); ok {
		if err := store.ContactPhoneValidator(v); err != nil {
			return &ValidationError{Name: "contact_phone", err: fmt.Errorf(`ent: validator failed for field "Store.contact_phone": %w`, err)}
		}
	}
	if v, ok := suo.mutation.UnifiedSocialCreditCode(); ok {
		if err := store.UnifiedSocialCreditCodeValidator(v); err != nil {
			return &ValidationError{Name: "unified_social_credit_code", err: fmt.Errorf(`ent: validator failed for field "Store.unified_social_credit_code": %w`, err)}
		}
	}
	if v, ok := suo.mutation.StoreLogo(); ok {
		if err := store.StoreLogoValidator(v); err != nil {
			return &ValidationError{Name: "store_logo", err: fmt.Errorf(`ent: validator failed for field "Store.store_logo": %w`, err)}
		}
	}
	if v, ok := suo.mutation.BusinessLicenseURL(); ok {
		if err := store.BusinessLicenseURLValidator(v); err != nil {
			return &ValidationError{Name: "business_license_url", err: fmt.Errorf(`ent: validator failed for field "Store.business_license_url": %w`, err)}
		}
	}
	if v, ok := suo.mutation.StorefrontURL(); ok {
		if err := store.StorefrontURLValidator(v); err != nil {
			return &ValidationError{Name: "storefront_url", err: fmt.Errorf(`ent: validator failed for field "Store.storefront_url": %w`, err)}
		}
	}
	if v, ok := suo.mutation.CashierDeskURL(); ok {
		if err := store.CashierDeskURLValidator(v); err != nil {
			return &ValidationError{Name: "cashier_desk_url", err: fmt.Errorf(`ent: validator failed for field "Store.cashier_desk_url": %w`, err)}
		}
	}
	if v, ok := suo.mutation.DiningEnvironmentURL(); ok {
		if err := store.DiningEnvironmentURLValidator(v); err != nil {
			return &ValidationError{Name: "dining_environment_url", err: fmt.Errorf(`ent: validator failed for field "Store.dining_environment_url": %w`, err)}
		}
	}
	if v, ok := suo.mutation.FoodOperationLicenseURL(); ok {
		if err := store.FoodOperationLicenseURLValidator(v); err != nil {
			return &ValidationError{Name: "food_operation_license_url", err: fmt.Errorf(`ent: validator failed for field "Store.food_operation_license_url": %w`, err)}
		}
	}
	if v, ok := suo.mutation.CountryName(); ok {
		if err := store.CountryNameValidator(v); err != nil {
			return &ValidationError{Name: "country_name", err: fmt.Errorf(`ent: validator failed for field "Store.country_name": %w`, err)}
		}
	}
	if v, ok := suo.mutation.ProvinceName(); ok {
		if err := store.ProvinceNameValidator(v); err != nil {
			return &ValidationError{Name: "province_name", err: fmt.Errorf(`ent: validator failed for field "Store.province_name": %w`, err)}
		}
	}
	if v, ok := suo.mutation.CityName(); ok {
		if err := store.CityNameValidator(v); err != nil {
			return &ValidationError{Name: "city_name", err: fmt.Errorf(`ent: validator failed for field "Store.city_name": %w`, err)}
		}
	}
	if v, ok := suo.mutation.DistrictName(); ok {
		if err := store.DistrictNameValidator(v); err != nil {
			return &ValidationError{Name: "district_name", err: fmt.Errorf(`ent: validator failed for field "Store.district_name": %w`, err)}
		}
	}
	if v, ok := suo.mutation.Address(); ok {
		if err := store.AddressValidator(v); err != nil {
			return &ValidationError{Name: "address", err: fmt.Errorf(`ent: validator failed for field "Store.address": %w`, err)}
		}
	}
	if v, ok := suo.mutation.Lng(); ok {
		if err := store.LngValidator(v); err != nil {
			return &ValidationError{Name: "lng", err: fmt.Errorf(`ent: validator failed for field "Store.lng": %w`, err)}
		}
	}
	if v, ok := suo.mutation.Lat(); ok {
		if err := store.LatValidator(v); err != nil {
			return &ValidationError{Name: "lat", err: fmt.Errorf(`ent: validator failed for field "Store.lat": %w`, err)}
		}
	}
	if suo.mutation.MerchantCleared() && len(suo.mutation.MerchantIDs()) > 0 {
		return errors.New(`ent: clearing a required unique edge "Store.merchant"`)
	}
	if suo.mutation.AdminUserCleared() && len(suo.mutation.AdminUserIDs()) > 0 {
		return errors.New(`ent: clearing a required unique edge "Store.admin_user"`)
	}
	return nil
}

// Modify adds a statement modifier for attaching custom logic to the UPDATE statement.
func (suo *StoreUpdateOne) Modify(modifiers ...func(u *sql.UpdateBuilder)) *StoreUpdateOne {
	suo.modifiers = append(suo.modifiers, modifiers...)
	return suo
}

func (suo *StoreUpdateOne) sqlSave(ctx context.Context) (_node *Store, err error) {
	if err := suo.check(); err != nil {
		return _node, err
	}
	_spec := sqlgraph.NewUpdateSpec(store.Table, store.Columns, sqlgraph.NewFieldSpec(store.FieldID, field.TypeInt))
	id, ok := suo.mutation.ID()
	if !ok {
		return nil, &ValidationError{Name: "id", err: errors.New(`ent: missing "Store.id" for update`)}
	}
	_spec.Node.ID.Value = id
	if fields := suo.fields; len(fields) > 0 {
		_spec.Node.Columns = make([]string, 0, len(fields))
		_spec.Node.Columns = append(_spec.Node.Columns, store.FieldID)
		for _, f := range fields {
			if !store.ValidColumn(f) {
				return nil, &ValidationError{Name: f, err: fmt.Errorf("ent: invalid field %q for query", f)}
			}
			if f != store.FieldID {
				_spec.Node.Columns = append(_spec.Node.Columns, f)
			}
		}
	}
	if ps := suo.mutation.predicates; len(ps) > 0 {
		_spec.Predicate = func(selector *sql.Selector) {
			for i := range ps {
				ps[i](selector)
			}
		}
	}
	if value, ok := suo.mutation.UpdatedAt(); ok {
		_spec.SetField(store.FieldUpdatedAt, field.TypeTime, value)
	}
	if value, ok := suo.mutation.DeletedAt(); ok {
		_spec.SetField(store.FieldDeletedAt, field.TypeInt64, value)
	}
	if value, ok := suo.mutation.AddedDeletedAt(); ok {
		_spec.AddField(store.FieldDeletedAt, field.TypeInt64, value)
	}
	if value, ok := suo.mutation.AdminPhoneNumber(); ok {
		_spec.SetField(store.FieldAdminPhoneNumber, field.TypeString, value)
	}
	if value, ok := suo.mutation.StoreName(); ok {
		_spec.SetField(store.FieldStoreName, field.TypeString, value)
	}
	if value, ok := suo.mutation.StoreShortName(); ok {
		_spec.SetField(store.FieldStoreShortName, field.TypeString, value)
	}
	if value, ok := suo.mutation.StoreCode(); ok {
		_spec.SetField(store.FieldStoreCode, field.TypeString, value)
	}
	if value, ok := suo.mutation.Status(); ok {
		_spec.SetField(store.FieldStatus, field.TypeEnum, value)
	}
	if value, ok := suo.mutation.BusinessModel(); ok {
		_spec.SetField(store.FieldBusinessModel, field.TypeEnum, value)
	}
	if value, ok := suo.mutation.BusinessTypeID(); ok {
		_spec.SetField(store.FieldBusinessTypeID, field.TypeInt, value)
	}
	if value, ok := suo.mutation.AddedBusinessTypeID(); ok {
		_spec.AddField(store.FieldBusinessTypeID, field.TypeInt, value)
	}
	if value, ok := suo.mutation.ContactName(); ok {
		_spec.SetField(store.FieldContactName, field.TypeString, value)
	}
	if value, ok := suo.mutation.ContactPhone(); ok {
		_spec.SetField(store.FieldContactPhone, field.TypeString, value)
	}
	if value, ok := suo.mutation.UnifiedSocialCreditCode(); ok {
		_spec.SetField(store.FieldUnifiedSocialCreditCode, field.TypeString, value)
	}
	if value, ok := suo.mutation.StoreLogo(); ok {
		_spec.SetField(store.FieldStoreLogo, field.TypeString, value)
	}
	if value, ok := suo.mutation.BusinessLicenseURL(); ok {
		_spec.SetField(store.FieldBusinessLicenseURL, field.TypeString, value)
	}
	if value, ok := suo.mutation.StorefrontURL(); ok {
		_spec.SetField(store.FieldStorefrontURL, field.TypeString, value)
	}
	if value, ok := suo.mutation.CashierDeskURL(); ok {
		_spec.SetField(store.FieldCashierDeskURL, field.TypeString, value)
	}
	if value, ok := suo.mutation.DiningEnvironmentURL(); ok {
		_spec.SetField(store.FieldDiningEnvironmentURL, field.TypeString, value)
	}
	if value, ok := suo.mutation.FoodOperationLicenseURL(); ok {
		_spec.SetField(store.FieldFoodOperationLicenseURL, field.TypeString, value)
	}
	if value, ok := suo.mutation.CountryID(); ok {
		_spec.SetField(store.FieldCountryID, field.TypeInt, value)
	}
	if value, ok := suo.mutation.AddedCountryID(); ok {
		_spec.AddField(store.FieldCountryID, field.TypeInt, value)
	}
	if value, ok := suo.mutation.ProvinceID(); ok {
		_spec.SetField(store.FieldProvinceID, field.TypeInt, value)
	}
	if value, ok := suo.mutation.AddedProvinceID(); ok {
		_spec.AddField(store.FieldProvinceID, field.TypeInt, value)
	}
	if value, ok := suo.mutation.CityID(); ok {
		_spec.SetField(store.FieldCityID, field.TypeInt, value)
	}
	if value, ok := suo.mutation.AddedCityID(); ok {
		_spec.AddField(store.FieldCityID, field.TypeInt, value)
	}
	if value, ok := suo.mutation.DistrictID(); ok {
		_spec.SetField(store.FieldDistrictID, field.TypeInt, value)
	}
	if value, ok := suo.mutation.AddedDistrictID(); ok {
		_spec.AddField(store.FieldDistrictID, field.TypeInt, value)
	}
	if value, ok := suo.mutation.CountryName(); ok {
		_spec.SetField(store.FieldCountryName, field.TypeString, value)
	}
	if value, ok := suo.mutation.ProvinceName(); ok {
		_spec.SetField(store.FieldProvinceName, field.TypeString, value)
	}
	if value, ok := suo.mutation.CityName(); ok {
		_spec.SetField(store.FieldCityName, field.TypeString, value)
	}
	if value, ok := suo.mutation.DistrictName(); ok {
		_spec.SetField(store.FieldDistrictName, field.TypeString, value)
	}
	if value, ok := suo.mutation.Address(); ok {
		_spec.SetField(store.FieldAddress, field.TypeString, value)
	}
	if value, ok := suo.mutation.Lng(); ok {
		_spec.SetField(store.FieldLng, field.TypeString, value)
	}
	if value, ok := suo.mutation.Lat(); ok {
		_spec.SetField(store.FieldLat, field.TypeString, value)
	}
	_spec.AddModifiers(suo.modifiers...)
	_node = &Store{config: suo.config}
	_spec.Assign = _node.assignValues
	_spec.ScanValues = _node.scanValues
	if err = sqlgraph.UpdateNode(ctx, suo.driver, _spec); err != nil {
		if _, ok := err.(*sqlgraph.NotFoundError); ok {
			err = &NotFoundError{store.Label}
		} else if sqlgraph.IsConstraintError(err) {
			err = &ConstraintError{msg: err.Error(), wrap: err}
		}
		return nil, err
	}
	suo.mutation.done = true
	return _node, nil
}
